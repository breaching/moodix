{"version":3,"file":"SettingsTab-BesURcyG.js","sources":["../../src/components/settings/SettingsTab.tsx"],"sourcesContent":["import { memo, useRef, useState, useEffect, useCallback } from 'react';\nimport { useAuthStore, useSettingsStore, useUIStore } from '@/stores';\nimport { getTranslation } from '@/utils/translations';\nimport { getConsumableColor, getConsumableBg } from '@/utils/helpers';\nimport { GlowCard, Icons, ICON_MAP } from '@/components/ui';\nimport { api } from '@/api';\nimport type { ColorScheme, User } from '@/types';\n\n/**\n * Settings tab component\n */\nconst SettingsTab = memo(function SettingsTab() {\n  const { settings, updateSettings, updateConsumable } = useSettingsStore();\n  const { showToast } = useUIStore();\n  const { logout, isAdmin } = useAuthStore();\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // User management state\n  const [users, setUsers] = useState<User[]>([]);\n  const [loadingUsers, setLoadingUsers] = useState(false);\n  const [showAddUser, setShowAddUser] = useState(false);\n  const [newUser, setNewUser] = useState({ username: '', email: '', password: '', is_admin: false });\n  const [resetPasswordId, setResetPasswordId] = useState<number | null>(null);\n  const [newPassword, setNewPassword] = useState('');\n\n  const t = (key: Parameters<typeof getTranslation>[1]) => getTranslation(settings.lang, key);\n\n  // Load users for admin\n  const loadUsers = useCallback(async () => {\n    setLoadingUsers(true);\n    try {\n      const result = await api.admin.listUsers();\n      if (result?.users) {\n        setUsers(result.users);\n      }\n    } catch (err) {\n      console.error('loadUsers error:', err);\n    }\n    setLoadingUsers(false);\n  }, []);\n\n  // Load users when component mounts and isAdmin is true\n  useEffect(() => {\n    if (isAdmin) {\n      void loadUsers();\n    }\n  }, [isAdmin, loadUsers]);\n\n  const handleCreateUser = async () => {\n    if (!newUser.username || !newUser.password) {\n      showToast(settings.lang === 'fr' ? 'Nom et mot de passe requis' : 'Username and password required', 'error');\n      return;\n    }\n    if (newUser.password.length < 8) {\n      showToast(settings.lang === 'fr' ? 'Le mot de passe doit contenir au moins 8 caractères' : 'Password must be at least 8 characters', 'error');\n      return;\n    }\n    if (newUser.username.length < 3) {\n      showToast(settings.lang === 'fr' ? 'Le nom doit contenir au moins 3 caractères' : 'Username must be at least 3 characters', 'error');\n      return;\n    }\n    const result = await api.admin.createUser(newUser.username, newUser.password, newUser.email, newUser.is_admin);\n    if (result.ok) {\n      showToast(settings.lang === 'fr' ? 'Utilisateur créé' : 'User created', 'success');\n      setNewUser({ username: '', email: '', password: '', is_admin: false });\n      setShowAddUser(false);\n      void loadUsers();\n    } else {\n      const errorData = result.data as string;\n      const errorMsg = errorData?.includes('already exists')\n        ? (settings.lang === 'fr' ? 'Ce nom ou email existe déjà' : 'Username or email already exists')\n        : (settings.lang === 'fr' ? 'Erreur création' : 'Creation error');\n      showToast(errorMsg, 'error');\n    }\n  };\n\n  const handleDeleteUser = async (userId: number) => {\n    const result = await api.admin.deleteUser(userId);\n    if (result.ok) {\n      showToast(settings.lang === 'fr' ? 'Utilisateur supprimé' : 'User deleted', 'success');\n      void loadUsers();\n    } else {\n      showToast(settings.lang === 'fr' ? 'Erreur suppression' : 'Delete error', 'error');\n    }\n  };\n\n  const handleToggleAdmin = async (user: User) => {\n    const result = await api.admin.updateUser(user.id, { is_admin: !user.is_admin });\n    if (result.ok) {\n      showToast(settings.lang === 'fr' ? 'Rôle mis à jour' : 'Role updated', 'success');\n      void loadUsers();\n    }\n  };\n\n  const handleToggleActive = async (user: User) => {\n    const result = await api.admin.updateUser(user.id, { is_active: !user.is_active });\n    if (result.ok) {\n      showToast(settings.lang === 'fr' ? 'Statut mis à jour' : 'Status updated', 'success');\n      void loadUsers();\n    }\n  };\n\n  const handleResetPassword = async (userId: number) => {\n    if (!newPassword) {\n      showToast(settings.lang === 'fr' ? 'Mot de passe requis' : 'Password required', 'error');\n      return;\n    }\n    const result = await api.admin.resetPassword(userId, newPassword);\n    if (result.ok) {\n      showToast(settings.lang === 'fr' ? 'Mot de passe réinitialisé' : 'Password reset', 'success');\n      setResetPasswordId(null);\n      setNewPassword('');\n    } else {\n      showToast(settings.lang === 'fr' ? 'Erreur réinitialisation' : 'Reset error', 'error');\n    }\n  };\n\n  const handleExport = () => {\n    window.open('/api/export/json', '_blank');\n  };\n\n  const handleImport = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      try {\n        JSON.parse(e.target?.result as string);\n        showToast('Données importées !', 'success');\n      } catch {\n        showToast('Erreur fichier invalide', 'error');\n      }\n    };\n    reader.readAsText(file);\n  };\n\n  const handleLogout = async () => {\n    await logout();\n  };\n\n  const colorSchemes: { name: ColorScheme; colorClass: string }[] = [\n    { name: 'violet', colorClass: 'bg-violet-500' },\n    { name: 'blue', colorClass: 'bg-blue-500' },\n    { name: 'green', colorClass: 'bg-emerald-500' },\n    { name: 'rose', colorClass: 'bg-rose-500' },\n    { name: 'orange', colorClass: 'bg-orange-500' },\n  ];\n\n  return (\n    <div className=\"space-y-5\">\n      <h2 className=\"text-xl font-bold text-center mb-6 text-[var(--text-main)]\">\n        {t('settings_title')}\n      </h2>\n\n      {/* Language */}\n      <GlowCard className=\"bg-[var(--bg-card)] rounded-2xl p-5 shadow-[var(--shadow-md)] card-animated stagger-delay-1\">\n        <h3 className=\"text-xs font-semibold text-[var(--text-secondary)] mb-4 uppercase tracking-wider\">\n          {t('lang_title')}\n        </h3>\n        <div className=\"flex gap-3\" role=\"radiogroup\" aria-label={t('lang_title')}>\n          <button\n            onClick={() => updateSettings({ lang: 'fr' })}\n            className={`btn-interactive flex-1 py-3 rounded-xl font-bold transition-all ${\n              settings.lang === 'fr'\n                ? 'bg-[var(--primary)] text-white shadow-lg shadow-[var(--primary)]/20'\n                : 'bg-input text-[var(--text-secondary)] hover:bg-[var(--bg-elevated)]'\n            }`}\n            role=\"radio\"\n            aria-checked={settings.lang === 'fr'}\n          >\n            Français\n          </button>\n          <button\n            onClick={() => updateSettings({ lang: 'en' })}\n            className={`btn-interactive flex-1 py-3 rounded-xl font-bold transition-all ${\n              settings.lang === 'en'\n                ? 'bg-[var(--primary)] text-white shadow-lg shadow-[var(--primary)]/20'\n                : 'bg-input text-[var(--text-secondary)] hover:bg-[var(--bg-elevated)]'\n            }`}\n            role=\"radio\"\n            aria-checked={settings.lang === 'en'}\n          >\n            English\n          </button>\n        </div>\n      </GlowCard>\n\n      {/* Appearance */}\n      <GlowCard className=\"bg-[var(--bg-card)] rounded-2xl p-5 shadow-[var(--shadow-md)] card-animated stagger-delay-2\">\n        <h3 className=\"text-xs font-semibold text-[var(--text-secondary)] mb-4 uppercase tracking-wider\">\n          {t('appearance')}\n        </h3>\n\n        {/* Theme mode */}\n        <div className=\"mb-5\">\n          <h4 className=\"text-sm font-semibold text-[var(--text-main)] mb-3\">\n            {t('theme_mode')}\n          </h4>\n          <div className=\"flex gap-3\" role=\"radiogroup\" aria-label={t('theme_mode')}>\n            <button\n              onClick={() => updateSettings({ theme: 'dark' })}\n              className={`btn-interactive flex-1 py-3 px-4 rounded-xl font-bold transition-all flex items-center justify-center gap-2 ${\n                settings.theme === 'dark'\n                  ? 'bg-[var(--primary)] text-white shadow-lg shadow-[var(--primary)]/20'\n                  : 'bg-input text-[var(--text-secondary)] hover:bg-[var(--bg-elevated)]'\n              }`}\n              role=\"radio\"\n              aria-checked={settings.theme === 'dark'}\n            >\n              <Icons.Moon className=\"w-4 h-4\" />\n              {t('theme_dark')}\n            </button>\n            <button\n              onClick={() => updateSettings({ theme: 'light' })}\n              className={`btn-interactive flex-1 py-3 px-4 rounded-xl font-bold transition-all flex items-center justify-center gap-2 ${\n                settings.theme === 'light'\n                  ? 'bg-[var(--primary)] text-white shadow-lg shadow-[var(--primary)]/20'\n                  : 'bg-input text-[var(--text-secondary)] hover:bg-[var(--bg-elevated)]'\n              }`}\n              role=\"radio\"\n              aria-checked={settings.theme === 'light'}\n            >\n              <Icons.Sun className=\"w-4 h-4\" />\n              {t('theme_light')}\n            </button>\n          </div>\n        </div>\n\n        {/* Color scheme */}\n        <div>\n          <h4 className=\"text-sm font-semibold text-[var(--text-main)] mb-3\">\n            {t('color_scheme')}\n          </h4>\n          <div className=\"grid grid-cols-5 gap-2\" role=\"radiogroup\" aria-label={t('color_scheme')}>\n            {colorSchemes.map((scheme, idx) => (\n              <button\n                key={scheme.name}\n                onClick={() => updateSettings({ colorScheme: scheme.name })}\n                className={`relative py-3 px-2 rounded-xl font-bold transition-all hover:scale-105 card-animated stagger-delay-${idx + 1} ${\n                  settings.colorScheme === scheme.name\n                    ? 'bg-[var(--bg-elevated)] scale-105'\n                    : 'bg-[var(--bg-main)]/30'\n                }`}\n                role=\"radio\"\n                aria-checked={settings.colorScheme === scheme.name}\n                aria-label={t(`color_${scheme.name}` as keyof typeof t)}\n              >\n                <div\n                  className={`w-8 h-8 rounded-full ${scheme.colorClass} mx-auto mb-1 shadow-lg transition-transform ${\n                    settings.colorScheme === scheme.name ? 'scale-110 ring-2 ring-white/30' : ''\n                  }`}\n                />\n                <div className=\"text-xs text-[var(--text-secondary)]\">\n                  {t(`color_${scheme.name}` as keyof typeof t)}\n                </div>\n                {settings.colorScheme === scheme.name && (\n                  <div className=\"absolute top-1 right-1 text-[var(--primary)] animate-pop-in\">\n                    <Icons.CheckSmall />\n                  </div>\n                )}\n              </button>\n            ))}\n          </div>\n        </div>\n      </GlowCard>\n\n      {/* Consumables config */}\n      <GlowCard className=\"bg-[var(--bg-card)] rounded-2xl p-5 shadow-[var(--shadow-md)] card-animated stagger-delay-4\">\n        <h3 className=\"text-xs font-semibold text-[var(--text-secondary)] mb-4 uppercase tracking-wider\">\n          {t('config_consumables')}\n        </h3>\n        <div className=\"space-y-3\">\n          {settings.consumables.map((item, idx) => {\n            const ItemIcon = ICON_MAP[item.icon] || Icons.Leaf;\n            const iconColor = getConsumableColor(item.key);\n            const iconBg = getConsumableBg(item.key);\n            return (\n              <div\n                key={item.key}\n                className=\"bg-input p-3 rounded-xl\"\n              >\n                <div className=\"flex items-center gap-3 mb-2\">\n                  <div\n                    className=\"p-2 rounded-lg\"\n                    style={{ backgroundColor: iconBg, color: iconColor }}\n                  >\n                    <ItemIcon className=\"w-4 h-4\" />\n                  </div>\n                  <input\n                    type=\"text\"\n                    value={item.label}\n                    onChange={(e) => updateConsumable(idx, 'label', e.target.value)}\n                    className=\"bg-transparent font-bold text-[var(--text-main)] border-b border-[var(--border-light)] w-full placeholder:text-[var(--text-muted)]\"\n                    placeholder={t('label_txt')}\n                    aria-label={`Nom pour ${item.key}`}\n                  />\n                </div>\n                <div className=\"flex gap-2\">\n                  <select\n                    value={item.icon}\n                    onChange={(e) => updateConsumable(idx, 'icon', e.target.value)}\n                    className=\"bg-[var(--bg-elevated)] text-xs text-[var(--text-main)] rounded-lg px-2 py-1.5\"\n                    aria-label={`Icône pour ${item.label}`}\n                  >\n                    {Object.keys(ICON_MAP).map((k) => (\n                      <option key={k} value={k}>\n                        {k}\n                      </option>\n                    ))}\n                  </select>\n                  <label className=\"flex items-center gap-2 text-xs text-[var(--text-secondary)] cursor-pointer ml-auto\">\n                    <input\n                      type=\"checkbox\"\n                      checked={item.active}\n                      onChange={(e) => updateConsumable(idx, 'active', e.target.checked)}\n                      className=\"accent-[var(--primary)] w-4 h-4\"\n                    />\n                    {t('visible_txt')}\n                  </label>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </GlowCard>\n\n      {/* Data management */}\n      <GlowCard className=\"bg-[var(--bg-card)] rounded-2xl p-5 shadow-[var(--shadow-md)] card-animated stagger-delay-5\">\n        <h3 className=\"text-xs font-semibold text-[var(--text-secondary)] mb-4 uppercase tracking-wider\">\n          {t('data_management')}\n        </h3>\n        <div className=\"space-y-3\">\n          <div className=\"bg-[var(--bg-main)]/30 p-4 rounded-xl\">\n            <h4 className=\"text-xs font-semibold text-[var(--text-secondary)] mb-3\">EXPORT</h4>\n            <div className=\"grid grid-cols-3 gap-2\">\n              <button\n                onClick={() => window.open('/api/export/json', '_blank')}\n                className=\"btn-interactive flex flex-col items-center gap-1 py-3 bg-[var(--bg-elevated)] hover:bg-[var(--bg-card-hover)] rounded-lg text-xs font-bold text-[var(--text-main)] transition-all\"\n              >\n                <Icons.Download className=\"w-4 h-4\" />\n                <span>JSON</span>\n              </button>\n              <button\n                onClick={() => window.open('/api/export/csv', '_blank')}\n                className=\"btn-interactive flex flex-col items-center gap-1 py-3 bg-[var(--bg-elevated)] hover:bg-[var(--bg-card-hover)] rounded-lg text-xs font-bold text-[var(--text-main)] transition-all\"\n              >\n                <Icons.Download className=\"w-4 h-4\" />\n                <span>CSV</span>\n              </button>\n              <button\n                onClick={() => window.open('/api/export/pdf', '_blank')}\n                className=\"btn-interactive flex flex-col items-center gap-1 py-3 bg-[var(--bg-elevated)] hover:bg-[var(--bg-card-hover)] rounded-lg text-xs font-bold text-[var(--text-main)] transition-all\"\n              >\n                <Icons.Download className=\"w-4 h-4\" />\n                <span>PDF</span>\n              </button>\n            </div>\n          </div>\n\n          <button\n            onClick={handleExport}\n            className=\"btn-interactive w-full flex items-center justify-center gap-2 py-3 bg-[var(--bg-elevated)] hover:bg-[var(--bg-card-hover)] rounded-xl font-bold text-[var(--text-main)] transition-all\"\n          >\n            <Icons.Download className=\"w-4 h-4\" />\n            {t('export_data')} (Local)\n          </button>\n\n          <div className=\"relative\">\n            <input\n              type=\"file\"\n              ref={fileInputRef}\n              onChange={handleImport}\n              accept=\".json\"\n              className=\"hidden\"\n              aria-label={t('import_data')}\n            />\n            <button\n              onClick={() => fileInputRef.current?.click()}\n              className=\"btn-interactive w-full flex items-center justify-center gap-2 py-3 bg-[var(--bg-elevated)] hover:bg-[var(--bg-card-hover)] rounded-xl font-bold text-[var(--text-main)] transition-all\"\n            >\n              <Icons.Upload className=\"w-4 h-4\" />\n              {t('import_data')}\n            </button>\n          </div>\n        </div>\n      </GlowCard>\n\n      {/* Admin panel - User Management */}\n      {isAdmin && (\n        <GlowCard className=\"bg-[var(--bg-card)] rounded-2xl p-5 shadow-[var(--shadow-md)] card-animated stagger-delay-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-xs font-semibold text-[var(--text-secondary)] uppercase tracking-wider flex items-center gap-2\">\n              <Icons.Shield className=\"w-4 h-4\" />\n              {t('user_management')}\n            </h3>\n            <button\n              onClick={() => setShowAddUser(!showAddUser)}\n              className=\"btn-interactive text-xs px-3 py-1.5 rounded-lg bg-[var(--primary)]/20 text-[var(--primary)] hover:bg-[var(--primary)]/30 font-semibold transition-all flex items-center gap-1\"\n            >\n              <Icons.Plus className=\"w-3 h-3\" />\n              {settings.lang === 'fr' ? 'Ajouter' : 'Add'}\n            </button>\n          </div>\n\n          {/* Add user form */}\n          {showAddUser && (\n            <div className=\"bg-[var(--bg-main)]/30 p-4 rounded-xl mb-4 space-y-3\">\n              <input\n                type=\"text\"\n                placeholder={settings.lang === 'fr' ? \"Nom d'utilisateur\" : 'Username'}\n                value={newUser.username}\n                onChange={(e) => setNewUser({ ...newUser, username: e.target.value })}\n                className=\"w-full px-3 py-2 bg-[var(--bg-elevated)] rounded-lg text-sm text-[var(--text-main)] border border-[var(--border)] focus:ring-2 focus:ring-[var(--primary)]/50 outline-none\"\n              />\n              <input\n                type=\"email\"\n                placeholder=\"Email\"\n                value={newUser.email}\n                onChange={(e) => setNewUser({ ...newUser, email: e.target.value })}\n                className=\"w-full px-3 py-2 bg-[var(--bg-elevated)] rounded-lg text-sm text-[var(--text-main)] border border-[var(--border)] focus:ring-2 focus:ring-[var(--primary)]/50 outline-none\"\n              />\n              <input\n                type=\"password\"\n                placeholder={settings.lang === 'fr' ? 'Mot de passe' : 'Password'}\n                value={newUser.password}\n                onChange={(e) => setNewUser({ ...newUser, password: e.target.value })}\n                className=\"w-full px-3 py-2 bg-[var(--bg-elevated)] rounded-lg text-sm text-[var(--text-main)] border border-[var(--border)] focus:ring-2 focus:ring-[var(--primary)]/50 outline-none\"\n              />\n              <label className=\"flex items-center gap-2 text-sm text-[var(--text-secondary)] cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  checked={newUser.is_admin}\n                  onChange={(e) => setNewUser({ ...newUser, is_admin: e.target.checked })}\n                  className=\"accent-[var(--primary)] w-4 h-4\"\n                />\n                Admin\n              </label>\n              <div className=\"flex gap-2\">\n                <button\n                  onClick={() => void handleCreateUser()}\n                  className=\"flex-1 py-2 bg-[var(--primary)] text-white rounded-lg text-sm font-bold hover:bg-[var(--primary-dark)] transition-all\"\n                >\n                  {settings.lang === 'fr' ? 'Créer' : 'Create'}\n                </button>\n                <button\n                  onClick={() => setShowAddUser(false)}\n                  className=\"px-4 py-2 bg-[var(--bg-elevated)] text-[var(--text-secondary)] rounded-lg text-sm font-bold hover:bg-[var(--bg-card-hover)] transition-all\"\n                >\n                  {settings.lang === 'fr' ? 'Annuler' : 'Cancel'}\n                </button>\n              </div>\n            </div>\n          )}\n\n          {/* Users list */}\n          {loadingUsers ? (\n            <div className=\"flex items-center justify-center py-8\">\n              <Icons.Loading className=\"w-6 h-6\" />\n            </div>\n          ) : (\n            <div className=\"space-y-2\">\n              {users.map((user) => (\n                <div\n                  key={user.id}\n                  className={`bg-[var(--bg-main)]/30 p-3 rounded-xl transition-all ${!user.is_active ? 'opacity-50' : ''}`}\n                >\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-3\">\n                      <div className={`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold text-white ${user.is_admin ? 'bg-[var(--primary)]' : 'bg-[var(--text-muted)]'}`}>\n                        {user.username.charAt(0).toUpperCase()}\n                      </div>\n                      <div>\n                        <div className=\"text-sm font-bold text-[var(--text-main)] flex items-center gap-2\">\n                          {user.username}\n                          {user.is_admin && (\n                            <span className=\"text-[10px] px-1.5 py-0.5 rounded bg-[var(--primary)]/20 text-[var(--primary)]\">\n                              Admin\n                            </span>\n                          )}\n                        </div>\n                        {user.email && (\n                          <div className=\"text-xs text-[var(--text-muted)]\">{user.email}</div>\n                        )}\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-1\">\n                      {/* Toggle active */}\n                      <button\n                        onClick={() => void handleToggleActive(user)}\n                        className={`p-1.5 rounded-lg transition-all ${user.is_active ? 'text-emerald-400 hover:bg-emerald-400/10' : 'text-[var(--text-muted)] hover:bg-[var(--bg-elevated)]'}`}\n                        title={user.is_active ? 'Désactiver' : 'Activer'}\n                      >\n                        {user.is_active ? (\n                          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                          </svg>\n                        ) : (\n                          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636\" />\n                          </svg>\n                        )}\n                      </button>\n                      {/* Toggle admin */}\n                      <button\n                        onClick={() => void handleToggleAdmin(user)}\n                        className={`p-1.5 rounded-lg transition-all ${user.is_admin ? 'text-[var(--primary)] hover:bg-[var(--primary)]/10' : 'text-[var(--text-muted)] hover:bg-[var(--bg-elevated)]'}`}\n                        title={user.is_admin ? 'Retirer admin' : 'Rendre admin'}\n                      >\n                        <Icons.Shield className=\"w-4 h-4\" />\n                      </button>\n                      {/* Reset password */}\n                      <button\n                        onClick={() => setResetPasswordId(resetPasswordId === user.id ? null : user.id)}\n                        className=\"p-1.5 rounded-lg text-[var(--text-muted)] hover:bg-[var(--bg-elevated)] hover:text-amber-400 transition-all\"\n                        title=\"Réinitialiser mot de passe\"\n                      >\n                        <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z\" />\n                        </svg>\n                      </button>\n                      {/* Delete */}\n                      <button\n                        onClick={() => void handleDeleteUser(user.id)}\n                        className=\"p-1.5 rounded-lg text-[var(--text-muted)] hover:bg-red-500/10 hover:text-red-400 transition-all\"\n                        title=\"Supprimer\"\n                      >\n                        <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                        </svg>\n                      </button>\n                    </div>\n                  </div>\n                  {/* Reset password form */}\n                  {resetPasswordId === user.id && (\n                    <div className=\"mt-3 pt-3 border-t border-[var(--border)] flex gap-2\">\n                      <input\n                        type=\"password\"\n                        placeholder={settings.lang === 'fr' ? 'Nouveau mot de passe' : 'New password'}\n                        value={newPassword}\n                        onChange={(e) => setNewPassword(e.target.value)}\n                        className=\"flex-1 px-3 py-2 bg-[var(--bg-elevated)] rounded-lg text-sm text-[var(--text-main)] border border-[var(--border)] focus:ring-2 focus:ring-[var(--primary)]/50 outline-none\"\n                      />\n                      <button\n                        onClick={() => void handleResetPassword(user.id)}\n                        className=\"px-4 py-2 bg-amber-500/20 text-amber-400 rounded-lg text-sm font-bold hover:bg-amber-500/30 transition-all\"\n                      >\n                        OK\n                      </button>\n                    </div>\n                  )}\n                </div>\n              ))}\n              {users.length === 0 && (\n                <div className=\"text-center py-4 text-[var(--text-muted)] text-sm\">\n                  {settings.lang === 'fr' ? 'Aucun utilisateur' : 'No users'}\n                </div>\n              )}\n            </div>\n          )}\n        </GlowCard>\n      )}\n\n      {/* Logout */}\n      <GlowCard className=\"bg-[var(--bg-card)] rounded-2xl p-5 shadow-[var(--shadow-md)] card-animated stagger-delay-6\">\n        <button\n          onClick={() => void handleLogout()}\n          className=\"btn-interactive w-full flex items-center justify-center gap-2 py-3 bg-rose-500/10 hover:bg-rose-500/20 rounded-xl font-bold text-rose-400 transition-all\"\n        >\n          <svg\n            className=\"w-5 h-5\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n            aria-hidden=\"true\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"2\"\n              d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"\n            />\n          </svg>\n          {settings.lang === 'fr' ? 'Déconnexion' : 'Logout'}\n        </button>\n      </GlowCard>\n    </div>\n  );\n});\n\nexport default SettingsTab;\n"],"names":["SettingsTab","memo","settings","updateSettings","updateConsumable","useSettingsStore","showToast","useUIStore","logout","isAdmin","useAuthStore","fileInputRef","useRef","users","setUsers","useState","loadingUsers","setLoadingUsers","showAddUser","setShowAddUser","newUser","setNewUser","resetPasswordId","setResetPasswordId","newPassword","setNewPassword","key","getTranslation","loadUsers","useCallback","result","api","err","useEffect","handleCreateUser","errorData","errorMsg","handleDeleteUser","userId","handleToggleAdmin","user","handleToggleActive","handleResetPassword","handleExport","handleImport","event","file","_a","reader","e","handleLogout","colorSchemes","jsxs","jsx","GlowCard","Icons","scheme","idx","item","ItemIcon","ICON_MAP","iconColor","getConsumableColor","iconBg","getConsumableBg","k"],"mappings":"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"}