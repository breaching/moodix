import{j as e,I as p,g as y,a as N,D as k,u as C,b as $,c as A,G as h,d as S,e as T}from"./index-nMGFLr7G.js";import{r as g}from"./vendor-F9Y4d3HK.js";import"./state-Ck21Aizr.js";const w=g.memo(function({label:s,icon:u,values:r,onChange:b,color:m,iconClass:n=""}){const[t,a]=g.useState(""),i=()=>{t&&!r.includes(t)&&(b([...r,t].sort()),a(""))},o=d=>{b(r.filter(c=>c!==d))},x=d=>{d.key==="Enter"&&(d.preventDefault(),i())},l=m.includes("sleep");return e.jsxs("div",{className:"relative overflow-hidden rounded-2xl h-full border border-[var(--border)]",role:"group","aria-label":s,children:[e.jsx("div",{className:`absolute inset-0 backdrop-blur-sm ${l?"bg-gradient-to-br from-[var(--icon-sleep)]/15 via-[var(--glass-bg)] to-[var(--glass-bg)]":"bg-gradient-to-br from-[var(--icon-wake)]/15 via-[var(--glass-bg)] to-[var(--glass-bg)]"}`}),e.jsxs("div",{className:"relative p-4 flex flex-col h-full rounded-2xl backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shadow-lg ${l?"bg-gradient-to-br from-[var(--icon-sleep)] to-[var(--icon-sleep)]/70 shadow-[var(--icon-sleep)]/30":"bg-gradient-to-br from-[var(--icon-wake)] to-[var(--icon-wake)]/70 shadow-[var(--icon-wake)]/30"}`,children:e.jsx("span",{className:`${n} text-white`,"aria-hidden":"true",children:e.jsx(u,{className:"w-5 h-5"})})}),e.jsxs("div",{children:[e.jsx("span",{className:`font-bold text-sm ${m}`,children:s}),e.jsx("div",{className:"text-[10px] text-[var(--text-muted)]",children:r.length===0?"Non défini":`${r.length} entrée${r.length>1?"s":""}`})]})]}),e.jsxs("div",{className:"flex-1 flex flex-wrap gap-2 content-start mb-3",role:"list",children:[r.length===0&&e.jsx("span",{className:"text-[var(--text-muted)] text-sm font-medium px-3 py-1.5 rounded-lg bg-[var(--bg-main)]/30",children:"--:--"}),r.map((d,c)=>e.jsxs("button",{onClick:()=>o(d),className:`group px-3 py-1.5 rounded-lg text-sm font-bold cursor-pointer transition-all duration-200 flex items-center gap-1.5 ${l?"bg-[var(--icon-sleep)]/15 text-[var(--icon-sleep)] hover:bg-red-500/20 hover:text-red-400":"bg-[var(--icon-wake)]/15 text-[var(--icon-wake)] hover:bg-red-500/20 hover:text-red-400"}`,"aria-label":`Supprimer ${d}`,role:"listitem",children:[d,e.jsx(p.X,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity"})]},c))]}),e.jsxs("div",{className:"flex gap-2 items-center bg-input rounded-xl p-2",children:[e.jsx("input",{type:"time",value:t,onChange:d=>a(d.target.value),onKeyDown:x,className:"bg-transparent text-sm font-bold text-[var(--text-main)] focus:outline-none flex-1 min-w-0 [&::-webkit-calendar-picker-indicator]:invert [&::-webkit-calendar-picker-indicator]:opacity-50","aria-label":`Ajouter une heure pour ${s}`}),e.jsx("button",{onClick:i,disabled:!t,className:`p-1.5 rounded-lg transition-all disabled:opacity-30 disabled:cursor-not-allowed ${l?"bg-[var(--icon-sleep)]/20 text-[var(--icon-sleep)] hover:bg-[var(--icon-sleep)]/30":"bg-[var(--icon-wake)]/20 text-[var(--icon-wake)] hover:bg-[var(--icon-wake)]/30"}`,"aria-label":"Ajouter",children:e.jsx(p.Plus,{className:"w-4 h-4"})})]})]})]})}),I=g.memo(function({label:s,icon:u,items:r,onAdd:b,onRemove:m,consumableKey:n,iconClass:t="consumable-icon"}){const[a,i]=g.useState(""),o=N(n),x=y(n),l=()=>{a&&(b(a),i(""))},d=c=>{c.key==="Enter"&&(c.preventDefault(),l())};return e.jsxs("div",{className:"relative overflow-hidden rounded-xl consumable-row border border-[var(--border)]",style:{background:"var(--bg-card)"},role:"group","aria-label":s,children:[e.jsx("div",{className:"absolute inset-0 opacity-30",style:{backgroundColor:x}}),e.jsxs("div",{className:"relative p-3 rounded-xl backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2.5 flex-shrink-0",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:x},children:e.jsx("span",{className:t,style:{color:o},"aria-hidden":"true",children:e.jsx(u,{className:"w-4 h-4"})})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-bold",style:{color:o},children:s}),e.jsx("div",{className:"text-[10px] text-[var(--text-muted)]",children:r.length===0?"Non défini":`${r.length} entrée${r.length>1?"s":""}`})]})]}),e.jsxs("div",{className:"flex gap-1.5 items-center bg-input rounded-lg p-1.5",children:[e.jsx("input",{type:"time",value:a,onChange:c=>i(c.target.value),onKeyDown:d,className:"bg-transparent w-[4.5rem] text-xs font-medium text-[var(--text-main)] [&::-webkit-calendar-picker-indicator]:invert [&::-webkit-calendar-picker-indicator]:opacity-50","aria-label":`Ajouter une heure pour ${s}`}),e.jsx("button",{onClick:l,disabled:!a,className:"p-1 rounded-md transition-all disabled:opacity-30 disabled:cursor-not-allowed hover:opacity-80",style:{backgroundColor:x,color:o},"aria-label":"Ajouter",children:e.jsx(p.Plus,{className:"w-3.5 h-3.5"})})]})]}),r.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5 mt-2.5 pt-2.5",role:"list",children:r.map((c,f)=>{const j=typeof c=="object"&&"time"in c?c.time:"";return e.jsxs("button",{onClick:()=>m(f),className:"group px-2 py-1 rounded-md text-[11px] font-bold cursor-pointer consumable-tag flex items-center gap-1 hover:bg-red-500/20 hover:text-red-400 transition-all",style:{backgroundColor:x,color:o},"aria-label":`Supprimer ${j}`,role:"listitem",children:[j,e.jsx(p.X,{className:"w-2.5 h-2.5 opacity-0 group-hover:opacity-100 transition-opacity"})]},f)})})]})]})}),D=g.memo(function({sleepHours:s,onChange:u,title:r}){const b=n=>{const t=[...s];t[n]=!t[n],u(t)},m=s.filter(Boolean).length;return e.jsxs("div",{className:"relative",role:"group","aria-label":r,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--primary)]/5 to-transparent pointer-events-none rounded-2xl","aria-hidden":"true"}),e.jsxs("div",{className:"flex justify-between items-end mb-4 relative z-10",children:[e.jsxs("h3",{className:"text-xs font-semibold text-[var(--text-secondary)] uppercase flex items-center gap-2",children:[e.jsx(p.Clock,{className:"w-4 h-4"}),r]}),e.jsxs("span",{className:"text-xs text-[var(--primary)] font-bold px-2 py-0.5 rounded-md bg-[var(--primary)]/10","aria-live":"polite",children:[m,"h"]})]}),e.jsx("div",{className:"overflow-x-auto -mx-4 px-4 no-scrollbar relative z-10",children:e.jsx("div",{className:"flex min-w-max pt-2 pb-2",role:"list",children:k.map((n,t)=>{const a=s[t],i=t>0&&s[t-1],o=t<23&&s[t+1],x=a&&(i||o);let l="rounded-lg";return a&&(i&&o?l="rounded-none":i?l="rounded-r-lg rounded-l-none":o&&(l="rounded-l-lg rounded-r-none")),e.jsxs("div",{className:"flex flex-col items-center group w-9",role:"listitem",children:[e.jsxs("button",{onClick:()=>b(t),className:`timeline-slot h-16 w-full transition-all duration-200 relative ripple-container ${a?`timeline-slot-active ${l} ${x?"timeline-slot-connected":""}`:"bg-input hover:bg-[var(--bg-elevated)]"}`,"aria-pressed":a,"aria-label":`${n}: ${a?"Sommeil":"Éveillé"}`,children:[a&&!i&&e.jsx("span",{className:"absolute -left-1 top-1/2 -translate-y-1/2 w-1 h-8 bg-[var(--primary)] rounded-full opacity-50 blur-sm","aria-hidden":"true"}),a&&!o&&e.jsx("span",{className:"absolute -right-1 top-1/2 -translate-y-1/2 w-1 h-8 bg-[var(--primary)] rounded-full opacity-50 blur-sm","aria-hidden":"true"})]}),e.jsx("span",{className:`text-[9px] mt-2 font-medium transition-colors ${a?"text-[var(--primary)] font-bold":"text-[var(--text-muted)] group-hover:text-[var(--text-main)]"}`,"aria-hidden":"true",children:n})]},t)})})})]})}),P=g.memo(function(){const{currentEntry:s,updateEntry:u,addConsumable:r,removeConsumable:b}=C(),{settings:m}=$(),n=a=>A(m.lang,a),t=g.useMemo(()=>m.consumables.filter(a=>a.active),[m.consumables]);return s?e.jsxs("div",{className:"space-y-5",children:[e.jsxs(h,{className:"bg-[var(--bg-card)] rounded-2xl p-5 shadow-[var(--shadow-md)] transition-all duration-300 card-animated stagger-delay-1",children:[e.jsxs("h3",{className:"text-xs font-semibold text-[var(--text-secondary)] mb-4 uppercase tracking-wider flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-[var(--primary)]","aria-hidden":"true"}),n("cycles_title")]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(w,{label:n("bedtime"),icon:p.Moon,values:s.bedtime,onChange:a=>u("bedtime",a),color:"icon-sleep",iconClass:"sleep-icon-moon"}),e.jsx(w,{label:n("wakeup"),icon:p.Sun,values:s.wakeup,onChange:a=>u("wakeup",a),color:"icon-wake",iconClass:"sleep-icon-sun"})]})]}),e.jsxs(h,{className:"bg-[var(--bg-card)] rounded-2xl p-5 shadow-[var(--shadow-md)] transition-all duration-300 card-animated stagger-delay-2",children:[e.jsx("h3",{className:"text-xs font-semibold text-[var(--text-secondary)] mb-4 uppercase tracking-wider",children:n("consumption_title")}),e.jsx("div",{className:"space-y-2",children:t.map((a,i)=>{const o=S[a.icon]||p.Leaf,x=s[a.key]||[];return e.jsx("div",{className:`card-animated stagger-delay-${i+3}`,children:e.jsx(I,{label:a.label,icon:o,iconClass:T[a.icon]||"consumable-icon",items:x,onAdd:l=>r(a.key,l),onRemove:l=>b(a.key,l),consumableKey:a.key})},a.key)})})]}),e.jsx(h,{className:"bg-[var(--bg-card)] rounded-2xl p-4 shadow-[var(--shadow-md)] overflow-hidden card-animated stagger-delay-4",children:e.jsx(D,{sleepHours:s.sleepHours,onChange:a=>u("sleepHours",a),title:n("timeline_title")})})]}):e.jsxs("div",{className:"text-center py-12 text-[var(--text-muted)]",children:[e.jsx(p.Loading,{className:"w-8 h-8 mx-auto mb-2"}),n("loading")]})});export{P as default};
//# sourceMappingURL=SleepTab-BKELj5Ue.js.map
