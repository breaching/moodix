import{u as C,b as A,j as e,c as M,I as u,G as f,f as S,A as _,C as g}from"./index-nMGFLr7G.js";import{r as x}from"./vendor-F9Y4d3HK.js";import"./state-Ck21Aizr.js";function E(o){return o<=3?"from-rose-500 to-rose-400":o<=6?"from-amber-500 to-amber-400":"from-emerald-500 to-emerald-400"}function v({value:o,label:r}){return e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-[10px] text-[var(--text-muted)] w-3",children:r}),e.jsx("div",{className:"w-12 h-1.5 bg-[var(--bg-main)] rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full bg-gradient-to-r ${E(o)} transition-all duration-300`,style:{width:`${o*10}%`}})})]})}const P=x.memo(function(){const{currentEntry:r,updateEntry:p,addActivity:j,updateActivity:m,removeActivity:N}=C(),{settings:w}=A(),i=t=>M(w.lang,t),[y,b]=x.useState(null),h=x.useRef(0);x.useEffect(()=>{if(!r)return;const t=r.activityLog.flatMap(a=>a.activities),l=t.length;if(l>h.current&&t.length>0){const a=t.reduce((c,d)=>d.id>c.id?d:c,t[0]);b(a.id)}h.current=l},[r]);const $=t=>{b(l=>l===t?null:t)};if(!r)return e.jsxs("div",{className:"text-center py-12 text-[var(--text-muted)]",children:[e.jsx(u.Loading,{className:"w-8 h-8 mx-auto mb-2"}),i("loading")]});const s=parseInt(String(r.generalMood)||"0",10);return e.jsxs("div",{className:"space-y-5",children:[e.jsxs(f,{className:"bg-[var(--bg-card)] rounded-2xl p-5 shadow-[var(--shadow-md)] card-animated stagger-delay-1 relative overflow-hidden",children:[e.jsx("div",{className:`absolute -top-20 -right-20 w-40 h-40 rounded-full blur-3xl transition-all duration-700 ${r.generalMood?s<=3?"bg-rose-500/15":s<=6?"bg-amber-400/15":"bg-emerald-400/15":"bg-[var(--text-muted)]/5"}`,"aria-hidden":"true"}),e.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[e.jsx("div",{className:`mood-indicator w-16 h-16 rounded-2xl flex items-center justify-center text-2xl font-bold text-white shadow-lg cursor-pointer ${S(r.generalMood)}`,"aria-label":`Humeur: ${s}/10`,children:e.jsx(_,{value:r.generalMood||"?",className:"text-2xl"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-semibold text-[var(--text-main)]",children:i("mood_title")}),e.jsxs("span",{className:`text-xs font-bold px-2 py-0.5 rounded-md transition-all duration-300 ${r.generalMood?s<=3?"bg-rose-500/15 text-rose-400":s<=6?"bg-amber-400/15 text-amber-400":"bg-emerald-400/15 text-emerald-400":"bg-[var(--text-muted)]/10 text-[var(--text-muted)]"}`,children:[r.generalMood||0,"/10"]})]}),e.jsxs("div",{className:"relative h-2.5 bg-[var(--bg-main)] rounded-full overflow-hidden",children:[e.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full transition-all duration-500 ease-out ${r.generalMood?s<=3?"bg-gradient-to-r from-rose-600 to-rose-400":s<=6?"bg-gradient-to-r from-amber-500 to-amber-300":"bg-gradient-to-r from-emerald-500 to-emerald-300":"bg-[var(--text-muted)]/20"}`,style:{width:`${(s||0)*10}%`}}),e.jsx("input",{type:"range",min:"0",max:"10",value:s||0,onChange:t=>p("generalMood",t.target.value),className:"absolute inset-0 w-full opacity-0 cursor-pointer","aria-label":`${i("mood_title")}: ${s} sur 10`,"aria-valuemin":0,"aria-valuemax":10,"aria-valuenow":s}),e.jsx("div",{className:`absolute top-1/2 -translate-y-1/2 w-4 h-4 rounded-full shadow-md transition-all duration-300 pointer-events-none ${r.generalMood?s<=3?"bg-rose-400":s<=6?"bg-amber-400":"bg-emerald-400":"bg-[var(--text-muted)]"}`,style:{left:`calc(${(s||0)*10}% - 8px)`},"aria-hidden":"true"})]})]})]}),e.jsx("div",{className:"mt-4 pt-4 relative z-10",children:e.jsx("textarea",{placeholder:i("daily_note_placeholder"),value:r.dailyNote||"",onChange:t=>p("dailyNote",t.target.value),className:"w-full bg-input text-sm text-[var(--text-main)] rounded-xl px-4 py-3 resize-none transition-all duration-200 placeholder:text-[var(--text-muted)]",rows:2,"aria-label":i("daily_note")})})]}),r.activityLog.map((t,l)=>e.jsxs(f,{className:`bg-[var(--bg-card)] rounded-2xl p-4 shadow-[var(--shadow-md)] card-animated stagger-delay-${Math.min(l+2,12)}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-3 pb-3",children:[e.jsx("span",{className:"text-xs font-bold bg-[var(--bg-elevated)] text-[var(--text-secondary)] px-3 py-1.5 rounded-lg",children:t.slot}),e.jsx("button",{onClick:()=>j(l),className:"btn-interactive text-xs text-[var(--primary)] hover:bg-[var(--primary)]/10 px-3 py-1.5 rounded-lg font-semibold transition-all","aria-label":`${i("add_btn")} pour ${t.slot}`,children:i("add_btn")})]}),t.activities.length===0&&e.jsx("div",{className:"text-center py-4 text-[var(--text-muted)] text-sm",children:"Aucune activité"}),t.activities.map((a,c)=>{const d=y===a.id;return e.jsxs("div",{className:`bg-[var(--bg-main)]/30 rounded-xl relative mb-3 last:mb-0 overflow-hidden animate-pop-in stagger-delay-${c+1}`,children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 cursor-pointer hover:bg-[var(--bg-main)]/20 transition-colors",onClick:()=>$(a.id),children:[e.jsx("div",{className:"flex-1 min-w-0",children:d?e.jsx("input",{type:"text",placeholder:i("activity_placeholder"),value:a.name,onChange:n=>m(l,a.id,"name",n.target.value),onClick:n=>n.stopPropagation(),className:"bg-input rounded-lg px-3 py-2 text-sm font-bold text-[var(--text-main)] w-full transition-colors placeholder:text-[var(--text-muted)]","aria-label":"Nom de l'activité"}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm font-bold text-[var(--text-main)] truncate",children:a.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{value:a.plaisir,label:"P"}),e.jsx(v,{value:a.maitrise,label:"M"}),e.jsx(v,{value:a.satisfaction,label:"S"})]})]})}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsx("div",{className:`transition-transform duration-200 ${d?"rotate-180":""}`,children:e.jsx(u.ChevronDown,{className:"w-4 h-4 text-[var(--text-muted)]"})}),e.jsx("button",{onClick:n=>{n.stopPropagation(),N(l,a.id)},className:"w-7 h-7 flex items-center justify-center rounded-lg text-[var(--text-muted)] hover:text-rose-400 hover:bg-rose-400/10 transition-all","aria-label":`Supprimer l'activité ${a.name||"sans nom"}`,children:e.jsx(u.X,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:`grid transition-all duration-300 ease-in-out ${d?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:e.jsx("div",{className:"overflow-hidden",children:e.jsxs("div",{className:"px-3 pb-3 pt-1 space-y-3",children:[e.jsx(g,{label:i("pleasure"),value:a.plaisir,onChange:n=>m(l,a.id,"plaisir",n)}),e.jsx(g,{label:i("mastery"),value:a.maitrise,onChange:n=>m(l,a.id,"maitrise",n)}),e.jsx(g,{label:i("satisfaction"),value:a.satisfaction,onChange:n=>m(l,a.id,"satisfaction",n)})]})})})]},a.id)})]},t.slot))]})});export{P as default};
//# sourceMappingURL=ActivitiesTab-DzTOj4-v.js.map
