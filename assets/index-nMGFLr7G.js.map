{"version":3,"mappings":"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","names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","createRoot","trackedConnections","getTrackedConnectionState","name","api","key","api2","extractConnectionInformation","store","extensionConnector","options","existingConnection","newConnection","devtoolsImpl","fn","devtoolsOptions","set","get","enabled","anonymousActionType","__vite_import_meta_env__","connection","connectionInformation","isRecording","state","replace","nameOrAction","r","action","setStateFromDevtools","originalIsRecording","initialState","store2","didWarnAboutReservedActionType","originalDispatch","message","_a","parseJsonThen","stateFromDevtools","nextLiftedState","lastComputedState","devtools","stringified","parsed","createJSONStorage","getStorage","storage","parse","str2","str","newValue","toThenable","input","result","onFulfilled","_onRejected","_onFulfilled","onRejected","oldImpl","config","baseOptions","persistedState","currentState","hasHydrated","hydrationListeners","finishHydrationListeners","args","thenableSerialize","setItem","errorInSync","thenable","serializedValue","savedSetState","configResult","stateFromStorage","hydrate","cb","postRehydrationCallback","storageValue","deserializedStorageValue","migratedState","_a2","newOptions","newImpl","_b","migrationResult","migrated","persistImpl","persist","TIME_SLOTS","DISPLAY_HOURS","DEFAULT_SETTINGS","ICON_ANIM_MAP","getScoreColor","val","getScoreBg","getMoodBgClass","mood","formatDate","date","locale","dateObj","localeStr","getDayName","isTimeInColumn","timeStr","colIndex","generateId","safeParseJSON","json","fallback","getConsumableColor","getConsumableBg","QUEUE_KEY","offlineQueue","entry","queue","index","processed","i","_isOnline","_lastSaveTime","_saveRetryAttempts","MAX_RETRIES","RETRY_DELAY","res","username","password","data","attempt","localData","resolve","local","newSettings","email","isAdmin","userId","updates","newPassword","useAuthStore","create","useSettingsStore","remote","mergedConsumables","defaultItem","idx","remoteItem","value","updated","partial","field","consumables","consumable","createEmptyEntry","lang","slot","useJournalStore","transformed","apiEntry","activityLog","ts","finalActivityLog","selectedDate","currentEntry","useUIStore","entries","delta","cleanedEntry","slotIndex","newLog","activityId","newCycle","id","cycleId","item","cycle","itemId","subField","updatedItems","time","current","_","tab","msg","type","printSelectedDates","dates","printConfig","blurred","Icons","className","jsx","jsxs","ICON_MAP","GlowCard","memo","children","cardRef","useRef","borderRef","handleMouseMove","useCallback","rect","x","y","handleMouseLeave","AnimatedNumber","displayValue","setDisplayValue","useState","isAnimating","setIsAnimating","useEffect","timeout","useRipple","event","button","size","ripple","TABS","useTabTransition","activeTab","prevTabRef","prevIndex","direction","NavBtn","label","Icon","active","onClick","createRipple","handleClick","ColorSlider","onChange","handleChange","Toast","toast","getToastStyles","getIcon","translations","getTranslation","PrintModal","settings","isPrintModalOpen","closePrintModal","togglePrintDate","setPrintSelectedDates","togglePrintConfig","t","handlePrint","handleBackdropClick","isSelected","hasSleep","hasActivities","s","hasCycles","_c","length","z","copy","out","add","subtract","multiply","divide","scale","distance","squaredDistance","squaredLength","negate","inverse","normalize","len","dot","cross","ax","ay","az","bx","by","bz","lerp","smoothLerp","decay","dt","exp","transformMat4","w","scaleRotateMat4","transformMat3","transformQuat","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","angle","tempA","tempB","cosine","exactEquals","Vec3","v","Vec3Func.set","Vec3Func.copy","va","vb","Vec3Func.add","Vec3Func.subtract","Vec3Func.multiply","Vec3Func.scale","Vec3Func.divide","Vec3Func.inverse","Vec3Func.length","Vec3Func.distance","Vec3Func.squaredLength","Vec3Func.squaredDistance","Vec3Func.negate","Vec3Func.cross","Vec3Func.normalize","Vec3Func.dot","Vec3Func.exactEquals","mat3","Vec3Func.transformMat3","mat4","Vec3Func.transformMat4","Vec3Func.scaleRotateMat4","Vec3Func.transformQuat","Vec3Func.angle","Vec3Func.lerp","Vec3Func.smoothLerp","o","tempVec3","ID","ATTR_ID","isBoundsWarned","Geometry","gl","attributes","attr","isNewBuffer","start","count","program","location","numLoc","stride","offset","mode","indexBytesPerElement","array","min","max","center","maxRadiusSq","arrayCacheF32","Program","vertex","fragment","uniforms","transparent","cullFace","frontFace","depthTest","depthWrite","depthFunc","addLineNumbers","numUniforms","uIndex","uniform","split","locations","numAttribs","aIndex","attribute","src","dst","srcAlpha","dstAlpha","modeRGB","modeAlpha","func","ref","mask","stencilFail","depthFail","depthPass","flipFaces","textureUnit","activeUniform","component","warn","setUniform","textureUnits","flatten","setValue","arraysEqual","setArray","string","lines","arrayLen","valueLen","warnCount","Renderer","canvas","width","height","dpr","alpha","depth","stencil","antialias","premultipliedAlpha","preserveDrawingBuffer","powerPreference","autoClear","webgl","target","buffer","extension","webgl2Func","extFunc","scene","camera","frustumCull","sort","renderList","node","opaque","ui","update","clear","identity","setAxisAngle","axis","rad","aw","bw","rotateX","rotateY","rotateZ","slerp","omega","cosom","sinom","scale0","scale1","invert","a0","a1","a2","a3","invDot","conjugate","fromMat3","fTrace","fRoot","j","fromEuler","euler","order","sx","cx","sy","cy","sz","cz","vec4.copy","vec4.set","vec4.dot","vec4.normalize","Quat","triggerProps","property","success","QuatFunc.identity","QuatFunc.set","QuatFunc.rotateX","QuatFunc.rotateY","QuatFunc.rotateZ","QuatFunc.invert","QuatFunc.conjugate","QuatFunc.copy","QuatFunc.normalize","qA","qB","QuatFunc.multiply","QuatFunc.dot","matrix3","QuatFunc.fromMat3","isInternal","QuatFunc.fromEuler","QuatFunc.setAxisAngle","QuatFunc.slerp","EPSILON","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","determinant","b0","b1","b2","b3","translate","rotate","b12","b20","b21","b22","mat","getScaling","getMaxScaleOnAxis","getRotation","temp","scaling","is1","is2","is3","sm11","sm12","sm13","sm21","sm22","sm23","sm31","sm32","sm33","trace","S","decompose","srcMat","dstRotation","dstTranslation","dstScale","vec3.length","_m1","invSX","invSY","invSZ","compose","dstMat","srcRotation","srcTranslation","srcScale","te","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","fromQuat","yx","zx","zy","perspective","fovy","aspect","near","far","nf","ortho","left","right","bottom","top","lr","bt","targetTo","eye","up","eyex","eyey","eyez","upx","upy","upz","z0","z1","x0","x1","multiplyScalar","Mat4","Mat4Func.set","Mat4Func.translate","Mat4Func.rotate","Mat4Func.scale","ma","mb","Mat4Func.add","Mat4Func.subtract","Mat4Func.multiply","Mat4Func.multiplyScalar","Mat4Func.identity","Mat4Func.copy","fov","Mat4Func.perspective","Mat4Func.ortho","Mat4Func.fromQuat","Mat4Func.invert","pos","Mat4Func.compose","Mat4Func.decompose","Mat4Func.getRotation","Mat4Func.getTranslation","Mat4Func.getScaling","Mat4Func.getMaxScaleOnAxis","Mat4Func.targetTo","Mat4Func.determinant","fromRotationMatrix","tmpMat4","Euler","EulerFunc.fromRotationMatrix","Transform","parent","notifyParent","child","notifyChild","force","callback","fromMat4","normalFromMat4","Mat3","Mat3Func.set","Mat3Func.translate","Mat3Func.rotate","Mat3Func.scale","Mat3Func.multiply","Mat3Func.identity","Mat3Func.copy","Mat3Func.fromMat4","Mat3Func.fromQuat","vec3a","vec3b","vec3c","Mat3Func.invert","Mat3Func.normalFromMat4","Mesh","geometry","frustumCulled","renderOrder","Triangle","plasmaColors","hexToRgb","hex","isWebGLSupported","PlasmaBackground","containerRef","containerEl","initialColor","customColorRgb","isMobile","renderer","mesh","previousColorScheme","newColorScheme","color","rgb","colorUniform","mousePos","mouseUniform","setSize","frameInterval","lastFrameTime","t0","isRendering","handleVisibilityChange","loop","elapsed","timeValue","LoginForm","onLoginSuccess","setUsername","setPassword","error","setError","loading","setLoading","isExiting","setIsExiting","login","handleSubmit","Fragment","PrintView","_d","dayName","isAsleep","bedtimes","wakeups","isBedtime","isWakeup","caffeineCount","exCount","medCount","cannabisCount","logData","log","act","th","SleepTab","lazy","__vitePreload","ActivitiesTab","CyclesTab","StatsTab","SettingsTab","TabLoading","App","isAuthenticated","checkAuth","showLoginForm","setShowLoginForm","appVisible","setAppVisible","loadSettings","loadEntries","changeDate","setSelectedDate","saveCurrentEntry","saveStatus","setActiveTab","openPrintModal","saveTimeoutRef","tabTransitionClass","root","savedEntry","handleLoginSuccess","Suspense","container"],"ignoreList":[0,1,2,3,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34],"sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../node_modules/zustand/esm/middleware.mjs","../../src/utils/constants.ts","../../src/utils/helpers.ts","../../src/api/index.ts","../../src/stores/useAppStore.ts","../../src/components/ui/Icons.tsx","../../src/components/ui/GlowCard.tsx","../../src/components/ui/AnimatedNumber.tsx","../../src/hooks/useRipple.ts","../../src/hooks/useTabTransition.ts","../../src/components/ui/NavBtn.tsx","../../src/components/ui/ColorSlider.tsx","../../src/components/ui/Toast.tsx","../../src/utils/translations.ts","../../src/components/ui/PrintModal.tsx","../../node_modules/ogl/src/math/functions/Vec3Func.js","../../node_modules/ogl/src/math/Vec3.js","../../node_modules/ogl/src/core/Geometry.js","../../node_modules/ogl/src/core/Program.js","../../node_modules/ogl/src/core/Renderer.js","../../node_modules/ogl/src/math/functions/Vec4Func.js","../../node_modules/ogl/src/math/functions/QuatFunc.js","../../node_modules/ogl/src/math/Quat.js","../../node_modules/ogl/src/math/functions/Mat4Func.js","../../node_modules/ogl/src/math/Mat4.js","../../node_modules/ogl/src/math/functions/EulerFunc.js","../../node_modules/ogl/src/math/Euler.js","../../node_modules/ogl/src/core/Transform.js","../../node_modules/ogl/src/math/functions/Mat3Func.js","../../node_modules/ogl/src/math/Mat3.js","../../node_modules/ogl/src/core/Mesh.js","../../node_modules/ogl/src/extras/Triangle.js","../../src/components/ui/PlasmaBackground.tsx","../../src/components/auth/LoginForm.tsx","../../src/components/print/PrintView.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","const reduxImpl = (reducer, initial) => (set, _get, api) => {\n  api.dispatch = (action) => {\n    set((state) => reducer(state, action), false, action);\n    return action;\n  };\n  api.dispatchFromDevtools = true;\n  return { dispatch: (...a) => api.dispatch(...a), ...initial };\n};\nconst redux = reduxImpl;\n\nconst trackedConnections = /* @__PURE__ */ new Map();\nconst getTrackedConnectionState = (name) => {\n  const api = trackedConnections.get(name);\n  if (!api) return {};\n  return Object.fromEntries(\n    Object.entries(api.stores).map(([key, api2]) => [key, api2.getState()])\n  );\n};\nconst extractConnectionInformation = (store, extensionConnector, options) => {\n  if (store === void 0) {\n    return {\n      type: \"untracked\",\n      connection: extensionConnector.connect(options)\n    };\n  }\n  const existingConnection = trackedConnections.get(options.name);\n  if (existingConnection) {\n    return { type: \"tracked\", store, ...existingConnection };\n  }\n  const newConnection = {\n    connection: extensionConnector.connect(options),\n    stores: {}\n  };\n  trackedConnections.set(options.name, newConnection);\n  return { type: \"tracked\", store, ...newConnection };\n};\nconst devtoolsImpl = (fn, devtoolsOptions = {}) => (set, get, api) => {\n  const { enabled, anonymousActionType, store, ...options } = devtoolsOptions;\n  let extensionConnector;\n  try {\n    extensionConnector = (enabled != null ? enabled : (import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") && window.__REDUX_DEVTOOLS_EXTENSION__;\n  } catch (_e) {\n  }\n  if (!extensionConnector) {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && enabled) {\n      console.warn(\n        \"[zustand devtools middleware] Please install/enable Redux devtools extension\"\n      );\n    }\n    return fn(set, get, api);\n  }\n  const { connection, ...connectionInformation } = extractConnectionInformation(store, extensionConnector, options);\n  let isRecording = true;\n  api.setState = (state, replace, nameOrAction) => {\n    const r = set(state, replace);\n    if (!isRecording) return r;\n    const action = nameOrAction === void 0 ? { type: anonymousActionType || \"anonymous\" } : typeof nameOrAction === \"string\" ? { type: nameOrAction } : nameOrAction;\n    if (store === void 0) {\n      connection == null ? void 0 : connection.send(action, get());\n      return r;\n    }\n    connection == null ? void 0 : connection.send(\n      {\n        ...action,\n        type: `${store}/${action.type}`\n      },\n      {\n        ...getTrackedConnectionState(options.name),\n        [store]: api.getState()\n      }\n    );\n    return r;\n  };\n  const setStateFromDevtools = (...a) => {\n    const originalIsRecording = isRecording;\n    isRecording = false;\n    set(...a);\n    isRecording = originalIsRecording;\n  };\n  const initialState = fn(api.setState, get, api);\n  if (connectionInformation.type === \"untracked\") {\n    connection == null ? void 0 : connection.init(initialState);\n  } else {\n    connectionInformation.stores[connectionInformation.store] = api;\n    connection == null ? void 0 : connection.init(\n      Object.fromEntries(\n        Object.entries(connectionInformation.stores).map(([key, store2]) => [\n          key,\n          key === connectionInformation.store ? initialState : store2.getState()\n        ])\n      )\n    );\n  }\n  if (api.dispatchFromDevtools && typeof api.dispatch === \"function\") {\n    let didWarnAboutReservedActionType = false;\n    const originalDispatch = api.dispatch;\n    api.dispatch = (...a) => {\n      if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && a[0].type === \"__setState\" && !didWarnAboutReservedActionType) {\n        console.warn(\n          '[zustand devtools middleware] \"__setState\" action type is reserved to set state from the devtools. Avoid using it.'\n        );\n        didWarnAboutReservedActionType = true;\n      }\n      originalDispatch(...a);\n    };\n  }\n  connection.subscribe((message) => {\n    var _a;\n    switch (message.type) {\n      case \"ACTION\":\n        if (typeof message.payload !== \"string\") {\n          console.error(\n            \"[zustand devtools middleware] Unsupported action format\"\n          );\n          return;\n        }\n        return parseJsonThen(\n          message.payload,\n          (action) => {\n            if (action.type === \"__setState\") {\n              if (store === void 0) {\n                setStateFromDevtools(action.state);\n                return;\n              }\n              if (Object.keys(action.state).length !== 1) {\n                console.error(\n                  `\n                    [zustand devtools middleware] Unsupported __setState action format. \n                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { \"type\": \"__setState\", \"state\": { \"abc123Store\": { \"foo\": \"bar\" } } }\n                    `\n                );\n              }\n              const stateFromDevtools = action.state[store];\n              if (stateFromDevtools === void 0 || stateFromDevtools === null) {\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(stateFromDevtools)) {\n                setStateFromDevtools(stateFromDevtools);\n              }\n              return;\n            }\n            if (!api.dispatchFromDevtools) return;\n            if (typeof api.dispatch !== \"function\") return;\n            api.dispatch(action);\n          }\n        );\n      case \"DISPATCH\":\n        switch (message.payload.type) {\n          case \"RESET\":\n            setStateFromDevtools(initialState);\n            if (store === void 0) {\n              return connection == null ? void 0 : connection.init(api.getState());\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"COMMIT\":\n            if (store === void 0) {\n              connection == null ? void 0 : connection.init(api.getState());\n              return;\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"ROLLBACK\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                connection == null ? void 0 : connection.init(api.getState());\n                return;\n              }\n              setStateFromDevtools(state[store]);\n              connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n            });\n          case \"JUMP_TO_STATE\":\n          case \"JUMP_TO_ACTION\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(state[store])) {\n                setStateFromDevtools(state[store]);\n              }\n            });\n          case \"IMPORT_STATE\": {\n            const { nextLiftedState } = message.payload;\n            const lastComputedState = (_a = nextLiftedState.computedStates.slice(-1)[0]) == null ? void 0 : _a.state;\n            if (!lastComputedState) return;\n            if (store === void 0) {\n              setStateFromDevtools(lastComputedState);\n            } else {\n              setStateFromDevtools(lastComputedState[store]);\n            }\n            connection == null ? void 0 : connection.send(\n              null,\n              // FIXME no-any\n              nextLiftedState\n            );\n            return;\n          }\n          case \"PAUSE_RECORDING\":\n            return isRecording = !isRecording;\n        }\n        return;\n    }\n  });\n  return initialState;\n};\nconst devtools = devtoolsImpl;\nconst parseJsonThen = (stringified, f) => {\n  let parsed;\n  try {\n    parsed = JSON.parse(stringified);\n  } catch (e) {\n    console.error(\n      \"[zustand devtools middleware] Could not parse the received json\",\n      e\n    );\n  }\n  if (parsed !== void 0) f(parsed);\n};\n\nconst subscribeWithSelectorImpl = (fn) => (set, get, api) => {\n  const origSubscribe = api.subscribe;\n  api.subscribe = (selector, optListener, options) => {\n    let listener = selector;\n    if (optListener) {\n      const equalityFn = (options == null ? void 0 : options.equalityFn) || Object.is;\n      let currentSlice = selector(api.getState());\n      listener = (state) => {\n        const nextSlice = selector(state);\n        if (!equalityFn(currentSlice, nextSlice)) {\n          const previousSlice = currentSlice;\n          optListener(currentSlice = nextSlice, previousSlice);\n        }\n      };\n      if (options == null ? void 0 : options.fireImmediately) {\n        optListener(currentSlice, currentSlice);\n      }\n    }\n    return origSubscribe(listener);\n  };\n  const initialState = fn(set, get, api);\n  return initialState;\n};\nconst subscribeWithSelector = subscribeWithSelectorImpl;\n\nconst combine = (initialState, create) => (...a) => Object.assign({}, initialState, create(...a));\n\nfunction createJSONStorage(getStorage, options) {\n  let storage;\n  try {\n    storage = getStorage();\n  } catch (_e) {\n    return;\n  }\n  const persistStorage = {\n    getItem: (name) => {\n      var _a;\n      const parse = (str2) => {\n        if (str2 === null) {\n          return null;\n        }\n        return JSON.parse(str2, options == null ? void 0 : options.reviver);\n      };\n      const str = (_a = storage.getItem(name)) != null ? _a : null;\n      if (str instanceof Promise) {\n        return str.then(parse);\n      }\n      return parse(str);\n    },\n    setItem: (name, newValue) => storage.setItem(\n      name,\n      JSON.stringify(newValue, options == null ? void 0 : options.replacer)\n    ),\n    removeItem: (name) => storage.removeItem(name)\n  };\n  return persistStorage;\n}\nconst toThenable = (fn) => (input) => {\n  try {\n    const result = fn(input);\n    if (result instanceof Promise) {\n      return result;\n    }\n    return {\n      then(onFulfilled) {\n        return toThenable(onFulfilled)(result);\n      },\n      catch(_onRejected) {\n        return this;\n      }\n    };\n  } catch (e) {\n    return {\n      then(_onFulfilled) {\n        return this;\n      },\n      catch(onRejected) {\n        return toThenable(onRejected)(e);\n      }\n    };\n  }\n};\nconst oldImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    getStorage: () => localStorage,\n    serialize: JSON.stringify,\n    deserialize: JSON.parse,\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage;\n  try {\n    storage = options.getStorage();\n  } catch (_e) {\n  }\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const thenableSerialize = toThenable(options.serialize);\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    let errorInSync;\n    const thenable = thenableSerialize({ state, version: options.version }).then(\n      (serializedValue) => storage.setItem(options.name, serializedValue)\n    ).catch((e) => {\n      errorInSync = e;\n    });\n    if (errorInSync) {\n      throw errorInSync;\n    }\n    return thenable;\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    void setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      void setItem();\n    },\n    get,\n    api\n  );\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => cb(get()));\n    const postRehydrationCallback = ((_a = options.onRehydrateStorage) == null ? void 0 : _a.call(options, get())) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((storageValue) => {\n      if (storageValue) {\n        return options.deserialize(storageValue);\n      }\n    }).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            return options.migrate(\n              deserializedStorageValue.state,\n              deserializedStorageValue.version\n            );\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return deserializedStorageValue.state;\n        }\n      }\n    }).then((migratedState) => {\n      var _a2;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      return setItem();\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.getStorage) {\n        storage = newOptions.getStorage();\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  hydrate();\n  return stateFromStorage || configResult;\n};\nconst newImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    storage: createJSONStorage(() => localStorage),\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage = options.storage;\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    return storage.setItem(options.name, {\n      state,\n      version: options.version\n    });\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    void setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      void setItem();\n    },\n    get,\n    api\n  );\n  api.getInitialState = () => configResult;\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a, _b;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => {\n      var _a2;\n      return cb((_a2 = get()) != null ? _a2 : configResult);\n    });\n    const postRehydrationCallback = ((_b = options.onRehydrateStorage) == null ? void 0 : _b.call(options, (_a = get()) != null ? _a : configResult)) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            return [\n              true,\n              options.migrate(\n                deserializedStorageValue.state,\n                deserializedStorageValue.version\n              )\n            ];\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return [false, deserializedStorageValue.state];\n        }\n      }\n      return [false, void 0];\n    }).then((migrationResult) => {\n      var _a2;\n      const [migrated, migratedState] = migrationResult;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      if (migrated) {\n        return setItem();\n      }\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      stateFromStorage = get();\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.storage) {\n        storage = newOptions.storage;\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  if (!options.skipHydration) {\n    hydrate();\n  }\n  return stateFromStorage || configResult;\n};\nconst persistImpl = (config, baseOptions) => {\n  if (\"getStorage\" in baseOptions || \"serialize\" in baseOptions || \"deserialize\" in baseOptions) {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      console.warn(\n        \"[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead.\"\n      );\n    }\n    return oldImpl(config, baseOptions);\n  }\n  return newImpl(config, baseOptions);\n};\nconst persist = persistImpl;\n\nexport { combine, createJSONStorage, devtools, persist, redux, subscribeWithSelector };\n","import type { Settings } from '@/types';\n\n// Time slots for activity tracking (6h-2h next day)\nexport const TIME_SLOTS = [\n  '6h-7h',\n  '7h-8h',\n  '8h-9h',\n  '9h-10h',\n  '10h-11h',\n  '11h-12h',\n  '12h-13h',\n  '13h-14h',\n  '14h-15h',\n  '15h-16h',\n  '16h-17h',\n  '17h-18h',\n  '18h-19h',\n  '19h-20h',\n  '20h-21h',\n  '21h-22h',\n  '22h-23h',\n  '23h-24h',\n  '24h-1h',\n  '1h-2h',\n] as const;\n\n// 24-hour display for timeline (18h to 17h next day)\nexport const DISPLAY_HOURS = [\n  '18h',\n  '19h',\n  '20h',\n  '21h',\n  '22h',\n  '23h',\n  '00h',\n  '01h',\n  '02h',\n  '03h',\n  '04h',\n  '05h',\n  '06h',\n  '07h',\n  '08h',\n  '09h',\n  '10h',\n  '11h',\n  '12h',\n  '13h',\n  '14h',\n  '15h',\n  '16h',\n  '17h',\n] as const;\n\n// Default application settings\nexport const DEFAULT_SETTINGS: Settings = {\n  lang: typeof navigator !== 'undefined' && navigator.language.startsWith('fr') ? 'fr' : 'en',\n  theme: 'dark',\n  colorScheme: 'violet',\n  notificationsEnabled: false,\n  notificationTime: '20:00',\n  consumables: [\n    {\n      key: 'exercise',\n      label: 'Exercice',\n      icon: 'Dumbbell',\n      active: true,\n      color: 'icon-exercise',\n      bg: 'icon-bg-exercise',\n      border: '',\n    },\n    {\n      key: 'caffeine',\n      label: 'Cafine',\n      icon: 'Coffee',\n      active: true,\n      color: 'icon-caffeine',\n      bg: 'icon-bg-caffeine',\n      border: '',\n    },\n    {\n      key: 'cannabis',\n      label: 'Cannabis',\n      icon: 'Leaf',\n      active: true,\n      color: 'icon-cannabis',\n      bg: 'icon-bg-cannabis',\n      border: '',\n    },\n    {\n      key: 'medication',\n      label: 'Mdicament',\n      icon: 'Pill',\n      active: true,\n      color: 'icon-medication',\n      bg: 'icon-bg-medication',\n      border: '',\n    },\n    {\n      key: 'custom',\n      label: 'Perso',\n      icon: 'Beer',\n      active: false,\n      color: 'icon-custom',\n      bg: 'icon-bg-custom',\n      border: '',\n    },\n  ],\n};\n\n// Icon animation classes mapping\nexport const ICON_ANIM_MAP: Record<string, string> = {\n  Coffee: 'consumable-icon-coffee',\n  Leaf: 'consumable-icon-leaf',\n  Beer: 'consumable-icon-wine',\n  Pill: 'consumable-icon-pill',\n  Dumbbell: 'consumable-icon',\n  Cigarette: 'consumable-icon',\n  Skull: 'consumable-icon',\n};\n","/**\n * Utility helper functions for Moodix\n */\n\n/**\n * Get score color class based on value (0-10)\n */\nexport const getScoreColor = (val: number): string => {\n  if (val <= 3) return 'text-rose-500';\n  if (val <= 6) return 'text-amber-400';\n  return 'text-emerald-400';\n};\n\n/**\n * Get score background class based on value (0-10)\n */\nexport const getScoreBg = (val: number): string => {\n  if (val <= 3) return 'bg-rose-500';\n  if (val <= 6) return 'bg-amber-500';\n  return 'bg-emerald-500';\n};\n\n/**\n * Get mood color class\n */\nexport const getMoodColor = (mood: number | string | undefined): string => {\n  const val = typeof mood === 'string' ? parseInt(mood, 10) : mood;\n  if (!val) return 'text-[var(--text-muted)]';\n  if (val <= 3) return 'text-rose-400';\n  if (val <= 6) return 'text-amber-400';\n  return 'text-emerald-400';\n};\n\n/**\n * Get mood background class\n */\nexport const getMoodBgClass = (mood: number | string | undefined): string => {\n  const val = typeof mood === 'string' ? parseInt(mood, 10) : mood;\n  if (!val) return 'bg-[var(--text-muted)]/30';\n  if (val <= 3) return 'mood-low';\n  if (val <= 6) return 'mood-medium';\n  return 'mood-high';\n};\n\n/**\n * Format date to locale string\n */\nexport const formatDate = (\n  date: string | Date,\n  locale: 'fr' | 'en' = 'fr',\n  options?: Intl.DateTimeFormatOptions\n): string => {\n  const dateObj = typeof date === 'string' ? new Date(date) : date;\n  const localeStr = locale === 'fr' ? 'fr-FR' : 'en-US';\n  return dateObj.toLocaleDateString(localeStr, options);\n};\n\n/**\n * Get day name from date\n */\nexport const getDayName = (date: string | Date, locale: 'fr' | 'en' = 'fr'): string => {\n  return formatDate(date, locale, { weekday: 'long' });\n};\n\n/**\n * Check if time string falls within hour column index\n */\nexport const isTimeInColumn = (timeStr: string | undefined, colIndex: number): boolean => {\n  if (!timeStr) return false;\n  const hour = parseInt(timeStr.split(':')[0], 10);\n  return hour === (colIndex + 18) % 24;\n};\n\n/**\n * Generate unique ID\n */\nexport const generateId = (): number => {\n  return Date.now() + Math.floor(Math.random() * 1000);\n};\n\n/**\n * Debounce function\n */\nexport const debounce = <T extends (...args: Parameters<T>) => ReturnType<T>>(\n  func: T,\n  wait: number\n): ((...args: Parameters<T>) => void) => {\n  let timeout: ReturnType<typeof setTimeout> | null = null;\n\n  return (...args: Parameters<T>) => {\n    if (timeout) clearTimeout(timeout);\n    timeout = setTimeout(() => func(...args), wait);\n  };\n};\n\n/**\n * Clamp value between min and max\n */\nexport const clamp = (value: number, min: number, max: number): number => {\n  return Math.min(Math.max(value, min), max);\n};\n\n/**\n * Deep clone object\n */\nexport const deepClone = <T>(obj: T): T => {\n  return JSON.parse(JSON.stringify(obj)) as T;\n};\n\n/**\n * Check if two objects are deeply equal\n */\nexport const deepEqual = <T>(a: T, b: T): boolean => {\n  return JSON.stringify(a) === JSON.stringify(b);\n};\n\n/**\n * Safe parse JSON with fallback\n */\nexport const safeParseJSON = <T>(json: string, fallback: T): T => {\n  try {\n    return JSON.parse(json) as T;\n  } catch {\n    return fallback;\n  }\n};\n\n/**\n * Get consumable color CSS variable value from consumable key\n */\nexport const getConsumableColor = (key: string): string => {\n  const colorMap: Record<string, string> = {\n    exercise: 'var(--icon-exercise)',\n    caffeine: 'var(--icon-caffeine)',\n    cannabis: 'var(--icon-cannabis)',\n    medication: 'var(--icon-medication)',\n    custom: 'var(--icon-custom)',\n  };\n  return colorMap[key] || 'var(--text-main)';\n};\n\n/**\n * Get consumable background CSS value from consumable key\n */\nexport const getConsumableBg = (key: string): string => {\n  const bgMap: Record<string, string> = {\n    exercise: 'color-mix(in srgb, var(--icon-exercise) 20%, transparent)',\n    caffeine: 'color-mix(in srgb, var(--icon-caffeine) 20%, transparent)',\n    cannabis: 'color-mix(in srgb, var(--icon-cannabis) 20%, transparent)',\n    medication: 'color-mix(in srgb, var(--icon-medication) 20%, transparent)',\n    custom: 'color-mix(in srgb, var(--icon-custom) 20%, transparent)',\n  };\n  return bgMap[key] || 'transparent';\n};\n\n/**\n * Get consumable color CSS class name from consumable key\n */\nexport const getConsumableColorClass = (key: string): string => {\n  const classMap: Record<string, string> = {\n    exercise: 'icon-exercise',\n    caffeine: 'icon-caffeine',\n    cannabis: 'icon-cannabis',\n    medication: 'icon-medication',\n    custom: 'icon-custom',\n  };\n  return classMap[key] || '';\n};\n","/**\n * API module for Moodix - handles all server communication\n */\n\nimport type { JournalEntry, Settings, User, SaveResult, ApiStatus, Entries } from '@/types';\nimport { safeParseJSON } from '@/utils/helpers';\n\n// --- Offline Queue Manager ---\nconst QUEUE_KEY = 'offline_save_queue';\n\ninterface QueueItem {\n  entry: JournalEntry;\n  timestamp: number;\n}\n\nexport const offlineQueue = {\n  getQueue: (): QueueItem[] => {\n    try {\n      return safeParseJSON(localStorage.getItem(QUEUE_KEY) || '[]', []);\n    } catch {\n      return [];\n    }\n  },\n\n  addToQueue: (entry: JournalEntry): void => {\n    const queue = offlineQueue.getQueue();\n    queue.push({ entry, timestamp: Date.now() });\n    localStorage.setItem(QUEUE_KEY, JSON.stringify(queue));\n  },\n\n  removeFromQueue: (index: number): void => {\n    const queue = offlineQueue.getQueue();\n    queue.splice(index, 1);\n    localStorage.setItem(QUEUE_KEY, JSON.stringify(queue));\n  },\n\n  clearQueue: (): void => {\n    localStorage.removeItem(QUEUE_KEY);\n  },\n\n  processQueue: async (): Promise<number> => {\n    const queue = offlineQueue.getQueue();\n    let processed = 0;\n\n    for (let i = queue.length - 1; i >= 0; i--) {\n      try {\n        const { entry } = queue[i];\n        const success = await api._saveToServer(entry);\n        if (success) {\n          offlineQueue.removeFromQueue(i);\n          processed++;\n        }\n      } catch (e) {\n        console.error('Queue processing error:', e);\n      }\n    }\n\n    return processed;\n  },\n};\n\n// --- API State ---\nlet _isOnline = typeof navigator !== 'undefined' ? navigator.onLine : true;\nlet _lastSaveTime: string | null = null;\nlet _saveRetryAttempts = 0;\nconst MAX_RETRIES = 3;\nconst RETRY_DELAY = 1000;\n\n// --- API Methods ---\nexport const api = {\n  _isOnline,\n  _lastSaveTime,\n  _saveRetryAttempts,\n  MAX_RETRIES,\n  RETRY_DELAY,\n\n  checkAuth: async (): Promise<{ authenticated: boolean; is_admin?: boolean; user_id?: number }> => {\n    try {\n      const res = await fetch('/api/check-auth', { credentials: 'include' });\n      if (!res.ok) return { authenticated: false };\n      return (await res.json()) as { authenticated: boolean; is_admin?: boolean; user_id?: number };\n    } catch {\n      return { authenticated: false };\n    }\n  },\n\n  login: async (username: string, password: string): Promise<boolean> => {\n    try {\n      const res = await fetch('/api/login', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({ username, password }),\n      });\n      return res.ok;\n    } catch {\n      return false;\n    }\n  },\n\n  logout: async (): Promise<boolean> => {\n    try {\n      await fetch('/api/logout', {\n        method: 'POST',\n        credentials: 'include',\n      });\n      return true;\n    } catch {\n      return false;\n    }\n  },\n\n  load: async (): Promise<Entries | null> => {\n    try {\n      const res = await fetch('/api/entries', { credentials: 'include' });\n      if (res.status === 401) return null;\n      if (!res.ok) throw new Error('Server error');\n      const data = (await res.json()) as Entries;\n\n      // Save to localStorage as backup\n      localStorage.setItem('journal_data', JSON.stringify(data));\n      return data;\n    } catch {\n      console.warn('Loading from localStorage due to server error');\n      return safeParseJSON(localStorage.getItem('journal_data') || '{}', {});\n    }\n  },\n\n  _saveToServer: async (entry: JournalEntry): Promise<boolean> => {\n    const res = await fetch('/api/save', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      credentials: 'include',\n      body: JSON.stringify(entry),\n    });\n    return res.ok;\n  },\n\n  save: async (entry: JournalEntry, attempt = 0): Promise<SaveResult> => {\n    // Always save to localStorage first for instant persistence\n    try {\n      const localData = safeParseJSON<Entries>(localStorage.getItem('journal_data') || '{}', {});\n      localData[entry.date] = entry;\n      localStorage.setItem('journal_data', JSON.stringify(localData));\n    } catch (e) {\n      console.error('LocalStorage save failed:', e);\n    }\n\n    // Try to save to server\n    try {\n      const success = await api._saveToServer(entry);\n\n      if (success) {\n        _lastSaveTime = new Date().toLocaleTimeString();\n        _saveRetryAttempts = 0;\n\n        // Process offline queue if any\n        setTimeout(() => void offlineQueue.processQueue(), 100);\n\n        return { success: true, mode: 'online' };\n      } else {\n        throw new Error('Server returned error');\n      }\n    } catch {\n      // Retry with exponential backoff\n      if (attempt < MAX_RETRIES) {\n        await new Promise((resolve) => setTimeout(resolve, RETRY_DELAY * Math.pow(2, attempt)));\n        return api.save(entry, attempt + 1);\n      }\n\n      // Add to offline queue after all retries failed\n      offlineQueue.addToQueue(entry);\n      _saveRetryAttempts = attempt;\n\n      return { success: true, mode: 'offline', queued: true };\n    }\n  },\n\n  loadSettings: async (): Promise<Settings | null> => {\n    try {\n      const res = await fetch('/api/settings', { credentials: 'include' });\n      if (res.ok) {\n        const data = (await res.json()) as Settings;\n        if (Object.keys(data).length > 0) {\n          localStorage.setItem('journal_settings', JSON.stringify(data));\n        }\n        return data;\n      }\n    } catch (e) {\n      console.error('Settings load error:', e);\n    }\n    const local = localStorage.getItem('journal_settings');\n    return local ? safeParseJSON<Settings>(local, null as unknown as Settings) : null;\n  },\n\n  saveSettings: async (newSettings: Settings): Promise<void> => {\n    localStorage.setItem('journal_settings', JSON.stringify(newSettings));\n\n    try {\n      await fetch('/api/settings', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify(newSettings),\n      });\n    } catch (e) {\n      console.error('Settings save error:', e);\n    }\n  },\n\n  getStatus: (): ApiStatus => ({\n    online: _isOnline,\n    lastSave: _lastSaveTime,\n    queueLength: offlineQueue.getQueue().length,\n    retryAttempts: _saveRetryAttempts,\n  }),\n\n  // Admin API methods\n  admin: {\n    listUsers: async (): Promise<{ users: User[] } | null> => {\n      try {\n        const res = await fetch('/api/admin/users', {\n          credentials: 'include',\n        });\n        if (!res.ok) return null;\n        return (await res.json()) as { users: User[] };\n      } catch (e) {\n        console.error('List users error:', e);\n        return null;\n      }\n    },\n\n    createUser: async (\n      username: string,\n      password: string,\n      email: string,\n      isAdmin: boolean\n    ): Promise<{ ok: boolean; data: unknown }> => {\n      try {\n        const res = await fetch('/api/admin/users', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          credentials: 'include',\n          body: JSON.stringify({ username, password, email, is_admin: isAdmin }),\n        });\n        return { ok: res.ok, data: res.ok ? await res.json() : await res.text() };\n      } catch (e) {\n        console.error('Create user error:', e);\n        return { ok: false, data: (e as Error).message };\n      }\n    },\n\n    updateUser: async (\n      userId: number,\n      updates: Partial<User>\n    ): Promise<{ ok: boolean; data: unknown }> => {\n      try {\n        const res = await fetch(`/api/admin/users/${userId}`, {\n          method: 'PUT',\n          headers: { 'Content-Type': 'application/json' },\n          credentials: 'include',\n          body: JSON.stringify(updates),\n        });\n        return { ok: res.ok, data: res.ok ? await res.json() : await res.text() };\n      } catch (e) {\n        console.error('Update user error:', e);\n        return { ok: false, data: (e as Error).message };\n      }\n    },\n\n    deleteUser: async (userId: number): Promise<{ ok: boolean; data: unknown }> => {\n      try {\n        const res = await fetch(`/api/admin/users/${userId}`, {\n          method: 'DELETE',\n          credentials: 'include',\n        });\n        return { ok: res.ok, data: res.ok ? await res.json() : await res.text() };\n      } catch (e) {\n        console.error('Delete user error:', e);\n        return { ok: false, data: (e as Error).message };\n      }\n    },\n\n    resetPassword: async (\n      userId: number,\n      newPassword: string\n    ): Promise<{ ok: boolean; data: unknown }> => {\n      try {\n        const res = await fetch(`/api/admin/users/${userId}/reset-password`, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          credentials: 'include',\n          body: JSON.stringify({ password: newPassword }),\n        });\n        return { ok: res.ok, data: res.ok ? await res.json() : await res.text() };\n      } catch (e) {\n        console.error('Reset password error:', e);\n        return { ok: false, data: (e as Error).message };\n      }\n    },\n  },\n};\n\n// Monitor online/offline status\nif (typeof window !== 'undefined') {\n  window.addEventListener('online', () => {\n    _isOnline = true;\n    void offlineQueue.processQueue();\n  });\n\n  window.addEventListener('offline', () => {\n    _isOnline = false;\n  });\n}\n\nexport default api;\n","import { create } from 'zustand';\nimport { devtools, persist } from 'zustand/middleware';\nimport type {\n  Settings,\n  JournalEntry,\n  Entries,\n  TabName,\n  Toast,\n  ToastType,\n  SaveStatus,\n  PrintConfig,\n  ActivitySlot,\n  ViciousCycle,\n  ConsumableEntry,\n} from '@/types';\nimport { DEFAULT_SETTINGS, TIME_SLOTS } from '@/utils/constants';\nimport { api, offlineQueue } from '@/api';\nimport { generateId, getDayName } from '@/utils/helpers';\n\n// --- Auth Store ---\ninterface AuthState {\n  isAuthenticated: boolean | null;\n  isAdmin: boolean;\n  currentUserId: number | null;\n  checkAuth: () => Promise<void>;\n  login: (username: string, password: string) => Promise<boolean>;\n  logout: () => Promise<void>;\n}\n\nexport const useAuthStore = create<AuthState>()(\n  devtools(\n    (set) => ({\n      isAuthenticated: true, // Bypass login for GH Pages demo\n      isAdmin: true, // Grant admin rights for the demo to show all UI elements\n      currentUserId: 1, // Use a mock user ID for the demo\n\n      checkAuth: async () => {\n        // Do nothing in demo mode\n        set({ isAuthenticated: true, isAdmin: true, currentUserId: 1 });\n        return Promise.resolve();\n      },\n\n      login: async (username: string, password: string) => {\n        // Do nothing in demo mode\n        console.log('Login attempt in demo mode:', username, password);\n        return Promise.resolve(true);\n      },\n\n      logout: async () => {\n        // Do nothing in demo mode\n        set({ isAuthenticated: true, isAdmin: true, currentUserId: 1 });\n      },\n    }),\n    { name: 'auth-store' }\n  )\n);\n\n// --- Settings Store ---\ninterface SettingsState {\n  settings: Settings;\n  loadSettings: () => Promise<void>;\n  updateSetting: <K extends keyof Settings>(key: K, value: Settings[K]) => void;\n  updateSettings: (partial: Partial<Settings>) => void;\n  updateConsumable: (index: number, field: string, value: unknown) => void;\n}\n\nexport const useSettingsStore = create<SettingsState>()(\n  devtools(\n    persist(\n      (set, get) => ({\n        settings: DEFAULT_SETTINGS,\n\n        loadSettings: async () => {\n          const remote = await api.loadSettings();\n          if (remote && Object.keys(remote).length > 0) {\n            // Merge consumables with defaults to ensure color/bg are present\n            const mergedConsumables = DEFAULT_SETTINGS.consumables.map((defaultItem, idx) => {\n              const remoteItem = remote.consumables?.[idx];\n              if (remoteItem) {\n                return {\n                  ...defaultItem,\n                  ...remoteItem,\n                  // Always use default colors if not present\n                  color: remoteItem.color || defaultItem.color,\n                  bg: remoteItem.bg || defaultItem.bg,\n                };\n              }\n              return defaultItem;\n            });\n            set({ settings: { ...get().settings, ...remote, consumables: mergedConsumables } });\n          }\n        },\n\n        updateSetting: (key, value) => {\n          const updated = { ...get().settings, [key]: value };\n          set({ settings: updated });\n          void api.saveSettings(updated);\n        },\n\n        updateSettings: (partial) => {\n          const updated = { ...get().settings, ...partial };\n          set({ settings: updated });\n          void api.saveSettings(updated);\n        },\n\n        updateConsumable: (index, field, value) => {\n          const consumables = [...get().settings.consumables];\n          const consumable = consumables[index];\n          if (consumable && field in consumable) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unsafe-member-access\n            (consumable as any)[field] = value;\n          }\n          get().updateSettings({ consumables });\n        },\n      }),\n      {\n        name: 'settings-storage',\n        partialize: (state) => ({ settings: state.settings }),\n      }\n    ),\n    { name: 'settings-store' }\n  )\n);\n\n// --- Journal Store ---\ninterface JournalState {\n  entries: Entries;\n  selectedDate: string;\n  currentEntry: JournalEntry | null;\n  saveStatus: SaveStatus;\n\n  // Actions\n  loadEntries: () => Promise<void>;\n  clearEntries: () => void;\n  setSelectedDate: (date: string) => void;\n  changeDate: (delta: number) => void;\n  updateEntry: <K extends keyof JournalEntry>(field: K, value: JournalEntry[K]) => void;\n  saveCurrentEntry: () => Promise<void>;\n\n  // Activity actions\n  addActivity: (slotIndex: number) => void;\n  updateActivity: (slotIndex: number, activityId: number, field: string, value: unknown) => void;\n  removeActivity: (slotIndex: number, activityId: number) => void;\n\n  // Cycle actions\n  addCycle: () => void;\n  updateCycle: (id: number, field: string, value: unknown) => void;\n  removeCycle: (id: number) => void;\n  addSubItem: (\n    cycleId: number,\n    field: 'emotions' | 'thoughts' | 'behaviors' | 'consequences',\n    item: Record<string, unknown>\n  ) => void;\n  updateSubItem: (\n    cycleId: number,\n    field: 'emotions' | 'thoughts' | 'behaviors' | 'consequences',\n    itemId: number,\n    subField: string,\n    value: unknown\n  ) => void;\n  removeSubItem: (\n    cycleId: number,\n    field: 'emotions' | 'thoughts' | 'behaviors' | 'consequences',\n    itemId: number\n  ) => void;\n\n  // Consumable actions\n  addConsumable: (key: string, time: string) => void;\n  removeConsumable: (key: string, index: number) => void;\n}\n\nconst createEmptyEntry = (date: string, lang: 'fr' | 'en' = 'fr'): JournalEntry => ({\n  date,\n  day: getDayName(date, lang),\n  bedtime: [],\n  wakeup: [],\n  sleepHours: Array(24).fill(false) as boolean[],\n  exercise: [],\n  caffeine: [],\n  cannabis: [],\n  medication: [],\n  custom: [],\n  activityLog: TIME_SLOTS.map((slot) => ({ slot, activities: [] })),\n  viciousCycles: [],\n  generalMood: '',\n  dailyNote: '',\n  thoughts: '',\n});\n\nexport const useJournalStore = create<JournalState>()(\n  devtools(\n    (set, get) => ({\n      entries: {},\n      selectedDate: new Date().toISOString().split('T')[0],\n      currentEntry: null,\n      saveStatus: 'idle',\n\n      loadEntries: async () => {\n        const data = await api.load();\n        if (!data) {\n          set({ entries: {} });\n          return;\n        }\n\n        // Transform API data to local format\n        const transformed: Entries = {};\n        const lang = useSettingsStore.getState().settings.lang;\n\n        Object.keys(data).forEach((date) => {\n          const apiEntry = data[date];\n\n          // Handle both activityLog and legacy timeSlots format\n          let activityLog: ActivitySlot[] = [];\n\n          if (apiEntry.activityLog && Array.isArray(apiEntry.activityLog) && apiEntry.activityLog.length > 0) {\n            // New format: activityLog with slot property\n            activityLog = apiEntry.activityLog.map(\n              (slot: { slot?: string; time?: string; activities?: unknown[] }) => ({\n                slot: slot.slot || slot.time || '0:00',\n                activities: slot.activities || [],\n              }) as ActivitySlot\n            );\n          } else if ((apiEntry as unknown as { timeSlots?: unknown[] }).timeSlots) {\n            // Legacy format: timeSlots with time property\n            const timeSlots = (apiEntry as unknown as { timeSlots: { time?: string; slot?: string; activities?: unknown[] }[] }).timeSlots;\n            activityLog = timeSlots.map(\n              (ts) => ({\n                slot: ts.time || ts.slot || '0:00',\n                activities: ts.activities || [],\n              }) as ActivitySlot\n            );\n          }\n\n          const finalActivityLog =\n            activityLog.length > 0\n              ? activityLog\n              : TIME_SLOTS.map((slot) => ({ slot, activities: [] }));\n\n          transformed[date] = {\n            ...apiEntry,\n            day: getDayName(date, lang),\n            bedtime: Array.isArray(apiEntry.bedtime)\n              ? apiEntry.bedtime\n              : apiEntry.bedtime\n                ? [apiEntry.bedtime]\n                : [],\n            wakeup: Array.isArray(apiEntry.wakeup)\n              ? apiEntry.wakeup\n              : apiEntry.wakeup\n                ? [apiEntry.wakeup]\n                : [],\n            sleepHours: apiEntry.sleepHours || Array(24).fill(false),\n            caffeine: apiEntry.caffeine || [],\n            exercise: apiEntry.exercise || [],\n            medication: apiEntry.medication || [],\n            cannabis: apiEntry.cannabis || [],\n            custom: apiEntry.custom || [],\n            activityLog: finalActivityLog,\n            viciousCycles: apiEntry.viciousCycles || [],\n            generalMood: apiEntry.generalMood || '',\n            dailyNote: apiEntry.dailyNote || '',\n            thoughts: apiEntry.thoughts || '',\n          };\n        });\n\n        set({ entries: transformed });\n\n        // Load current entry for selected date\n        const selectedDate = get().selectedDate;\n        const currentEntry =\n          transformed[selectedDate] ||\n          createEmptyEntry(selectedDate, useSettingsStore.getState().settings.lang);\n        set({ currentEntry });\n\n        // Process offline queue\n        setTimeout(async () => {\n          const processed = await offlineQueue.processQueue();\n          if (processed > 0) {\n            useUIStore.getState().showToast(`${processed} entre(s) synchronise(s)`, 'success');\n            await get().loadEntries();\n          }\n        }, 1000);\n      },\n\n      clearEntries: () => {\n        set({ entries: {}, currentEntry: null });\n      },\n\n      setSelectedDate: (date: string) => {\n        const { entries } = get();\n        const lang = useSettingsStore.getState().settings.lang;\n        const entry = entries[date] || createEmptyEntry(date, lang);\n        set({ selectedDate: date, currentEntry: entry });\n      },\n\n      changeDate: (delta: number) => {\n        const { selectedDate } = get();\n        const d = new Date(selectedDate);\n        d.setDate(d.getDate() + delta);\n        get().setSelectedDate(d.toISOString().split('T')[0]);\n      },\n\n      updateEntry: (field, value) => {\n        const { currentEntry } = get();\n        if (!currentEntry) return;\n        set({ currentEntry: { ...currentEntry, [field]: value } });\n      },\n\n      saveCurrentEntry: async () => {\n        const { currentEntry, entries } = get();\n        if (!currentEntry) return;\n\n        set({ saveStatus: 'saving' });\n\n        // Filter out activities without a name before saving\n        const cleanedEntry = {\n          ...currentEntry,\n          activityLog: currentEntry.activityLog.map(slot => ({\n            ...slot,\n            activities: slot.activities.filter(a => a.name.trim() !== ''),\n          })),\n        };\n\n        const result = await api.save(cleanedEntry);\n\n        if (result.success) {\n          // Don't update currentEntry - keep empty activities in UI while user is editing\n          // Only update entries cache with cleaned version for persistence\n          set({\n            entries: { ...entries, [cleanedEntry.date]: cleanedEntry },\n            saveStatus: result.mode === 'offline' ? 'offline' : 'saved',\n          });\n\n          // Only show toast for offline mode, otherwise the status dot is enough\n          if (result.mode === 'offline' || result.queued) {\n            useUIStore.getState().showToast('Sauvegard localement (hors ligne)', 'warning');\n          }\n\n          setTimeout(() => set({ saveStatus: 'idle' }), 2000);\n        } else {\n          set({ saveStatus: 'error' });\n          useUIStore.getState().showToast('Erreur sauvegarde', 'error');\n        }\n      },\n\n      // Activity actions\n      addActivity: (slotIndex: number) => {\n        const { currentEntry } = get();\n        if (!currentEntry) return;\n\n        const newLog = [...currentEntry.activityLog];\n        newLog[slotIndex] = {\n          ...newLog[slotIndex],\n          activities: [\n            ...newLog[slotIndex].activities,\n            { id: generateId(), name: '', plaisir: 5, maitrise: 5, satisfaction: 5 },\n          ],\n        };\n        get().updateEntry('activityLog', newLog);\n      },\n\n      updateActivity: (slotIndex, activityId, field, value) => {\n        const { currentEntry } = get();\n        if (!currentEntry) return;\n\n        const newLog = currentEntry.activityLog.map((slot, i) => {\n          if (i !== slotIndex) return slot;\n          return {\n            ...slot,\n            activities: slot.activities.map((a) =>\n              a.id === activityId ? { ...a, [field]: value } : a\n            ),\n          };\n        });\n        get().updateEntry('activityLog', newLog);\n      },\n\n      removeActivity: (slotIndex, activityId) => {\n        const { currentEntry } = get();\n        if (!currentEntry) return;\n\n        const newLog = [...currentEntry.activityLog];\n        newLog[slotIndex] = {\n          ...newLog[slotIndex],\n          activities: newLog[slotIndex].activities.filter((a) => a.id !== activityId),\n        };\n        get().updateEntry('activityLog', newLog);\n      },\n\n      // Cycle actions\n      addCycle: () => {\n        const { currentEntry } = get();\n        if (!currentEntry) return;\n\n        const newCycle: ViciousCycle = {\n          id: generateId(),\n          situation: '',\n          emotions: [],\n          thoughts: [],\n          behaviors: [],\n          consequences: [],\n        };\n        get().updateEntry('viciousCycles', [...(currentEntry.viciousCycles || []), newCycle]);\n      },\n\n      updateCycle: (id, field, value) => {\n        const { currentEntry } = get();\n        if (!currentEntry) return;\n\n        const updated = currentEntry.viciousCycles.map((c) =>\n          c.id === id ? { ...c, [field]: value } : c\n        );\n        get().updateEntry('viciousCycles', updated);\n      },\n\n      removeCycle: (id) => {\n        const { currentEntry } = get();\n        if (!currentEntry) return;\n\n        get().updateEntry(\n          'viciousCycles',\n          currentEntry.viciousCycles.filter((c) => c.id !== id)\n        );\n      },\n\n      addSubItem: (cycleId, field, item) => {\n        const { currentEntry } = get();\n        if (!currentEntry) return;\n\n        const cycle = currentEntry.viciousCycles.find((c) => c.id === cycleId);\n        if (!cycle) return;\n\n        get().updateCycle(cycleId, field, [...(cycle[field] || []), { ...item, id: generateId() }]);\n      },\n\n      updateSubItem: (cycleId, field, itemId, subField, value) => {\n        const { currentEntry } = get();\n        if (!currentEntry) return;\n\n        const cycle = currentEntry.viciousCycles.find((c) => c.id === cycleId);\n        if (!cycle) return;\n\n        const updatedItems = cycle[field].map((item) =>\n          item.id === itemId ? { ...item, [subField]: value } : item\n        );\n        get().updateCycle(cycleId, field, updatedItems);\n      },\n\n      removeSubItem: (cycleId, field, itemId) => {\n        const { currentEntry } = get();\n        if (!currentEntry) return;\n\n        const cycle = currentEntry.viciousCycles.find((c) => c.id === cycleId);\n        if (!cycle) return;\n\n        get().updateCycle(\n          cycleId,\n          field,\n          cycle[field].filter((item) => item.id !== itemId)\n        );\n      },\n\n      // Consumable actions\n      addConsumable: (key: string, time: string) => {\n        const { currentEntry } = get();\n        if (!currentEntry) return;\n\n        const current = (currentEntry[key as keyof JournalEntry] as ConsumableEntry[]) || [];\n        get().updateEntry(key as keyof JournalEntry, [...current, { time }] as JournalEntry[keyof JournalEntry]);\n      },\n\n      removeConsumable: (key: string, index: number) => {\n        const { currentEntry } = get();\n        if (!currentEntry) return;\n\n        const current = (currentEntry[key as keyof JournalEntry] as ConsumableEntry[]) || [];\n        get().updateEntry(\n          key as keyof JournalEntry,\n          current.filter((_, i) => i !== index) as JournalEntry[keyof JournalEntry]\n        );\n      },\n    }),\n    { name: 'journal-store' }\n  )\n);\n\n// --- UI Store ---\ninterface UIState {\n  activeTab: TabName;\n  toast: Toast | null;\n  isPrintModalOpen: boolean;\n  printSelectedDates: string[];\n  printConfig: PrintConfig;\n  plasmaBlurred: boolean;\n\n  setActiveTab: (tab: TabName) => void;\n  showToast: (msg: string, type?: ToastType) => void;\n  hideToast: () => void;\n  openPrintModal: () => void;\n  closePrintModal: () => void;\n  togglePrintDate: (date: string) => void;\n  setPrintSelectedDates: (dates: string[]) => void;\n  togglePrintConfig: (key: keyof PrintConfig) => void;\n  setPlasmaBlurred: (blurred: boolean) => void;\n}\n\nexport const useUIStore = create<UIState>()(\n  devtools(\n    (set, get) => ({\n      activeTab: 'sleep',\n      toast: null,\n      isPrintModalOpen: false,\n      printSelectedDates: [],\n      printConfig: { sleep: true, activities: true, cycles: true },\n      plasmaBlurred: false,\n\n      setActiveTab: (tab) => set({ activeTab: tab }),\n\n      showToast: (msg, type = 'success') => {\n        set({ toast: { msg, type } });\n        setTimeout(() => set({ toast: null }), 3000);\n      },\n\n      hideToast: () => set({ toast: null }),\n\n      openPrintModal: () => set({ isPrintModalOpen: true }),\n\n      closePrintModal: () => set({ isPrintModalOpen: false }),\n\n      togglePrintDate: (date) => {\n        const { printSelectedDates } = get();\n        if (printSelectedDates.includes(date)) {\n          set({ printSelectedDates: printSelectedDates.filter((d) => d !== date) });\n        } else {\n          set({ printSelectedDates: [...printSelectedDates, date] });\n        }\n      },\n\n      setPrintSelectedDates: (dates) => set({ printSelectedDates: dates }),\n\n      togglePrintConfig: (key) => {\n        const { printConfig } = get();\n        set({ printConfig: { ...printConfig, [key]: !printConfig[key] } });\n      },\n\n      setPlasmaBlurred: (blurred) => set({ plasmaBlurred: blurred }),\n    }),\n    { name: 'ui-store' }\n  )\n);\n","import type { IconProps } from '@/types';\n\n// SVG Icon Components with accessibility support\n// eslint-disable-next-line react-refresh/only-export-components\nexport const Icons = {\n  Moon: ({ className = 'w-6 h-6' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z\"\n      />\n    </svg>\n  ),\n\n  Sun: ({ className = 'w-6 h-6' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\"\n      />\n    </svg>\n  ),\n\n  Save: ({ className = 'w-6 h-6' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4\"\n      />\n    </svg>\n  ),\n\n  Printer: ({ className = 'w-6 h-6' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z\"\n      />\n    </svg>\n  ),\n\n  ChevronLeft: ({ className = 'w-5 h-5' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 19l-7-7 7-7\" />\n    </svg>\n  ),\n\n  ChevronRight: ({ className = 'w-5 h-5' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 5l7 7-7 7\" />\n    </svg>\n  ),\n\n  X: ({ className = 'w-4 h-4' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n    </svg>\n  ),\n\n  Chart: ({ className = 'w-5 h-5' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\"\n      />\n    </svg>\n  ),\n\n  List: ({ className = 'w-5 h-5' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M4 6h16M4 10h16M4 14h16M4 18h16\"\n      />\n    </svg>\n  ),\n\n  Brain: ({ className = 'w-5 h-5' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\"\n      />\n    </svg>\n  ),\n\n  Dumbbell: ({ className = 'w-5 h-5' }: IconProps) => (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      className={className}\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      aria-hidden=\"true\"\n    >\n      <path d=\"M17.596 12.768a2 2 0 1 0 2.829-2.829l-1.768-1.767a2 2 0 0 0 2.828-2.829l-2.828-2.828a2 2 0 0 0-2.829 2.828l-1.767-1.768a2 2 0 1 0-2.829 2.829z\" />\n      <path d=\"m2.5 21.5 1.4-1.4\" />\n      <path d=\"m20.1 3.9 1.4-1.4\" />\n      <path d=\"M5.343 21.485a2 2 0 1 0 2.829-2.828l1.767 1.768a2 2 0 1 0 2.829-2.829l-6.364-6.364a2 2 0 1 0-2.829 2.829l1.768 1.767a2 2 0 0 0-2.828 2.829z\" />\n      <path d=\"m9.6 14.4 4.8-4.8\" />\n    </svg>\n  ),\n\n  Coffee: ({ className = 'w-5 h-5' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M18 8h1a4 4 0 010 8h-1M2 8h16v9a4 4 0 01-4 4H6a4 4 0 01-4-4V8zM6 1v3M10 1v3M14 1v3\"\n      />\n    </svg>\n  ),\n\n  Leaf: ({ className = 'w-5 h-5' }: IconProps) => (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      className={className}\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      aria-hidden=\"true\"\n    >\n      <path d=\"M12 22v-4\" />\n      <path d=\"M7 12c-1.5 0-4.5 1.5-5 3 3.5 1.5 6 1 6 1-1.5 1.5-2 3.5-2 5 2.5 0 4.5-1.5 6-3 1.5 1.5 3.5 3 6 3 0-1.5-.5-3.5-2-5 0 0 2.5.5 6-1-.5-1.5-3.5-3-5-3 1.5-1 4-4 4-6-2.5 0-5.5 1.5-7 3 0-2.5-.5-5-2-7-1.5 2-2 4.5-2 7-1.5-1.5-4.5-3-7-3 0 2 2.5 5 4 6\" />\n    </svg>\n  ),\n\n  Pill: ({ className = 'w-5 h-5' }: IconProps) => (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      className={className}\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      aria-hidden=\"true\"\n    >\n      <circle cx=\"7\" cy=\"7\" r=\"5\" />\n      <circle cx=\"17\" cy=\"17\" r=\"5\" />\n      <path d=\"M12 17h10\" />\n      <path d=\"m3.46 10.54 7.08-7.08\" />\n    </svg>\n  ),\n\n  Check: ({ className = 'w-5 h-5' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M5 13l4 4L19 7\" />\n    </svg>\n  ),\n\n  Refresh: ({ className = 'w-5 h-5' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"\n      />\n    </svg>\n  ),\n\n  Plus: ({ className = 'w-4 h-4' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 4v16m8-8H4\" />\n    </svg>\n  ),\n\n  Trash: ({ className = 'w-3 h-3' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\n      />\n    </svg>\n  ),\n\n  Cog: ({ className = 'w-5 h-5' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\"\n      />\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"\n      />\n    </svg>\n  ),\n\n  Beer: ({ className = 'w-5 h-5' }: IconProps) => (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      className={className}\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      aria-hidden=\"true\"\n    >\n      <path d=\"M17 11h1a3 3 0 0 1 0 6h-1\" />\n      <path d=\"M9 12v6\" />\n      <path d=\"M13 12v6\" />\n      <path d=\"M14 7.5c-1 0-1.44.5-3 .5s-2-.5-3-.5-1.72.5-2.5.5a2.5 2.5 0 0 1 0-5c.78 0 1.57.5 2.5.5S9.44 2 11 2s2 1.5 3 1.5 1.72-.5 2.5-.5a2.5 2.5 0 0 1 0 5c-.78 0-1.5-1.5-2.5-.5Z\" />\n      <path d=\"M5 8v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V8\" />\n    </svg>\n  ),\n\n  Cigarette: ({ className = 'w-5 h-5' }: IconProps) => (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      className={className}\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      aria-hidden=\"true\"\n    >\n      <path d=\"M18 12H2v4h16\" />\n      <path d=\"M22 12v4\" />\n      <path d=\"M18 12c0-2.5 2-2.5 2-5\" />\n      <path d=\"M22 7c0-2.5-2-2.5-2 0\" />\n    </svg>\n  ),\n\n  Skull: ({ className = 'w-5 h-5' }: IconProps) => (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      className={className}\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      aria-hidden=\"true\"\n    >\n      <circle cx=\"9\" cy=\"12\" r=\"1\" />\n      <circle cx=\"15\" cy=\"12\" r=\"1\" />\n      <path d=\"M8 20v2h8v-2\" />\n      <path d=\"m12.5 17-.5-1-.5 1h1z\" />\n      <path d=\"M16 20a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20\" />\n    </svg>\n  ),\n\n  Download: ({ className = 'w-5 h-5' }: IconProps) => (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      className={className}\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      aria-hidden=\"true\"\n    >\n      <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\" />\n      <polyline points=\"7 10 12 15 17 10\" />\n      <line x1=\"12\" x2=\"12\" y1=\"15\" y2=\"3\" />\n    </svg>\n  ),\n\n  Upload: ({ className = 'w-5 h-5' }: IconProps) => (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      className={className}\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      aria-hidden=\"true\"\n    >\n      <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\" />\n      <polyline points=\"17 8 12 3 7 8\" />\n      <line x1=\"12\" x2=\"12\" y1=\"3\" y2=\"15\" />\n    </svg>\n  ),\n\n  Loading: ({ className = 'animate-spin w-4 h-4' }: IconProps) => (\n    <svg\n      className={className}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      fill=\"none\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n      <path\n        className=\"opacity-75\"\n        fill=\"currentColor\"\n        d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n      />\n    </svg>\n  ),\n\n  CheckSmall: ({ className = 'w-4 h-4' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M5 13l4 4L19 7\" />\n    </svg>\n  ),\n\n  Users: ({ className = 'w-5 h-5' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z\"\n      />\n    </svg>\n  ),\n\n  Key: ({ className = 'w-4 h-4' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z\"\n      />\n    </svg>\n  ),\n\n  Edit: ({ className = 'w-4 h-4' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"\n      />\n    </svg>\n  ),\n\n  UserPlus: ({ className = 'w-4 h-4' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z\"\n      />\n    </svg>\n  ),\n\n  Shield: ({ className = 'w-4 h-4' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\"\n      />\n    </svg>\n  ),\n\n  ChevronDown: ({ className = 'w-5 h-5' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 9l-7 7-7-7\" />\n    </svg>\n  ),\n\n  ChevronUp: ({ className = 'w-5 h-5' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M5 15l7-7 7 7\" />\n    </svg>\n  ),\n\n  Logout: ({ className = 'w-5 h-5' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"\n      />\n    </svg>\n  ),\n\n  Clock: ({ className = 'w-4 h-4' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"\n      />\n    </svg>\n  ),\n\n  Calendar: ({ className = 'w-4 h-4' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"\n      />\n    </svg>\n  ),\n\n  Warning: ({ className = 'w-5 h-5' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\n      />\n    </svg>\n  ),\n\n  Info: ({ className = 'w-5 h-5' }: IconProps) => (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n      aria-hidden=\"true\"\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n      />\n    </svg>\n  ),\n};\n\n// Icon map for dynamic icon rendering\n// eslint-disable-next-line react-refresh/only-export-components\nexport const ICON_MAP: Record<string, React.ComponentType<IconProps>> = {\n  Dumbbell: Icons.Dumbbell,\n  Coffee: Icons.Coffee,\n  Leaf: Icons.Leaf,\n  Pill: Icons.Pill,\n  Beer: Icons.Beer,\n  Cigarette: Icons.Cigarette,\n  Skull: Icons.Skull,\n};\n\nexport default Icons;\n","import { useRef, useCallback, memo } from 'react';\nimport type { GlowCardProps } from '@/types';\n\n/**\n * Card component with cursor-following glow effect\n */\nexport const GlowCard = memo(function GlowCard({ children, className = '' }: GlowCardProps) {\n  const cardRef = useRef<HTMLDivElement>(null);\n  const borderRef = useRef<HTMLDivElement>(null);\n\n  const handleMouseMove = useCallback((e: React.MouseEvent<HTMLDivElement>) => {\n    if (!cardRef.current || !borderRef.current) return;\n    const rect = cardRef.current.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n\n    borderRef.current.style.opacity = '1';\n    borderRef.current.style.background = `radial-gradient(400px circle at ${x}px ${y}px, var(--primary), transparent 40%)`;\n    cardRef.current.style.transform = 'translateY(-4px)';\n    cardRef.current.style.boxShadow =\n      '0 20px 40px -15px rgba(0,0,0,0.3), 0 0 40px var(--primary-glow)';\n  }, []);\n\n  const handleMouseLeave = useCallback(() => {\n    if (borderRef.current && cardRef.current) {\n      borderRef.current.style.opacity = '0';\n      cardRef.current.style.transform = 'translateY(0)';\n      cardRef.current.style.boxShadow = '';\n    }\n  }, []);\n\n  return (\n    <div\n      ref={cardRef}\n      className={`relative border border-[var(--glass-border)] ${className}`}\n      style={{\n        transition: 'transform 0.3s ease, box-shadow 0.3s ease',\n        background: 'var(--glass-bg)',\n      }}\n      onMouseMove={handleMouseMove}\n      onMouseLeave={handleMouseLeave}\n    >\n      {/* Glow border that follows cursor */}\n      <div\n        ref={borderRef}\n        className=\"absolute -inset-[1px] rounded-2xl pointer-events-none transition-opacity duration-300 z-0\"\n        style={{\n          opacity: 0,\n          WebkitMask: 'linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)',\n          WebkitMaskComposite: 'xor',\n          maskComposite: 'exclude',\n          padding: '2px',\n        }}\n        aria-hidden=\"true\"\n      />\n      <div className=\"relative z-10\">{children}</div>\n    </div>\n  );\n});\n\nexport default GlowCard;\n","import { useState, useEffect, memo } from 'react';\n\ninterface AnimatedNumberProps {\n  value: number | string;\n  className?: string;\n}\n\n/**\n * Number component that animates when value changes\n */\nexport const AnimatedNumber = memo(function AnimatedNumber({\n  value,\n  className = '',\n}: AnimatedNumberProps) {\n  const [displayValue, setDisplayValue] = useState(value);\n  const [isAnimating, setIsAnimating] = useState(false);\n\n  useEffect(() => {\n    if (value !== displayValue) {\n      setIsAnimating(true);\n      setDisplayValue(value);\n      const timeout = setTimeout(() => setIsAnimating(false), 500);\n      return () => clearTimeout(timeout);\n    }\n    return undefined;\n  }, [value, displayValue]);\n\n  return (\n    <span\n      className={`number-animate ${isAnimating ? 'changed' : ''} ${className}`}\n      aria-live=\"polite\"\n    >\n      {displayValue}\n    </span>\n  );\n});\n\nexport default AnimatedNumber;\n","import { useCallback } from 'react';\n\n/**\n * Hook for creating material-design style ripple effects on buttons\n */\nexport const useRipple = () => {\n  const createRipple = useCallback((event: React.MouseEvent<HTMLElement>) => {\n    const button = event.currentTarget;\n    const rect = button.getBoundingClientRect();\n    const size = Math.max(rect.width, rect.height);\n    const x = event.clientX - rect.left - size / 2;\n    const y = event.clientY - rect.top - size / 2;\n\n    const ripple = document.createElement('span');\n    ripple.className = 'ripple';\n    ripple.style.width = ripple.style.height = `${size}px`;\n    ripple.style.left = `${x}px`;\n    ripple.style.top = `${y}px`;\n\n    button.appendChild(ripple);\n\n    setTimeout(() => ripple.remove(), 600);\n  }, []);\n\n  return createRipple;\n};\n\nexport default useRipple;\n","import { useRef } from 'react';\nimport type { TabName } from '@/types';\n\nconst TABS: TabName[] = ['sleep', 'activities', 'cycles', 'stats', 'settings'];\n\n/**\n * Hook for managing tab transition animations\n * Returns the appropriate CSS class based on navigation direction\n * Uses ref instead of state to avoid extra re-renders\n */\nexport const useTabTransition = (activeTab: TabName): string => {\n  const prevTabRef = useRef<TabName>(activeTab);\n\n  const prevIndex = TABS.indexOf(prevTabRef.current);\n  const currentIndex = TABS.indexOf(activeTab);\n  const direction = currentIndex >= prevIndex ? 'right' : 'left';\n\n  // Update ref for next comparison (doesn't trigger re-render)\n  prevTabRef.current = activeTab;\n\n  return direction === 'right' ? 'tab-content' : 'tab-content-reverse';\n};\n\nexport default useTabTransition;\n","import { memo } from 'react';\nimport { useRipple } from '@/hooks';\nimport type { NavBtnProps } from '@/types';\n\n/**\n * Navigation button component with ripple effect\n */\nexport const NavBtn = memo(function NavBtn({ label, icon: Icon, active, onClick }: NavBtnProps) {\n  const createRipple = useRipple();\n\n  const handleClick = (e: React.MouseEvent<HTMLButtonElement>) => {\n    createRipple(e);\n    onClick();\n  };\n\n  return (\n    <button\n      onClick={handleClick}\n      className={`nav-btn ripple-container px-3 py-2 rounded-lg flex items-center gap-2 transition-all duration-200 flex-shrink-0 ${\n        active\n          ? 'active bg-[var(--primary)] text-white shadow-lg shadow-[var(--primary)]/30 scale-105'\n          : 'text-[var(--text-muted)] hover:text-[var(--text-main)] hover:bg-[var(--bg-elevated)] hover:scale-105'\n      }`}\n      aria-pressed={active}\n      aria-label={label}\n    >\n      <Icon className={`w-5 h-5 transition-transform ${active ? 'animate-pop-in' : ''}`} />\n      <span className=\"text-xs font-bold hidden sm:inline\">{label}</span>\n    </button>\n  );\n});\n\nexport default NavBtn;\n","import { memo } from 'react';\nimport type { ColorSliderProps } from '@/types';\nimport { getScoreColor, getScoreBg } from '@/utils/helpers';\n\n/**\n * Colored range slider component with visual feedback\n */\nexport const ColorSlider = memo(function ColorSlider({\n  label,\n  value,\n  onChange,\n}: ColorSliderProps) {\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    onChange(parseInt(e.target.value, 10));\n  };\n\n  return (\n    <div className=\"flex items-center gap-3\" role=\"group\" aria-label={`${label} slider`}>\n      <span className={`text-xs font-bold w-14 ${getScoreColor(value)}`}>{label}</span>\n      <div className=\"flex-1 h-2 bg-[var(--bg-card)] rounded-full relative\">\n        <div\n          className={`absolute top-0 left-0 h-full rounded-full transition-all duration-200 ${getScoreBg(value)}`}\n          style={{ width: `${value * 10}%` }}\n          aria-hidden=\"true\"\n        />\n        <input\n          type=\"range\"\n          min=\"0\"\n          max=\"10\"\n          value={value || 0}\n          onChange={handleChange}\n          className=\"absolute inset-0 opacity-0 cursor-pointer w-full\"\n          aria-label={`${label}: ${value} sur 10`}\n          aria-valuemin={0}\n          aria-valuemax={10}\n          aria-valuenow={value}\n        />\n        <div\n          className=\"absolute -top-1 w-4 h-4 bg-white rounded-full shadow pointer-events-none transition-all\"\n          style={{ left: `calc(${value * 10}% - 8px)` }}\n          aria-hidden=\"true\"\n        />\n      </div>\n      <span className=\"text-xs font-bold w-5 text-right text-[var(--text-muted)]\" aria-hidden=\"true\">\n        {value}\n      </span>\n    </div>\n  );\n});\n\nexport default ColorSlider;\n","import { memo } from 'react';\nimport { Icons } from './Icons';\nimport type { Toast as ToastType } from '@/types';\n\ninterface ToastProps {\n  toast: ToastType;\n}\n\n/**\n * Toast notification component\n */\nexport const Toast = memo(function Toast({ toast }: ToastProps) {\n  const getToastStyles = () => {\n    switch (toast.type) {\n      case 'error':\n        return 'bg-gradient-to-r from-rose-600 to-rose-500 text-white shadow-rose-900/40';\n      case 'warning':\n        return 'bg-gradient-to-r from-amber-500 to-amber-400 text-white shadow-amber-900/40';\n      default:\n        return 'bg-gradient-to-r from-emerald-600 to-emerald-500 text-white shadow-emerald-900/40';\n    }\n  };\n\n  const getIcon = () => {\n    switch (toast.type) {\n      case 'error':\n        return <Icons.Info className=\"w-5 h-5\" />;\n      case 'warning':\n        return <Icons.Warning className=\"w-5 h-5\" />;\n      default:\n        return <Icons.Check className=\"w-5 h-5\" />;\n    }\n  };\n\n  return (\n    <div\n      className=\"fixed top-4 left-0 right-0 z-50 flex justify-center pointer-events-none\"\n      role=\"alert\"\n      aria-live=\"polite\"\n    >\n      <div\n        className={`toast-enter px-5 py-3 rounded-2xl text-sm font-bold shadow-2xl pointer-events-auto flex items-center gap-2 ${getToastStyles()}`}\n      >\n        {getIcon()}\n        {toast.msg}\n      </div>\n    </div>\n  );\n});\n\nexport default Toast;\n","import type { Language } from '@/types';\n\ntype TranslationKeys = {\n  title: string;\n  tab_sleep: string;\n  tab_activities: string;\n  tab_cycles: string;\n  tab_stats: string;\n  tab_settings: string;\n  cycles_title: string;\n  bedtime: string;\n  wakeup: string;\n  consumption_title: string;\n  timeline_title: string;\n  mood_title: string;\n  daily_note: string;\n  daily_note_placeholder: string;\n  add_btn: string;\n  activity_placeholder: string;\n  pleasure: string;\n  mastery: string;\n  satisfaction: string;\n  cycles_header: string;\n  new_btn: string;\n  no_cycles: string;\n  situation_label: string;\n  situation_ph: string;\n  emotions_label: string;\n  emotions_ph: string;\n  intensity: string;\n  add_emotion: string;\n  thoughts_label: string;\n  add_thought: string;\n  behaviors_label: string;\n  add_behavior: string;\n  consequences_label: string;\n  add_consequence: string;\n  stats_sleep_mood: string;\n  stats_thoughts: string;\n  stats_thoughts_ph: string;\n  stats_top_act: string;\n  no_data: string;\n  print_config: string;\n  print_sections: string;\n  print_sleep: string;\n  print_act: string;\n  print_cycles: string;\n  select_all: string;\n  print_btn: string;\n  print_title_sleep: string;\n  print_title_act: string;\n  save_toast: string;\n  error_server: string;\n  loading: string;\n  placeholder_txt: string;\n  settings_title: string;\n  lang_title: string;\n  config_consumables: string;\n  data_management: string;\n  export_data: string;\n  import_data: string;\n  clear_data: string;\n  clear_confirm: string;\n  label_txt: string;\n  icon_txt: string;\n  visible_txt: string;\n  legend_c: string;\n  legend_a: string;\n  legend_m: string;\n  legend_e: string;\n  status_saving: string;\n  status_saved: string;\n  status_error: string;\n  // User Management\n  user_management: string;\n  users_list: string;\n  create_user: string;\n  create_user_btn: string;\n  edit_user: string;\n  delete_user: string;\n  username: string;\n  password: string;\n  email: string;\n  admin_privileges: string;\n  active_status: string;\n  inactive_status: string;\n  user_id: string;\n  created_date: string;\n  no_email: string;\n  loading_users: string;\n  edit_action: string;\n  reset_password: string;\n  delete_action: string;\n  save_btn: string;\n  cancel_btn: string;\n  username_required: string;\n  password_required: string;\n  password_min_length: string;\n  user_created: string;\n  user_updated: string;\n  user_deleted: string;\n  password_reset: string;\n  delete_confirm: string;\n  password_prompt: string;\n  password_min_8: string;\n  admin_badge: string;\n  you_badge: string;\n  required_field: string;\n  // Appearance & Themes\n  appearance: string;\n  theme_mode: string;\n  theme_dark: string;\n  theme_light: string;\n  color_scheme: string;\n  color_violet: string;\n  color_blue: string;\n  color_green: string;\n  color_rose: string;\n  color_orange: string;\n  // Dashboard\n  tab_dashboard: string;\n  welcome: string;\n  dashboard_subtitle: string;\n  streak: string;\n  days_streak: string;\n  today_progress: string;\n  mood_trend: string;\n  sleep_average: string;\n  hours: string;\n  top_activity: string;\n  achievements: string;\n  unknown_activity: string;\n  // Notifications\n  notification_title: string;\n  enable_notifications: string;\n  notification_time: string;\n  notification_message: string;\n  notifications_enabled: string;\n  notifications_disabled: string;\n  notifications_denied: string;\n  notifications_not_supported: string;\n  daily_reminder: string;\n  time_to_journal: string;\n  // Stats\n  compare_periods: string;\n  last_week: string;\n  last_month: string;\n  trend_up: string;\n  trend_down: string;\n  trend_stable: string;\n};\n\nconst translations: Record<Language, TranslationKeys> = {\n  fr: {\n    title: 'Mon Journal TCC',\n    tab_sleep: 'Sommeil',\n    tab_activities: 'Activits',\n    tab_cycles: 'Cercles',\n    tab_stats: 'Analyse',\n    tab_settings: 'Paramtres',\n    cycles_title: 'CYCLES DE SOMMEIL',\n    bedtime: 'Coucher',\n    wakeup: 'Lever',\n    consumption_title: 'CONSOMMATION',\n    timeline_title: 'CHRONOLOGIE 24H',\n    mood_title: 'Humeur du jour',\n    daily_note: 'Note de la journe',\n    daily_note_placeholder: \"Comment s'est passe votre journe ?\",\n    add_btn: '+ Ajouter',\n    activity_placeholder: \"Nom de l'activit...\",\n    pleasure: 'Plaisir',\n    mastery: 'Matrise',\n    satisfaction: 'Satisf.',\n    cycles_header: 'CERCLES VICIEUX',\n    new_btn: '+ Nouveau',\n    no_cycles: 'Aucun cercle enregistr.',\n    situation_label: 'SITUATION (DCLENCHEUR)',\n    situation_ph: 'O ? Quand ? Avec qui ?',\n    emotions_label: 'MOTIONS',\n    emotions_ph: \"Nom de l'motion...\",\n    intensity: 'Intensit',\n    add_emotion: 'Ajouter une motion...',\n    thoughts_label: 'PENSES AUTOMATIQUES',\n    add_thought: 'Ajouter une pense...',\n    behaviors_label: 'COMPORTEMENTS',\n    add_behavior: 'Ajouter un comportement...',\n    consequences_label: 'CONSQUENCES',\n    add_consequence: 'Ajouter une consquence...',\n    stats_sleep_mood: 'SOMMEIL & HUMEUR (7J)',\n    stats_thoughts: 'JOURNAL DES PENSES',\n    stats_thoughts_ph: 'Note libre...',\n    stats_top_act: 'TOP ACTIVITS (PLAISIR)',\n    no_data: 'Pas assez de donnes',\n    print_config: 'Configuration Impression',\n    print_sections: 'SECTIONS  INCLURE',\n    print_sleep: 'Sommeil',\n    print_act: 'Activits',\n    print_cycles: 'Cercles',\n    select_all: 'Tout slectionner',\n    print_btn: 'Imprimer',\n    print_title_sleep: 'AGENDA DU SOMMEIL',\n    print_title_act: 'ACTIVITS',\n    save_toast: 'Sauvegard',\n    error_server: 'Erreur serveur',\n    loading: 'Chargement...',\n    placeholder_txt: '...',\n    settings_title: 'PARAMTRES',\n    lang_title: 'Langue',\n    config_consumables: 'Configuration Consommables',\n    data_management: 'Gestion des Donnes',\n    export_data: 'Exporter (Backup)',\n    import_data: 'Importer',\n    clear_data: 'Rinitialiser',\n    clear_confirm: 'Voulez-vous vraiment TOUT effacer ?',\n    label_txt: 'Nom',\n    icon_txt: 'Icne',\n    visible_txt: 'Visible',\n    legend_c: 'C = Caf',\n    legend_a: 'A = Addiction 1',\n    legend_m: 'M = Mdicament',\n    legend_e: 'E = Exercice',\n    status_saving: 'Sauvegarde...',\n    status_saved: 'Enregistr',\n    status_error: 'Erreur',\n    // User Management\n    user_management: 'Gestion des Utilisateurs',\n    users_list: 'Liste des Utilisateurs',\n    create_user: 'Crer un Utilisateur',\n    create_user_btn: 'Crer un Nouvel Utilisateur',\n    edit_user: \"Modifier l'Utilisateur\",\n    delete_user: \"Supprimer l'Utilisateur\",\n    username: \"Nom d'utilisateur\",\n    password: 'Mot de passe',\n    email: 'Email',\n    admin_privileges: 'Privilges Administrateur',\n    active_status: 'Actif',\n    inactive_status: 'Inactif',\n    user_id: 'ID',\n    created_date: 'Date de cration',\n    no_email: \"Pas d'email\",\n    loading_users: 'Chargement des utilisateurs...',\n    edit_action: \"Modifier l'utilisateur\",\n    reset_password: 'Rinitialiser le mot de passe',\n    delete_action: \"Supprimer l'utilisateur\",\n    save_btn: 'Enregistrer',\n    cancel_btn: 'Annuler',\n    username_required: \"Le nom d'utilisateur est requis\",\n    password_required: 'Le mot de passe est requis',\n    password_min_length: 'Le mot de passe doit contenir au moins 8 caractres',\n    user_created: 'Utilisateur cr avec succs',\n    user_updated: 'Utilisateur modifi avec succs',\n    user_deleted: 'Utilisateur supprim avec succs',\n    password_reset: 'Mot de passe rinitialis avec succs',\n    delete_confirm:\n      'Supprimer l\\'utilisateur \"{username}\" ? Cela supprimera dfinitivement toutes ses donnes.',\n    password_prompt: 'Entrez le nouveau mot de passe pour \"{username}\" :',\n    password_min_8: 'min 8 caractres',\n    admin_badge: 'Admin',\n    you_badge: 'Vous',\n    required_field: 'requis',\n    // Appearance & Themes\n    appearance: 'Apparence',\n    theme_mode: \"Mode d'affichage\",\n    theme_dark: 'Sombre',\n    theme_light: 'Clair',\n    color_scheme: 'Thme de couleur',\n    color_violet: 'Violet',\n    color_blue: 'Bleu',\n    color_green: 'Vert',\n    color_rose: 'Rose',\n    color_orange: 'Orange',\n    // Dashboard\n    tab_dashboard: 'Tableau de bord',\n    welcome: 'Bienvenue',\n    dashboard_subtitle: \"Votre progression en un coup d'il\",\n    streak: 'Srie',\n    days_streak: '{count} jours conscutifs',\n    today_progress: 'Progression du jour',\n    mood_trend: \"Tendance d'humeur\",\n    sleep_average: 'Sommeil moyen',\n    hours: 'heures',\n    top_activity: 'Meilleure activit',\n    achievements: 'Accomplissements',\n    unknown_activity: 'Activit inconnue',\n    // Notifications\n    notification_title: 'Rappels',\n    enable_notifications: 'Activer les notifications',\n    notification_time: 'Heure du rappel',\n    notification_message: \"N'oubliez pas de remplir votre journal !\",\n    notifications_enabled: 'Notifications actives',\n    notifications_disabled: 'Notifications dsactives',\n    notifications_denied: 'Permission refuse',\n    notifications_not_supported: 'Notifications non supportes',\n    daily_reminder: 'Rappel quotidien',\n    time_to_journal: \"C'est l'heure de remplir votre journal !\",\n    // Stats\n    compare_periods: 'Comparer les priodes',\n    last_week: 'Semaine dernire',\n    last_month: 'Mois dernier',\n    trend_up: 'En amlioration',\n    trend_down: 'En baisse',\n    trend_stable: 'Stable',\n  },\n  en: {\n    title: 'My CBT Journal',\n    tab_sleep: 'Sleep',\n    tab_activities: 'Activities',\n    tab_cycles: 'Cycles',\n    tab_stats: 'Analysis',\n    tab_settings: 'Settings',\n    cycles_title: 'SLEEP CYCLES',\n    bedtime: 'Bedtime',\n    wakeup: 'Wake up',\n    consumption_title: 'CONSUMPTION',\n    timeline_title: '24H TIMELINE',\n    mood_title: 'Daily Mood',\n    daily_note: 'Daily note',\n    daily_note_placeholder: 'How was your day?',\n    add_btn: '+ Add',\n    activity_placeholder: 'Activity name...',\n    pleasure: 'Pleasure',\n    mastery: 'Mastery',\n    satisfaction: 'Satisf.',\n    cycles_header: 'VICIOUS CYCLES',\n    new_btn: '+ New',\n    no_cycles: 'No cycle recorded.',\n    situation_label: 'SITUATION (TRIGGER)',\n    situation_ph: 'Where? When? Who?',\n    emotions_label: 'EMOTIONS',\n    emotions_ph: 'Emotion name...',\n    intensity: 'Intensity',\n    add_emotion: 'Add an emotion...',\n    thoughts_label: 'AUTOMATIC THOUGHTS',\n    add_thought: 'Add a thought...',\n    behaviors_label: 'BEHAVIORS',\n    add_behavior: 'Add a behavior...',\n    consequences_label: 'CONSEQUENCES',\n    add_consequence: 'Add a consequence...',\n    stats_sleep_mood: 'SLEEP & MOOD (7D)',\n    stats_thoughts: 'THOUGHTS JOURNAL',\n    stats_thoughts_ph: 'Free note...',\n    stats_top_act: 'TOP ACTIVITIES (PLEASURE)',\n    no_data: 'Not enough data',\n    print_config: 'Print Configuration',\n    print_sections: 'SECTIONS TO INCLUDE',\n    print_sleep: 'Sleep',\n    print_act: 'Activities',\n    print_cycles: 'Cycles',\n    select_all: 'Select All',\n    print_btn: 'Print',\n    print_title_sleep: 'SLEEP DIARY',\n    print_title_act: 'ACTIVITIES',\n    save_toast: 'Saved',\n    error_server: 'Server Error',\n    loading: 'Loading...',\n    placeholder_txt: '...',\n    settings_title: 'SETTINGS',\n    lang_title: 'Language',\n    config_consumables: 'Consumables Config',\n    data_management: 'Data Management',\n    export_data: 'Export (Backup)',\n    import_data: 'Import',\n    clear_data: 'Reset Data',\n    clear_confirm: 'Do you really want to clear EVERYTHING?',\n    label_txt: 'Name',\n    icon_txt: 'Icon',\n    visible_txt: 'Visible',\n    legend_c: 'C = Coffee',\n    legend_a: 'A = Addiction 1',\n    legend_m: 'M = Meds',\n    legend_e: 'E = Exercise',\n    status_saving: 'Saving...',\n    status_saved: 'Saved',\n    status_error: 'Error',\n    // User Management\n    user_management: 'User Management',\n    users_list: 'Users List',\n    create_user: 'Create User',\n    create_user_btn: 'Create New User',\n    edit_user: 'Edit User',\n    delete_user: 'Delete User',\n    username: 'Username',\n    password: 'Password',\n    email: 'Email',\n    admin_privileges: 'Admin Privileges',\n    active_status: 'Active',\n    inactive_status: 'Inactive',\n    user_id: 'ID',\n    created_date: 'Created',\n    no_email: 'No email',\n    loading_users: 'Loading users...',\n    edit_action: 'Edit user',\n    reset_password: 'Reset password',\n    delete_action: 'Delete user',\n    save_btn: 'Save',\n    cancel_btn: 'Cancel',\n    username_required: 'Username is required',\n    password_required: 'Password is required',\n    password_min_length: 'Password must be at least 8 characters',\n    user_created: 'User created successfully',\n    user_updated: 'User updated successfully',\n    user_deleted: 'User deleted successfully',\n    password_reset: 'Password reset successfully',\n    delete_confirm:\n      'Delete user \"{username}\"? This will permanently delete all their data.',\n    password_prompt: 'Enter new password for \"{username}\":',\n    password_min_8: 'min 8 chars',\n    admin_badge: 'Admin',\n    you_badge: 'You',\n    required_field: 'required',\n    // Appearance & Themes\n    appearance: 'Appearance',\n    theme_mode: 'Display Mode',\n    theme_dark: 'Dark',\n    theme_light: 'Light',\n    color_scheme: 'Color Theme',\n    color_violet: 'Violet',\n    color_blue: 'Blue',\n    color_green: 'Green',\n    color_rose: 'Rose',\n    color_orange: 'Orange',\n    // Dashboard\n    tab_dashboard: 'Dashboard',\n    welcome: 'Welcome',\n    dashboard_subtitle: 'Your progress at a glance',\n    streak: 'Streak',\n    days_streak: '{count} days streak',\n    today_progress: \"Today's Progress\",\n    mood_trend: 'Mood Trend',\n    sleep_average: 'Average Sleep',\n    hours: 'hours',\n    top_activity: 'Top Activity',\n    achievements: 'Achievements',\n    unknown_activity: 'Unknown activity',\n    // Notifications\n    notification_title: 'Reminders',\n    enable_notifications: 'Enable notifications',\n    notification_time: 'Reminder time',\n    notification_message: \"Don't forget to fill in your journal!\",\n    notifications_enabled: 'Notifications enabled',\n    notifications_disabled: 'Notifications disabled',\n    notifications_denied: 'Permission denied',\n    notifications_not_supported: 'Notifications not supported',\n    daily_reminder: 'Daily reminder',\n    time_to_journal: 'Time to fill in your journal!',\n    // Stats\n    compare_periods: 'Compare periods',\n    last_week: 'Last week',\n    last_month: 'Last month',\n    trend_up: 'Improving',\n    trend_down: 'Declining',\n    trend_stable: 'Stable',\n  },\n};\n\nexport type TranslationKey = keyof TranslationKeys;\n\nexport const getTranslation = (lang: Language, key: TranslationKey): string => {\n  return translations[lang][key] || key;\n};\n\nexport default translations;\n","import { useJournalStore, useSettingsStore, useUIStore } from '@/stores';\nimport { getTranslation } from '@/utils/translations';\nimport { Icons } from './Icons';\n\nexport function PrintModal() {\n  const { entries } = useJournalStore();\n  const { settings } = useSettingsStore();\n  const {\n    isPrintModalOpen,\n    closePrintModal,\n    printSelectedDates,\n    printConfig,\n    togglePrintDate,\n    setPrintSelectedDates,\n    togglePrintConfig,\n  } = useUIStore();\n\n  const t = (key: Parameters<typeof getTranslation>[1]) => getTranslation(settings.lang, key);\n\n  const handlePrint = () => {\n    closePrintModal();\n    setTimeout(() => window.print(), 300);\n  };\n\n  const handleBackdropClick = (e: React.MouseEvent<HTMLDivElement>) => {\n    if (e.target === e.currentTarget) {\n      closePrintModal();\n    }\n  };\n\n  if (!isPrintModalOpen) return null;\n\n  return (\n    <div\n      className=\"fixed inset-0 z-[60] bg-black/80 backdrop-blur-md flex items-center justify-center p-4 modal-backdrop no-print\"\n      onClick={handleBackdropClick}\n    >\n      <div className=\"glass-modal w-full max-w-md rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[80vh] modal-content border border-[var(--glass-border)]\" style={{ background: 'var(--glass-bg)', backdropFilter: 'blur(20px)' }}>\n        {/* Header avec gradient subtil */}\n        <div className=\"relative p-5 bg-gradient-to-r from-[var(--bg-card)] to-[var(--bg-main)]\">\n          <div className=\"absolute inset-0 bg-gradient-to-r from-[var(--primary)]/5 to-transparent pointer-events-none\"></div>\n          <div className=\"relative flex justify-between items-center\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-10 h-10 rounded-xl bg-gradient-to-br from-[var(--primary)] to-[var(--primary-dark)] flex items-center justify-center shadow-lg shadow-[var(--primary)]/30\">\n                <Icons.Printer className=\"text-white\" />\n              </div>\n              <div>\n                <h3 className=\"text-lg font-bold text-[var(--text-main)]\">{t('print_config')}</h3>\n                <p className=\"text-xs text-[var(--text-muted)]\">\n                  {printSelectedDates.length}{' '}\n                  {settings.lang === 'fr' ? 'jour(s) slectionn(s)' : 'day(s) selected'}\n                </p>\n              </div>\n            </div>\n            <button\n              onClick={closePrintModal}\n              className=\"w-8 h-8 rounded-full bg-[var(--bg-elevated)] hover:bg-[var(--bg-card-hover)] text-[var(--text-muted)] hover:text-[var(--text-main)] flex items-center justify-center transition-all hover:rotate-90\"\n            >\n              <Icons.X />\n            </button>\n          </div>\n        </div>\n\n        {/* Section des types de contenu */}\n        <div className=\"p-4 bg-[var(--bg-main)]/30\">\n          <h4 className=\"text-xs font-bold text-[var(--text-muted)] uppercase mb-3 tracking-wider flex items-center gap-2\">\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"2\"\n                d=\"M4 6h16M4 10h16M4 14h16M4 18h16\"\n              ></path>\n            </svg>\n            {t('print_sections')}\n          </h4>\n          <div className=\"grid grid-cols-3 gap-2\">\n            {/* Sommeil */}\n            <button\n              onClick={() => togglePrintConfig('sleep')}\n              className={`relative py-3 px-2 text-xs font-bold rounded-xl transition-all duration-300 flex flex-col items-center gap-2 ${\n                printConfig.sleep\n                  ? 'bg-[var(--primary)]/20 text-[var(--primary-light)] shadow-lg shadow-[var(--primary)]/20 ring-2 ring-[var(--primary)]/50'\n                  : 'bg-[var(--bg-card)] text-[var(--text-secondary)] hover:bg-[var(--bg-card-hover)]'\n              }`}\n            >\n              <div\n                className={`w-8 h-8 rounded-lg flex items-center justify-center transition-all ${\n                  printConfig.sleep ? 'bg-[var(--primary)]/30' : 'bg-[var(--bg-elevated)]'\n                }`}\n              >\n                <Icons.Moon />\n              </div>\n              <span>{t('print_sleep')}</span>\n              {printConfig.sleep && (\n                <div className=\"absolute -top-1 -right-1 w-5 h-5 rounded-full bg-[var(--primary)] flex items-center justify-center shadow-lg animate-pop-in\">\n                  <Icons.Check className=\"w-3 h-3 text-white\" />\n                </div>\n              )}\n            </button>\n\n            {/* Activits */}\n            <button\n              onClick={() => togglePrintConfig('activities')}\n              className={`relative py-3 px-2 text-xs font-bold rounded-xl transition-all duration-300 flex flex-col items-center gap-2 ${\n                printConfig.activities\n                  ? 'bg-[var(--accent)]/20 text-[var(--accent-light)] shadow-lg shadow-[var(--accent)]/20 ring-2 ring-[var(--accent)]/50'\n                  : 'bg-[var(--bg-card)] text-[var(--text-secondary)] hover:bg-[var(--bg-card-hover)]'\n              }`}\n            >\n              <div\n                className={`w-8 h-8 rounded-lg flex items-center justify-center transition-all ${\n                  printConfig.activities ? 'bg-[var(--accent)]/30' : 'bg-[var(--bg-elevated)]'\n                }`}\n              >\n                <Icons.List />\n              </div>\n              <span>{t('print_act')}</span>\n              {printConfig.activities && (\n                <div className=\"absolute -top-1 -right-1 w-5 h-5 rounded-full bg-[var(--accent)] flex items-center justify-center shadow-lg animate-pop-in\">\n                  <Icons.Check className=\"w-3 h-3 text-white\" />\n                </div>\n              )}\n            </button>\n\n            {/* Cycles */}\n            <button\n              onClick={() => togglePrintConfig('cycles')}\n              className={`relative py-3 px-2 text-xs font-bold rounded-xl transition-all duration-300 flex flex-col items-center gap-2 ${\n                printConfig.cycles\n                  ? 'bg-[var(--icon-wake)]/20 text-[var(--icon-wake)] shadow-lg shadow-[var(--icon-wake)]/20 ring-2 ring-[var(--icon-wake)]/50'\n                  : 'bg-[var(--bg-card)] text-[var(--text-secondary)] hover:bg-[var(--bg-card-hover)]'\n              }`}\n            >\n              <div\n                className={`w-8 h-8 rounded-lg flex items-center justify-center transition-all ${\n                  printConfig.cycles ? 'bg-[var(--icon-wake)]/30' : 'bg-[var(--bg-elevated)]'\n                }`}\n              >\n                <Icons.Refresh />\n              </div>\n              <span>{t('print_cycles')}</span>\n              {printConfig.cycles && (\n                <div className=\"absolute -top-1 -right-1 w-5 h-5 rounded-full bg-[var(--icon-wake)] flex items-center justify-center shadow-lg animate-pop-in\">\n                  <Icons.Check className=\"w-3 h-3 text-white\" />\n                </div>\n              )}\n            </button>\n          </div>\n        </div>\n\n        {/* Liste des dates avec scroll stylis */}\n        <div className=\"min-h-0 flex-1 overflow-hidden flex flex-col\">\n          <div className=\"px-4 py-2 bg-[var(--bg-card)]/50 flex items-center justify-between flex-shrink-0\">\n            <h4 className=\"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider flex items-center gap-2\">\n              <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth=\"2\"\n                  d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"\n                ></path>\n              </svg>\n              {settings.lang === 'fr' ? 'Slectionner les dates' : 'Select dates'}\n            </h4>\n            <div className=\"flex gap-2\">\n              <button\n                onClick={() => setPrintSelectedDates(Object.keys(entries))}\n                className=\"text-xs text-[var(--primary)] font-bold px-3 py-1.5 rounded-lg hover:bg-[var(--primary)]/10 transition-colors\"\n              >\n                {t('select_all')}\n              </button>\n              {printSelectedDates.length > 0 && (\n                <button\n                  onClick={() => setPrintSelectedDates([])}\n                  className=\"text-xs text-[var(--text-muted)] font-bold px-3 py-1.5 rounded-lg hover:bg-[var(--bg-elevated)] transition-colors\"\n                >\n                  {settings.lang === 'fr' ? 'Dslectionner' : 'Clear'}\n                </button>\n              )}\n            </div>\n          </div>\n          <div className=\"p-3 overflow-y-auto flex-1 space-y-2\">\n            {Object.keys(entries)\n              .sort()\n              .reverse()\n              .map((date, idx) => {\n                const isSelected = printSelectedDates.includes(date);\n                const entry = entries[date];\n                const hasSleep = entry.sleepHours?.filter(Boolean).length > 0;\n                const hasActivities = entry.activityLog?.some((s) => s.activities?.length > 0);\n                const hasCycles = entry.viciousCycles?.length > 0;\n\n                return (\n                  <div\n                    key={date}\n                    onClick={() => togglePrintDate(date)}\n                    className={`group flex items-center gap-3 p-3 rounded-xl cursor-pointer transition-all duration-200 ${\n                      isSelected\n                        ? 'bg-[var(--primary)]/10 shadow-md shadow-[var(--primary)]/10 ring-1 ring-[var(--primary)]/30'\n                        : 'bg-[var(--bg-card)] hover:bg-[var(--bg-card-hover)]'\n                    }`}\n                    style={{ animationDelay: `${idx * 30}ms` }}\n                  >\n                    {/* Checkbox anime */}\n                    <div\n                      className={`w-6 h-6 rounded-lg flex items-center justify-center flex-shrink-0 transition-all duration-300 ${\n                        isSelected\n                          ? 'bg-[var(--primary)] scale-110 shadow-lg shadow-[var(--primary)]/30'\n                          : 'bg-[var(--bg-elevated)] group-hover:bg-[var(--bg-card-hover)]'\n                      }`}\n                    >\n                      {isSelected && (\n                        <svg\n                          className=\"w-4 h-4 text-white animate-pop-in\"\n                          fill=\"none\"\n                          stroke=\"currentColor\"\n                          viewBox=\"0 0 24 24\"\n                        >\n                          <path\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                            strokeWidth=\"3\"\n                            d=\"M5 13l4 4L19 7\"\n                          ></path>\n                        </svg>\n                      )}\n                    </div>\n\n                    {/* Contenu de la date */}\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"font-bold text-[var(--text-main)] truncate\">\n                        {new Date(date).toLocaleDateString(\n                          settings.lang === 'fr' ? 'fr-FR' : 'en-US',\n                          { weekday: 'long', day: 'numeric', month: 'long' }\n                        )}\n                      </div>\n                      {/* Indicateurs de contenu */}\n                      <div className=\"flex gap-1.5 mt-1\">\n                        {hasSleep && (\n                          <span className=\"inline-flex items-center gap-1 text-[10px] font-medium px-1.5 py-0.5 rounded bg-[var(--primary)]/20 text-[var(--primary-light)]\">\n                            <Icons.Moon className=\"w-3 h-3\" />\n                          </span>\n                        )}\n                        {hasActivities && (\n                          <span className=\"inline-flex items-center gap-1 text-[10px] font-medium px-1.5 py-0.5 rounded bg-[var(--accent)]/20 text-[var(--accent-light)]\">\n                            <Icons.List className=\"w-3 h-3\" />\n                          </span>\n                        )}\n                        {hasCycles && (\n                          <span className=\"inline-flex items-center gap-1 text-[10px] font-medium px-1.5 py-0.5 rounded bg-[var(--icon-wake)]/20 text-[var(--icon-wake)]\">\n                            <Icons.Refresh className=\"w-3 h-3\" />\n                          </span>\n                        )}\n                        {!hasSleep && !hasActivities && !hasCycles && (\n                          <span className=\"text-[10px] text-[var(--text-muted)] italic\">\n                            {settings.lang === 'fr' ? 'Vide' : 'Empty'}\n                          </span>\n                        )}\n                      </div>\n                    </div>\n\n                    {/* Indicateur de slection */}\n                    <div\n                      className={`w-2 h-8 rounded-full transition-all duration-300 ${\n                        isSelected ? 'bg-[var(--primary)]' : 'bg-transparent'\n                      }`}\n                    ></div>\n                  </div>\n                );\n              })}\n\n            {Object.keys(entries).length === 0 && (\n              <div className=\"empty-state text-center py-8 text-[var(--text-muted)]\">\n                <svg\n                  className=\"w-12 h-12 mx-auto mb-3 opacity-50\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth=\"1.5\"\n                    d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n                  ></path>\n                </svg>\n                <p className=\"text-sm\">\n                  {settings.lang === 'fr' ? 'Aucune entre disponible' : 'No entries available'}\n                </p>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Footer avec bouton d'impression */}\n        <div className=\"p-3 bg-[var(--bg-card)] flex-shrink-0 shadow-[0_-4px_12px_rgba(0,0,0,0.2)]\">\n          <button\n            onClick={handlePrint}\n            disabled={printSelectedDates.length === 0}\n            className={`btn-interactive ripple-container w-full py-3 rounded-xl font-bold transition-all flex items-center justify-center gap-2 text-sm ${\n              printSelectedDates.length > 0\n                ? 'bg-gradient-to-r from-[var(--primary)] to-[var(--primary-dark)] text-white shadow-lg shadow-[var(--primary)]/30'\n                : 'bg-[var(--bg-elevated)] text-[var(--text-muted)] cursor-not-allowed'\n            }`}\n          >\n            <Icons.Printer />\n            <span>{t('print_btn')}</span>\n            {printSelectedDates.length > 0 && (\n              <span className=\"px-2 py-0.5 rounded-full bg-white/20 text-xs\">\n                {printSelectedDates.length}\n              </span>\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","const EPSILON = 0.000001;\n\n/**\n * Calculates the length of a vec3\n *\n * @param {vec3} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport function length(a) {\n    let x = a[0];\n    let y = a[1];\n    let z = a[2];\n    return Math.sqrt(x * x + y * y + z * z);\n}\n\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the source vector\n * @returns {vec3} out\n */\nexport function copy(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    return out;\n}\n\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\nexport function set(out, x, y, z) {\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    return out;\n}\n\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function add(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    return out;\n}\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function subtract(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    out[2] = a[2] - b[2];\n    return out;\n}\n\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function multiply(out, a, b) {\n    out[0] = a[0] * b[0];\n    out[1] = a[1] * b[1];\n    out[2] = a[2] * b[2];\n    return out;\n}\n\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function divide(out, a, b) {\n    out[0] = a[0] / b[0];\n    out[1] = a[1] / b[1];\n    out[2] = a[2] / b[2];\n    return out;\n}\n\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\nexport function scale(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    return out;\n}\n\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} distance between a and b\n */\nexport function distance(a, b) {\n    let x = b[0] - a[0];\n    let y = b[1] - a[1];\n    let z = b[2] - a[2];\n    return Math.sqrt(x * x + y * y + z * z);\n}\n\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\nexport function squaredDistance(a, b) {\n    let x = b[0] - a[0];\n    let y = b[1] - a[1];\n    let z = b[2] - a[2];\n    return x * x + y * y + z * z;\n}\n\n/**\n * Calculates the squared length of a vec3\n *\n * @param {vec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nexport function squaredLength(a) {\n    let x = a[0];\n    let y = a[1];\n    let z = a[2];\n    return x * x + y * y + z * z;\n}\n\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to negate\n * @returns {vec3} out\n */\nexport function negate(out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    out[2] = -a[2];\n    return out;\n}\n\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to invert\n * @returns {vec3} out\n */\nexport function inverse(out, a) {\n    out[0] = 1.0 / a[0];\n    out[1] = 1.0 / a[1];\n    out[2] = 1.0 / a[2];\n    return out;\n}\n\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to normalize\n * @returns {vec3} out\n */\nexport function normalize(out, a) {\n    let x = a[0];\n    let y = a[1];\n    let z = a[2];\n    let len = x * x + y * y + z * z;\n    if (len > 0) {\n        //TODO: evaluate use of glm_invsqrt here?\n        len = 1 / Math.sqrt(len);\n    }\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n    out[2] = a[2] * len;\n    return out;\n}\n\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} dot product of a and b\n */\nexport function dot(a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function cross(out, a, b) {\n    let ax = a[0],\n        ay = a[1],\n        az = a[2];\n    let bx = b[0],\n        by = b[1],\n        bz = b[2];\n\n    out[0] = ay * bz - az * by;\n    out[1] = az * bx - ax * bz;\n    out[2] = ax * by - ay * bx;\n    return out;\n}\n\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec3} out\n */\nexport function lerp(out, a, b, t) {\n    let ax = a[0];\n    let ay = a[1];\n    let az = a[2];\n    out[0] = ax + t * (b[0] - ax);\n    out[1] = ay + t * (b[1] - ay);\n    out[2] = az + t * (b[2] - az);\n    return out;\n}\n\n/**\n * Performs a frame rate independant, linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {Number} decay decay constant for interpolation. useful range between 1 and 25, from slow to fast.\n * @param {Number} dt delta time\n * @returns {vec3} out\n */\nexport function smoothLerp(out, a, b, decay, dt) {\n    const exp = Math.exp(-decay * dt);\n    let ax = a[0];\n    let ay = a[1];\n    let az = a[2];\n\n    out[0] = b[0] + (ax - b[0]) * exp;\n    out[1] = b[1] + (ay - b[1]) * exp;\n    out[2] = b[2] + (az - b[2]) * exp;\n    return out;\n}\n\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec3} out\n */\nexport function transformMat4(out, a, m) {\n    let x = a[0],\n        y = a[1],\n        z = a[2];\n    let w = m[3] * x + m[7] * y + m[11] * z + m[15];\n    w = w || 1.0;\n    out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n    out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n    out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n    return out;\n}\n\n/**\n * Same as above but doesn't apply translation.\n * Useful for rays.\n */\nexport function scaleRotateMat4(out, a, m) {\n    let x = a[0],\n        y = a[1],\n        z = a[2];\n    let w = m[3] * x + m[7] * y + m[11] * z + m[15];\n    w = w || 1.0;\n    out[0] = (m[0] * x + m[4] * y + m[8] * z) / w;\n    out[1] = (m[1] * x + m[5] * y + m[9] * z) / w;\n    out[2] = (m[2] * x + m[6] * y + m[10] * z) / w;\n    return out;\n}\n\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {mat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\nexport function transformMat3(out, a, m) {\n    let x = a[0],\n        y = a[1],\n        z = a[2];\n    out[0] = x * m[0] + y * m[3] + z * m[6];\n    out[1] = x * m[1] + y * m[4] + z * m[7];\n    out[2] = x * m[2] + y * m[5] + z * m[8];\n    return out;\n}\n\n/**\n * Transforms the vec3 with a quat\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {quat} q quaternion to transform with\n * @returns {vec3} out\n */\nexport function transformQuat(out, a, q) {\n    // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n\n    let x = a[0],\n        y = a[1],\n        z = a[2];\n    let qx = q[0],\n        qy = q[1],\n        qz = q[2],\n        qw = q[3];\n\n    let uvx = qy * z - qz * y;\n    let uvy = qz * x - qx * z;\n    let uvz = qx * y - qy * x;\n\n    let uuvx = qy * uvz - qz * uvy;\n    let uuvy = qz * uvx - qx * uvz;\n    let uuvz = qx * uvy - qy * uvx;\n\n    let w2 = qw * 2;\n    uvx *= w2;\n    uvy *= w2;\n    uvz *= w2;\n\n    uuvx *= 2;\n    uuvy *= 2;\n    uuvz *= 2;\n\n    out[0] = x + uvx + uuvx;\n    out[1] = y + uvy + uuvy;\n    out[2] = z + uvz + uuvz;\n    return out;\n}\n\n/**\n * Get the angle between two 3D vectors\n * @param {vec3} a The first operand\n * @param {vec3} b The second operand\n * @returns {Number} The angle in radians\n */\nexport const angle = (function () {\n    const tempA = [0, 0, 0];\n    const tempB = [0, 0, 0];\n\n    return function (a, b) {\n        copy(tempA, a);\n        copy(tempB, b);\n\n        normalize(tempA, tempA);\n        normalize(tempB, tempB);\n\n        let cosine = dot(tempA, tempB);\n\n        if (cosine > 1.0) {\n            return 0;\n        } else if (cosine < -1.0) {\n            return Math.PI;\n        } else {\n            return Math.acos(cosine);\n        }\n    };\n})();\n\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {vec3} a The first vector.\n * @param {vec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n","import * as Vec3Func from './functions/Vec3Func.js';\n\nexport class Vec3 extends Array {\n    constructor(x = 0, y = x, z = x) {\n        super(x, y, z);\n        return this;\n    }\n\n    get x() {\n        return this[0];\n    }\n\n    get y() {\n        return this[1];\n    }\n\n    get z() {\n        return this[2];\n    }\n\n    set x(v) {\n        this[0] = v;\n    }\n\n    set y(v) {\n        this[1] = v;\n    }\n\n    set z(v) {\n        this[2] = v;\n    }\n\n    set(x, y = x, z = x) {\n        if (x.length) return this.copy(x);\n        Vec3Func.set(this, x, y, z);\n        return this;\n    }\n\n    copy(v) {\n        Vec3Func.copy(this, v);\n        return this;\n    }\n\n    add(va, vb) {\n        if (vb) Vec3Func.add(this, va, vb);\n        else Vec3Func.add(this, this, va);\n        return this;\n    }\n\n    sub(va, vb) {\n        if (vb) Vec3Func.subtract(this, va, vb);\n        else Vec3Func.subtract(this, this, va);\n        return this;\n    }\n\n    multiply(v) {\n        if (v.length) Vec3Func.multiply(this, this, v);\n        else Vec3Func.scale(this, this, v);\n        return this;\n    }\n\n    divide(v) {\n        if (v.length) Vec3Func.divide(this, this, v);\n        else Vec3Func.scale(this, this, 1 / v);\n        return this;\n    }\n\n    inverse(v = this) {\n        Vec3Func.inverse(this, v);\n        return this;\n    }\n\n    // Can't use 'length' as Array.prototype uses it\n    len() {\n        return Vec3Func.length(this);\n    }\n\n    distance(v) {\n        if (v) return Vec3Func.distance(this, v);\n        else return Vec3Func.length(this);\n    }\n\n    squaredLen() {\n        return Vec3Func.squaredLength(this);\n    }\n\n    squaredDistance(v) {\n        if (v) return Vec3Func.squaredDistance(this, v);\n        else return Vec3Func.squaredLength(this);\n    }\n\n    negate(v = this) {\n        Vec3Func.negate(this, v);\n        return this;\n    }\n\n    cross(va, vb) {\n        if (vb) Vec3Func.cross(this, va, vb);\n        else Vec3Func.cross(this, this, va);\n        return this;\n    }\n\n    scale(v) {\n        Vec3Func.scale(this, this, v);\n        return this;\n    }\n\n    normalize() {\n        Vec3Func.normalize(this, this);\n        return this;\n    }\n\n    dot(v) {\n        return Vec3Func.dot(this, v);\n    }\n\n    equals(v) {\n        return Vec3Func.exactEquals(this, v);\n    }\n\n    applyMatrix3(mat3) {\n        Vec3Func.transformMat3(this, this, mat3);\n        return this;\n    }\n\n    applyMatrix4(mat4) {\n        Vec3Func.transformMat4(this, this, mat4);\n        return this;\n    }\n\n    scaleRotateMatrix4(mat4) {\n        Vec3Func.scaleRotateMat4(this, this, mat4);\n        return this;\n    }\n\n    applyQuaternion(q) {\n        Vec3Func.transformQuat(this, this, q);\n        return this;\n    }\n\n    angle(v) {\n        return Vec3Func.angle(this, v);\n    }\n\n    lerp(v, t) {\n        Vec3Func.lerp(this, this, v, t);\n        return this;\n    }\n\n    smoothLerp(v, decay, dt) {\n        Vec3Func.smoothLerp(this, this, v, decay, dt);\n        return this;\n    }\n\n    clone() {\n        return new Vec3(this[0], this[1], this[2]);\n    }\n\n    fromArray(a, o = 0) {\n        this[0] = a[o];\n        this[1] = a[o + 1];\n        this[2] = a[o + 2];\n        return this;\n    }\n\n    toArray(a = [], o = 0) {\n        a[o] = this[0];\n        a[o + 1] = this[1];\n        a[o + 2] = this[2];\n        return a;\n    }\n\n    transformDirection(mat4) {\n        const x = this[0];\n        const y = this[1];\n        const z = this[2];\n\n        this[0] = mat4[0] * x + mat4[4] * y + mat4[8] * z;\n        this[1] = mat4[1] * x + mat4[5] * y + mat4[9] * z;\n        this[2] = mat4[2] * x + mat4[6] * y + mat4[10] * z;\n\n        return this.normalize();\n    }\n}\n","// attribute params\n// {\n//     data - typed array eg UInt16Array for indices, Float32Array\n//     size - int default 1\n//     instanced - default null. Pass divisor amount\n//     type - gl enum default gl.UNSIGNED_SHORT for 'index', gl.FLOAT for others\n//     normalized - boolean default false\n\n//     buffer - gl buffer, if buffer exists, don't need to provide data - although needs position data for bounds calculation\n//     stride - default 0 - for when passing in buffer\n//     offset - default 0 - for when passing in buffer\n//     count - default null - for when passing in buffer\n//     min - array - for when passing in buffer\n//     max - array - for when passing in buffer\n// }\n\n// TODO: fit in transform feedback\n\nimport { Vec3 } from '../math/Vec3.js';\n\nconst tempVec3 = /* @__PURE__ */ new Vec3();\n\nlet ID = 1;\nlet ATTR_ID = 1;\n\n// To stop inifinite warnings\nlet isBoundsWarned = false;\n\nexport class Geometry {\n    constructor(gl, attributes = {}) {\n        if (!gl.canvas) console.error('gl not passed as first argument to Geometry');\n        this.gl = gl;\n        this.attributes = attributes;\n        this.id = ID++;\n\n        // Store one VAO per program attribute locations order\n        this.VAOs = {};\n\n        this.drawRange = { start: 0, count: 0 };\n        this.instancedCount = 0;\n\n        // Unbind current VAO so that new buffers don't get added to active mesh\n        this.gl.renderer.bindVertexArray(null);\n        this.gl.renderer.currentGeometry = null;\n\n        // Alias for state store to avoid redundant calls for global state\n        this.glState = this.gl.renderer.state;\n\n        // create the buffers\n        for (let key in attributes) {\n            this.addAttribute(key, attributes[key]);\n        }\n    }\n\n    addAttribute(key, attr) {\n        this.attributes[key] = attr;\n\n        // Set options\n        attr.id = ATTR_ID++; // TODO: currently unused, remove?\n        attr.size = attr.size || 1;\n        attr.type =\n            attr.type ||\n            (attr.data.constructor === Float32Array\n                ? this.gl.FLOAT\n                : attr.data.constructor === Uint16Array\n                ? this.gl.UNSIGNED_SHORT\n                : this.gl.UNSIGNED_INT); // Uint32Array\n        attr.target = key === 'index' ? this.gl.ELEMENT_ARRAY_BUFFER : this.gl.ARRAY_BUFFER;\n        attr.normalized = attr.normalized || false;\n        attr.stride = attr.stride || 0;\n        attr.offset = attr.offset || 0;\n        attr.count = attr.count || (attr.stride ? attr.data.byteLength / attr.stride : attr.data.length / attr.size);\n        attr.divisor = attr.instanced || 0;\n        attr.needsUpdate = false;\n        attr.usage = attr.usage || this.gl.STATIC_DRAW;\n\n        if (!attr.buffer) {\n            // Push data to buffer\n            this.updateAttribute(attr);\n        }\n\n        // Update geometry counts. If indexed, ignore regular attributes\n        if (attr.divisor) {\n            this.isInstanced = true;\n            if (this.instancedCount && this.instancedCount !== attr.count * attr.divisor) {\n                console.warn('geometry has multiple instanced buffers of different length');\n                return (this.instancedCount = Math.min(this.instancedCount, attr.count * attr.divisor));\n            }\n            this.instancedCount = attr.count * attr.divisor;\n        } else if (key === 'index') {\n            this.drawRange.count = attr.count;\n        } else if (!this.attributes.index) {\n            this.drawRange.count = Math.max(this.drawRange.count, attr.count);\n        }\n    }\n\n    updateAttribute(attr) {\n        const isNewBuffer = !attr.buffer;\n        if (isNewBuffer) attr.buffer = this.gl.createBuffer();\n        if (this.glState.boundBuffer !== attr.buffer) {\n            this.gl.bindBuffer(attr.target, attr.buffer);\n            this.glState.boundBuffer = attr.buffer;\n        }\n        if (isNewBuffer) {\n            this.gl.bufferData(attr.target, attr.data, attr.usage);\n        } else {\n            this.gl.bufferSubData(attr.target, 0, attr.data);\n        }\n        attr.needsUpdate = false;\n    }\n\n    setIndex(value) {\n        this.addAttribute('index', value);\n    }\n\n    setDrawRange(start, count) {\n        this.drawRange.start = start;\n        this.drawRange.count = count;\n    }\n\n    setInstancedCount(value) {\n        this.instancedCount = value;\n    }\n\n    createVAO(program) {\n        this.VAOs[program.attributeOrder] = this.gl.renderer.createVertexArray();\n        this.gl.renderer.bindVertexArray(this.VAOs[program.attributeOrder]);\n        this.bindAttributes(program);\n    }\n\n    bindAttributes(program) {\n        // Link all attributes to program using gl.vertexAttribPointer\n        program.attributeLocations.forEach((location, { name, type }) => {\n            // If geometry missing a required shader attribute\n            if (!this.attributes[name]) {\n                console.warn(`active attribute ${name} not being supplied`);\n                return;\n            }\n\n            const attr = this.attributes[name];\n\n            this.gl.bindBuffer(attr.target, attr.buffer);\n            this.glState.boundBuffer = attr.buffer;\n\n            // For matrix attributes, buffer needs to be defined per column\n            let numLoc = 1;\n            if (type === 35674) numLoc = 2; // mat2\n            if (type === 35675) numLoc = 3; // mat3\n            if (type === 35676) numLoc = 4; // mat4\n\n            const size = attr.size / numLoc;\n            const stride = numLoc === 1 ? 0 : numLoc * numLoc * 4;\n            const offset = numLoc === 1 ? 0 : numLoc * 4;\n\n            for (let i = 0; i < numLoc; i++) {\n                this.gl.vertexAttribPointer(location + i, size, attr.type, attr.normalized, attr.stride + stride, attr.offset + i * offset);\n                this.gl.enableVertexAttribArray(location + i);\n\n                // For instanced attributes, divisor needs to be set.\n                // For firefox, need to set back to 0 if non-instanced drawn after instanced. Else won't render\n                this.gl.renderer.vertexAttribDivisor(location + i, attr.divisor);\n            }\n        });\n\n        // Bind indices if geometry indexed\n        if (this.attributes.index) this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.attributes.index.buffer);\n    }\n\n    draw({ program, mode = this.gl.TRIANGLES }) {\n        if (this.gl.renderer.currentGeometry !== `${this.id}_${program.attributeOrder}`) {\n            if (!this.VAOs[program.attributeOrder]) this.createVAO(program);\n            this.gl.renderer.bindVertexArray(this.VAOs[program.attributeOrder]);\n            this.gl.renderer.currentGeometry = `${this.id}_${program.attributeOrder}`;\n        }\n\n        // Check if any attributes need updating\n        program.attributeLocations.forEach((location, { name }) => {\n            const attr = this.attributes[name];\n            if (attr.needsUpdate) this.updateAttribute(attr);\n        });\n\n        // For drawElements, offset needs to be multiple of type size\n        let indexBytesPerElement = 2;\n        if (this.attributes.index?.type === this.gl.UNSIGNED_INT) indexBytesPerElement = 4;\n\n        if (this.isInstanced) {\n            if (this.attributes.index) {\n                this.gl.renderer.drawElementsInstanced(\n                    mode,\n                    this.drawRange.count,\n                    this.attributes.index.type,\n                    this.attributes.index.offset + this.drawRange.start * indexBytesPerElement,\n                    this.instancedCount\n                );\n            } else {\n                this.gl.renderer.drawArraysInstanced(mode, this.drawRange.start, this.drawRange.count, this.instancedCount);\n            }\n        } else {\n            if (this.attributes.index) {\n                this.gl.drawElements(\n                    mode,\n                    this.drawRange.count,\n                    this.attributes.index.type,\n                    this.attributes.index.offset + this.drawRange.start * indexBytesPerElement\n                );\n            } else {\n                this.gl.drawArrays(mode, this.drawRange.start, this.drawRange.count);\n            }\n        }\n    }\n\n    getPosition() {\n        // Use position buffer, or min/max if available\n        const attr = this.attributes.position;\n        // if (attr.min) return [...attr.min, ...attr.max];\n        if (attr.data) return attr;\n        if (isBoundsWarned) return;\n        console.warn('No position buffer data found to compute bounds');\n        return (isBoundsWarned = true);\n    }\n\n    computeBoundingBox(attr) {\n        if (!attr) attr = this.getPosition();\n        const array = attr.data;\n        // Data loaded shouldn't haave stride, only buffers\n        // const stride = attr.stride ? attr.stride / array.BYTES_PER_ELEMENT : attr.size;\n        const stride = attr.size;\n\n        if (!this.bounds) {\n            this.bounds = {\n                min: new Vec3(),\n                max: new Vec3(),\n                center: new Vec3(),\n                scale: new Vec3(),\n                radius: Infinity,\n            };\n        }\n\n        const min = this.bounds.min;\n        const max = this.bounds.max;\n        const center = this.bounds.center;\n        const scale = this.bounds.scale;\n\n        min.set(+Infinity);\n        max.set(-Infinity);\n\n        // TODO: check size of position (eg triangle with Vec2)\n        for (let i = 0, l = array.length; i < l; i += stride) {\n            const x = array[i];\n            const y = array[i + 1];\n            const z = array[i + 2];\n\n            min.x = Math.min(x, min.x);\n            min.y = Math.min(y, min.y);\n            min.z = Math.min(z, min.z);\n\n            max.x = Math.max(x, max.x);\n            max.y = Math.max(y, max.y);\n            max.z = Math.max(z, max.z);\n        }\n\n        scale.sub(max, min);\n        center.add(min, max).divide(2);\n    }\n\n    computeBoundingSphere(attr) {\n        if (!attr) attr = this.getPosition();\n        const array = attr.data;\n        // Data loaded shouldn't haave stride, only buffers\n        // const stride = attr.stride ? attr.stride / array.BYTES_PER_ELEMENT : attr.size;\n        const stride = attr.size;\n\n        if (!this.bounds) this.computeBoundingBox(attr);\n\n        let maxRadiusSq = 0;\n        for (let i = 0, l = array.length; i < l; i += stride) {\n            tempVec3.fromArray(array, i);\n            maxRadiusSq = Math.max(maxRadiusSq, this.bounds.center.squaredDistance(tempVec3));\n        }\n\n        this.bounds.radius = Math.sqrt(maxRadiusSq);\n    }\n\n    remove() {\n        for (let key in this.VAOs) {\n            this.gl.renderer.deleteVertexArray(this.VAOs[key]);\n            delete this.VAOs[key];\n        }\n        for (let key in this.attributes) {\n            this.gl.deleteBuffer(this.attributes[key].buffer);\n            delete this.attributes[key];\n        }\n    }\n}\n","// TODO: upload empty texture if null ? maybe not\n// TODO: upload identity matrix if null ?\n// TODO: sampler Cube\n\nlet ID = 1;\n\n// cache of typed arrays used to flatten uniform arrays\nconst arrayCacheF32 = {};\n\nexport class Program {\n    constructor(\n        gl,\n        {\n            vertex,\n            fragment,\n            uniforms = {},\n\n            transparent = false,\n            cullFace = gl.BACK,\n            frontFace = gl.CCW,\n            depthTest = true,\n            depthWrite = true,\n            depthFunc = gl.LEQUAL,\n        } = {}\n    ) {\n        if (!gl.canvas) console.error('gl not passed as first argument to Program');\n        this.gl = gl;\n        this.uniforms = uniforms;\n        this.id = ID++;\n\n        if (!vertex) console.warn('vertex shader not supplied');\n        if (!fragment) console.warn('fragment shader not supplied');\n\n        // Store program state\n        this.transparent = transparent;\n        this.cullFace = cullFace;\n        this.frontFace = frontFace;\n        this.depthTest = depthTest;\n        this.depthWrite = depthWrite;\n        this.depthFunc = depthFunc;\n        this.blendFunc = {};\n        this.blendEquation = {};\n        this.stencilFunc = {};\n        this.stencilOp = {}\n\n        // set default blendFunc if transparent flagged\n        if (this.transparent && !this.blendFunc.src) {\n            if (this.gl.renderer.premultipliedAlpha) this.setBlendFunc(this.gl.ONE, this.gl.ONE_MINUS_SRC_ALPHA);\n            else this.setBlendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n        }\n\n        // Create empty shaders and attach to program\n        this.vertexShader = gl.createShader(gl.VERTEX_SHADER);\n        this.fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n        this.program = gl.createProgram();\n        gl.attachShader(this.program, this.vertexShader);\n        gl.attachShader(this.program, this.fragmentShader);\n\n        // Compile shaders with source\n        this.setShaders({ vertex, fragment });\n    }\n\n    setShaders({ vertex, fragment }) {\n        if (vertex) {\n            // compile vertex shader and log errors\n            this.gl.shaderSource(this.vertexShader, vertex);\n            this.gl.compileShader(this.vertexShader);\n            if (this.gl.getShaderInfoLog(this.vertexShader) !== '') {\n                console.warn(`${this.gl.getShaderInfoLog(this.vertexShader)}\\nVertex Shader\\n${addLineNumbers(vertex)}`);\n            }\n        }\n\n        if (fragment) {\n            // compile fragment shader and log errors\n            this.gl.shaderSource(this.fragmentShader, fragment);\n            this.gl.compileShader(this.fragmentShader);\n            if (this.gl.getShaderInfoLog(this.fragmentShader) !== '') {\n                console.warn(`${this.gl.getShaderInfoLog(this.fragmentShader)}\\nFragment Shader\\n${addLineNumbers(fragment)}`);\n            }\n        }\n\n        // compile program and log errors\n        this.gl.linkProgram(this.program);\n        if (!this.gl.getProgramParameter(this.program, this.gl.LINK_STATUS)) {\n            return console.warn(this.gl.getProgramInfoLog(this.program));\n        }\n\n        // Get active uniform locations\n        this.uniformLocations = new Map();\n        let numUniforms = this.gl.getProgramParameter(this.program, this.gl.ACTIVE_UNIFORMS);\n        for (let uIndex = 0; uIndex < numUniforms; uIndex++) {\n            let uniform = this.gl.getActiveUniform(this.program, uIndex);\n            this.uniformLocations.set(uniform, this.gl.getUniformLocation(this.program, uniform.name));\n\n            // split uniforms' names to separate array and struct declarations\n            const split = uniform.name.match(/(\\w+)/g);\n\n            uniform.uniformName = split[0];\n            uniform.nameComponents = split.slice(1);\n        }\n\n        // Get active attribute locations\n        this.attributeLocations = new Map();\n        const locations = [];\n        const numAttribs = this.gl.getProgramParameter(this.program, this.gl.ACTIVE_ATTRIBUTES);\n        for (let aIndex = 0; aIndex < numAttribs; aIndex++) {\n            const attribute = this.gl.getActiveAttrib(this.program, aIndex);\n            const location = this.gl.getAttribLocation(this.program, attribute.name);\n            // Ignore special built-in inputs. eg gl_VertexID, gl_InstanceID\n            if (location === -1) continue;\n            locations[location] = attribute.name;\n            this.attributeLocations.set(attribute, location);\n        }\n        this.attributeOrder = locations.join('');\n    }\n\n    setBlendFunc(src, dst, srcAlpha, dstAlpha) {\n        this.blendFunc.src = src;\n        this.blendFunc.dst = dst;\n        this.blendFunc.srcAlpha = srcAlpha;\n        this.blendFunc.dstAlpha = dstAlpha;\n        if (src) this.transparent = true;\n    }\n\n    setBlendEquation(modeRGB, modeAlpha) {\n        this.blendEquation.modeRGB = modeRGB;\n        this.blendEquation.modeAlpha = modeAlpha;\n    }\n\n    setStencilFunc(func, ref, mask) {\n        this.stencilRef = ref;\n        this.stencilFunc.func = func;\n        this.stencilFunc.ref = ref;\n        this.stencilFunc.mask = mask;\n    }\n\n    setStencilOp(stencilFail, depthFail, depthPass) {\n        this.stencilOp.stencilFail = stencilFail;\n        this.stencilOp.depthFail = depthFail;\n        this.stencilOp.depthPass = depthPass;\n    }\n\n    applyState() {\n        if (this.depthTest) this.gl.renderer.enable(this.gl.DEPTH_TEST);\n        else this.gl.renderer.disable(this.gl.DEPTH_TEST);\n\n        if (this.cullFace) this.gl.renderer.enable(this.gl.CULL_FACE);\n        else this.gl.renderer.disable(this.gl.CULL_FACE);\n\n        if (this.blendFunc.src) this.gl.renderer.enable(this.gl.BLEND);\n        else this.gl.renderer.disable(this.gl.BLEND);\n\n        if (this.cullFace) this.gl.renderer.setCullFace(this.cullFace);\n        this.gl.renderer.setFrontFace(this.frontFace);\n        this.gl.renderer.setDepthMask(this.depthWrite);\n        this.gl.renderer.setDepthFunc(this.depthFunc);\n        if (this.blendFunc.src) this.gl.renderer.setBlendFunc(this.blendFunc.src, this.blendFunc.dst, this.blendFunc.srcAlpha, this.blendFunc.dstAlpha);\n        this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB, this.blendEquation.modeAlpha);\n\n        if(this.stencilFunc.func || this.stencilOp.stencilFail) this.gl.renderer.enable(this.gl.STENCIL_TEST)\n            else this.gl.renderer.disable(this.gl.STENCIL_TEST)\n\n        this.gl.renderer.setStencilFunc(this.stencilFunc.func, this.stencilFunc.ref, this.stencilFunc.mask)\n        this.gl.renderer.setStencilOp(this.stencilOp.stencilFail, this.stencilOp.depthFail, this.stencilOp.depthPass)\n\n    }\n\n    use({ flipFaces = false } = {}) {\n        let textureUnit = -1;\n        const programActive = this.gl.renderer.state.currentProgram === this.id;\n\n        // Avoid gl call if program already in use\n        if (!programActive) {\n            this.gl.useProgram(this.program);\n            this.gl.renderer.state.currentProgram = this.id;\n        }\n\n        // Set only the active uniforms found in the shader\n        this.uniformLocations.forEach((location, activeUniform) => {\n            let uniform = this.uniforms[activeUniform.uniformName];\n\n            for (const component of activeUniform.nameComponents) {\n                if (!uniform) break;\n\n                if (component in uniform) {\n                    uniform = uniform[component];\n                } else if (Array.isArray(uniform.value)) {\n                    break;\n                } else {\n                    uniform = undefined;\n                    break;\n                }\n            }\n\n            if (!uniform) {\n                return warn(`Active uniform ${activeUniform.name} has not been supplied`);\n            }\n\n            if (uniform && uniform.value === undefined) {\n                return warn(`${activeUniform.name} uniform is missing a value parameter`);\n            }\n\n            if (uniform.value.texture) {\n                textureUnit = textureUnit + 1;\n\n                // Check if texture needs to be updated\n                uniform.value.update(textureUnit);\n                return setUniform(this.gl, activeUniform.type, location, textureUnit);\n            }\n\n            // For texture arrays, set uniform as an array of texture units instead of just one\n            if (uniform.value.length && uniform.value[0].texture) {\n                const textureUnits = [];\n                uniform.value.forEach((value) => {\n                    textureUnit = textureUnit + 1;\n                    value.update(textureUnit);\n                    textureUnits.push(textureUnit);\n                });\n\n                return setUniform(this.gl, activeUniform.type, location, textureUnits);\n            }\n\n            setUniform(this.gl, activeUniform.type, location, uniform.value);\n        });\n\n        this.applyState();\n        if (flipFaces) this.gl.renderer.setFrontFace(this.frontFace === this.gl.CCW ? this.gl.CW : this.gl.CCW);\n    }\n\n    remove() {\n        this.gl.deleteProgram(this.program);\n    }\n}\n\nfunction setUniform(gl, type, location, value) {\n    value = value.length ? flatten(value) : value;\n    const setValue = gl.renderer.state.uniformLocations.get(location);\n\n    // Avoid redundant uniform commands\n    if (value.length) {\n        if (setValue === undefined || setValue.length !== value.length) {\n            // clone array to store as cache\n            gl.renderer.state.uniformLocations.set(location, value.slice(0));\n        } else {\n            if (arraysEqual(setValue, value)) return;\n\n            // Update cached array values\n            setValue.set ? setValue.set(value) : setArray(setValue, value);\n            gl.renderer.state.uniformLocations.set(location, setValue);\n        }\n    } else {\n        if (setValue === value) return;\n        gl.renderer.state.uniformLocations.set(location, value);\n    }\n\n    switch (type) {\n        case 5126:\n            return value.length ? gl.uniform1fv(location, value) : gl.uniform1f(location, value); // FLOAT\n        case 35664:\n            return gl.uniform2fv(location, value); // FLOAT_VEC2\n        case 35665:\n            return gl.uniform3fv(location, value); // FLOAT_VEC3\n        case 35666:\n            return gl.uniform4fv(location, value); // FLOAT_VEC4\n        case 35670: // BOOL\n        case 5124: // INT\n        case 35678: // SAMPLER_2D\n        case 36306: // U_SAMPLER_2D\n        case 35680: // SAMPLER_CUBE\n        case 36289: // SAMPLER_2D_ARRAY\n            return value.length ? gl.uniform1iv(location, value) : gl.uniform1i(location, value); // SAMPLER_CUBE\n        case 35671: // BOOL_VEC2\n        case 35667:\n            return gl.uniform2iv(location, value); // INT_VEC2\n        case 35672: // BOOL_VEC3\n        case 35668:\n            return gl.uniform3iv(location, value); // INT_VEC3\n        case 35673: // BOOL_VEC4\n        case 35669:\n            return gl.uniform4iv(location, value); // INT_VEC4\n        case 35674:\n            return gl.uniformMatrix2fv(location, false, value); // FLOAT_MAT2\n        case 35675:\n            return gl.uniformMatrix3fv(location, false, value); // FLOAT_MAT3\n        case 35676:\n            return gl.uniformMatrix4fv(location, false, value); // FLOAT_MAT4\n    }\n}\n\nfunction addLineNumbers(string) {\n    let lines = string.split('\\n');\n    for (let i = 0; i < lines.length; i++) {\n        lines[i] = i + 1 + ': ' + lines[i];\n    }\n    return lines.join('\\n');\n}\n\nfunction flatten(a) {\n    const arrayLen = a.length;\n    const valueLen = a[0].length;\n    if (valueLen === undefined) return a;\n    const length = arrayLen * valueLen;\n    let value = arrayCacheF32[length];\n    if (!value) arrayCacheF32[length] = value = new Float32Array(length);\n    for (let i = 0; i < arrayLen; i++) value.set(a[i], i * valueLen);\n    return value;\n}\n\nfunction arraysEqual(a, b) {\n    if (a.length !== b.length) return false;\n    for (let i = 0, l = a.length; i < l; i++) {\n        if (a[i] !== b[i]) return false;\n    }\n    return true;\n}\n\nfunction setArray(a, b) {\n    for (let i = 0, l = a.length; i < l; i++) {\n        a[i] = b[i];\n    }\n}\n\nlet warnCount = 0;\nfunction warn(message) {\n    if (warnCount > 100) return;\n    console.warn(message);\n    warnCount++;\n    if (warnCount > 100) console.warn('More than 100 program warnings - stopping logs.');\n}\n","import { Vec3 } from '../math/Vec3.js';\n\n// TODO: Handle context loss https://www.khronos.org/webgl/wiki/HandlingContextLost\n\n// Not automatic - devs to use these methods manually\n// gl.colorMask( colorMask, colorMask, colorMask, colorMask );\n// gl.clearColor( r, g, b, a );\n// gl.stencilMask( stencilMask );\n// gl.stencilFunc( stencilFunc, stencilRef, stencilMask );\n// gl.stencilOp( stencilFail, stencilZFail, stencilZPass );\n// gl.clearStencil( stencil );\n\nconst tempVec3 = /* @__PURE__ */ new Vec3();\nlet ID = 1;\n\nexport class Renderer {\n    constructor({\n        canvas = document.createElement('canvas'),\n        width = 300,\n        height = 150,\n        dpr = 1,\n        alpha = false,\n        depth = true,\n        stencil = false,\n        antialias = false,\n        premultipliedAlpha = false,\n        preserveDrawingBuffer = false,\n        powerPreference = 'default',\n        autoClear = true,\n        webgl = 2,\n    } = {}) {\n        const attributes = { alpha, depth, stencil, antialias, premultipliedAlpha, preserveDrawingBuffer, powerPreference };\n        this.dpr = dpr;\n        this.alpha = alpha;\n        this.color = true;\n        this.depth = depth;\n        this.stencil = stencil;\n        this.premultipliedAlpha = premultipliedAlpha;\n        this.autoClear = autoClear;\n        this.id = ID++;\n\n        // Attempt WebGL2 unless forced to 1, if not supported fallback to WebGL1\n        if (webgl === 2) this.gl = canvas.getContext('webgl2', attributes);\n        this.isWebgl2 = !!this.gl;\n        if (!this.gl) this.gl = canvas.getContext('webgl', attributes);\n        if (!this.gl) console.error('unable to create webgl context');\n\n        // Attach renderer to gl so that all classes have access to internal state functions\n        this.gl.renderer = this;\n\n        // initialise size values\n        this.setSize(width, height);\n\n        // gl state stores to avoid redundant calls on methods used internally\n        this.state = {};\n        this.state.blendFunc = { src: this.gl.ONE, dst: this.gl.ZERO };\n        this.state.blendEquation = { modeRGB: this.gl.FUNC_ADD };\n        this.state.cullFace = false;\n        this.state.frontFace = this.gl.CCW;\n        this.state.depthMask = true;\n        this.state.depthFunc = this.gl.LEQUAL;\n        this.state.premultiplyAlpha = false;\n        this.state.flipY = false;\n        this.state.unpackAlignment = 4;\n        this.state.framebuffer = null;\n        this.state.viewport = { x: 0, y: 0, width: null, height: null };\n        this.state.textureUnits = [];\n        this.state.activeTextureUnit = 0;\n        this.state.boundBuffer = null;\n        this.state.uniformLocations = new Map();\n        this.state.currentProgram = null;\n\n        // store requested extensions\n        this.extensions = {};\n\n        // Initialise extra format types\n        if (this.isWebgl2) {\n            this.getExtension('EXT_color_buffer_float');\n            this.getExtension('OES_texture_float_linear');\n        } else {\n            this.getExtension('OES_texture_float');\n            this.getExtension('OES_texture_float_linear');\n            this.getExtension('OES_texture_half_float');\n            this.getExtension('OES_texture_half_float_linear');\n            this.getExtension('OES_element_index_uint');\n            this.getExtension('OES_standard_derivatives');\n            this.getExtension('EXT_sRGB');\n            this.getExtension('WEBGL_depth_texture');\n            this.getExtension('WEBGL_draw_buffers');\n        }\n        this.getExtension('WEBGL_compressed_texture_astc');\n        this.getExtension('EXT_texture_compression_bptc');\n        this.getExtension('WEBGL_compressed_texture_s3tc');\n        this.getExtension('WEBGL_compressed_texture_etc1');\n        this.getExtension('WEBGL_compressed_texture_pvrtc');\n        this.getExtension('WEBKIT_WEBGL_compressed_texture_pvrtc');\n\n        // Create method aliases using extension (WebGL1) or native if available (WebGL2)\n        this.vertexAttribDivisor = this.getExtension('ANGLE_instanced_arrays', 'vertexAttribDivisor', 'vertexAttribDivisorANGLE');\n        this.drawArraysInstanced = this.getExtension('ANGLE_instanced_arrays', 'drawArraysInstanced', 'drawArraysInstancedANGLE');\n        this.drawElementsInstanced = this.getExtension('ANGLE_instanced_arrays', 'drawElementsInstanced', 'drawElementsInstancedANGLE');\n        this.createVertexArray = this.getExtension('OES_vertex_array_object', 'createVertexArray', 'createVertexArrayOES');\n        this.bindVertexArray = this.getExtension('OES_vertex_array_object', 'bindVertexArray', 'bindVertexArrayOES');\n        this.deleteVertexArray = this.getExtension('OES_vertex_array_object', 'deleteVertexArray', 'deleteVertexArrayOES');\n        this.drawBuffers = this.getExtension('WEBGL_draw_buffers', 'drawBuffers', 'drawBuffersWEBGL');\n\n        // Store device parameters\n        this.parameters = {};\n        this.parameters.maxTextureUnits = this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS);\n        this.parameters.maxAnisotropy = this.getExtension('EXT_texture_filter_anisotropic')\n            ? this.gl.getParameter(this.getExtension('EXT_texture_filter_anisotropic').MAX_TEXTURE_MAX_ANISOTROPY_EXT)\n            : 0;\n    }\n\n    setSize(width, height) {\n        this.width = width;\n        this.height = height;\n\n        this.gl.canvas.width = width * this.dpr;\n        this.gl.canvas.height = height * this.dpr;\n\n        if (!this.gl.canvas.style) return;\n        Object.assign(this.gl.canvas.style, {\n            width: width + 'px',\n            height: height + 'px',\n        });\n    }\n\n    setViewport(width, height, x = 0, y = 0) {\n        if (this.state.viewport.width === width && this.state.viewport.height === height) return;\n        this.state.viewport.width = width;\n        this.state.viewport.height = height;\n        this.state.viewport.x = x;\n        this.state.viewport.y = y;\n        this.gl.viewport(x, y, width, height);\n    }\n\n    setScissor(width, height, x = 0, y = 0) {\n        this.gl.scissor(x, y, width, height);\n    }\n\n    enable(id) {\n        if (this.state[id] === true) return;\n        this.gl.enable(id);\n        this.state[id] = true;\n    }\n\n    disable(id) {\n        if (this.state[id] === false) return;\n        this.gl.disable(id);\n        this.state[id] = false;\n    }\n\n    setBlendFunc(src, dst, srcAlpha, dstAlpha) {\n        if (\n            this.state.blendFunc.src === src &&\n            this.state.blendFunc.dst === dst &&\n            this.state.blendFunc.srcAlpha === srcAlpha &&\n            this.state.blendFunc.dstAlpha === dstAlpha\n        )\n            return;\n        this.state.blendFunc.src = src;\n        this.state.blendFunc.dst = dst;\n        this.state.blendFunc.srcAlpha = srcAlpha;\n        this.state.blendFunc.dstAlpha = dstAlpha;\n        if (srcAlpha !== undefined) this.gl.blendFuncSeparate(src, dst, srcAlpha, dstAlpha);\n        else this.gl.blendFunc(src, dst);\n    }\n\n    setBlendEquation(modeRGB, modeAlpha) {\n        modeRGB = modeRGB || this.gl.FUNC_ADD;\n        if (this.state.blendEquation.modeRGB === modeRGB && this.state.blendEquation.modeAlpha === modeAlpha) return;\n        this.state.blendEquation.modeRGB = modeRGB;\n        this.state.blendEquation.modeAlpha = modeAlpha;\n        if (modeAlpha !== undefined) this.gl.blendEquationSeparate(modeRGB, modeAlpha);\n        else this.gl.blendEquation(modeRGB);\n    }\n\n    setCullFace(value) {\n        if (this.state.cullFace === value) return;\n        this.state.cullFace = value;\n        this.gl.cullFace(value);\n    }\n\n    setFrontFace(value) {\n        if (this.state.frontFace === value) return;\n        this.state.frontFace = value;\n        this.gl.frontFace(value);\n    }\n\n    setDepthMask(value) {\n        if (this.state.depthMask === value) return;\n        this.state.depthMask = value;\n        this.gl.depthMask(value);\n    }\n\n    setDepthFunc(value) {\n        if (this.state.depthFunc === value) return;\n        this.state.depthFunc = value;\n        this.gl.depthFunc(value);\n    }\n\n    setStencilMask(value) {\n        if(this.state.stencilMask === value) return;\n        this.state.stencilMask = value;\n        this.gl.stencilMask(value)\n    }\n\n    setStencilFunc(func, ref, mask) {\n\n        if((this.state.stencilFunc === func) &&\n            (this.state.stencilRef === ref) &&\n            (this.state.stencilFuncMask === mask)\n        ) return;\n\n        this.state.stencilFunc = func || this.gl.ALWAYS;\n        this.state.stencilRef = ref || 0;\n        this.state.stencilFuncMask = mask || 0;\n\n        this.gl.stencilFunc(func || this.gl.ALWAYS, ref || 0, mask || 0);\n    }\n\n    setStencilOp(stencilFail, depthFail, depthPass) {\n\n        if(this.state.stencilFail === stencilFail &&\n            this.state.stencilDepthFail === depthFail &&\n            this.state.stencilDepthPass === depthPass\n        ) return;\n\n        this.state.stencilFail = stencilFail;\n        this.state.stencilDepthFail = depthFail;\n        this.state.stencilDepthPass = depthPass;\n        \n        this.gl.stencilOp(stencilFail, depthFail, depthPass);\n        \n    }\n\n    activeTexture(value) {\n        if (this.state.activeTextureUnit === value) return;\n        this.state.activeTextureUnit = value;\n        this.gl.activeTexture(this.gl.TEXTURE0 + value);\n    }\n\n    bindFramebuffer({ target = this.gl.FRAMEBUFFER, buffer = null } = {}) {\n        if (this.state.framebuffer === buffer) return;\n        this.state.framebuffer = buffer;\n        this.gl.bindFramebuffer(target, buffer);\n    }\n\n    getExtension(extension, webgl2Func, extFunc) {\n        // if webgl2 function supported, return func bound to gl context\n        if (webgl2Func && this.gl[webgl2Func]) return this.gl[webgl2Func].bind(this.gl);\n\n        // fetch extension once only\n        if (!this.extensions[extension]) {\n            this.extensions[extension] = this.gl.getExtension(extension);\n        }\n\n        // return extension if no function requested\n        if (!webgl2Func) return this.extensions[extension];\n\n        // Return null if extension not supported\n        if (!this.extensions[extension]) return null;\n\n        // return extension function, bound to extension\n        return this.extensions[extension][extFunc].bind(this.extensions[extension]);\n    }\n\n    sortOpaque(a, b) {\n        if (a.renderOrder !== b.renderOrder) {\n            return a.renderOrder - b.renderOrder;\n        } else if (a.program.id !== b.program.id) {\n            return a.program.id - b.program.id;\n        } else if (a.zDepth !== b.zDepth) {\n            return a.zDepth - b.zDepth;\n        } else {\n            return b.id - a.id;\n        }\n    }\n\n    sortTransparent(a, b) {\n        if (a.renderOrder !== b.renderOrder) {\n            return a.renderOrder - b.renderOrder;\n        }\n        if (a.zDepth !== b.zDepth) {\n            return b.zDepth - a.zDepth;\n        } else {\n            return b.id - a.id;\n        }\n    }\n\n    sortUI(a, b) {\n        if (a.renderOrder !== b.renderOrder) {\n            return a.renderOrder - b.renderOrder;\n        } else if (a.program.id !== b.program.id) {\n            return a.program.id - b.program.id;\n        } else {\n            return b.id - a.id;\n        }\n    }\n\n    getRenderList({ scene, camera, frustumCull, sort }) {\n        let renderList = [];\n\n        if (camera && frustumCull) camera.updateFrustum();\n\n        // Get visible\n        scene.traverse((node) => {\n            if (!node.visible) return true;\n            if (!node.draw) return;\n\n            if (frustumCull && node.frustumCulled && camera) {\n                if (!camera.frustumIntersectsMesh(node)) return;\n            }\n\n            renderList.push(node);\n        });\n\n        if (sort) {\n            const opaque = [];\n            const transparent = []; // depthTest true\n            const ui = []; // depthTest false\n\n            renderList.forEach((node) => {\n                // Split into the 3 render groups\n                if (!node.program.transparent) {\n                    opaque.push(node);\n                } else if (node.program.depthTest) {\n                    transparent.push(node);\n                } else {\n                    ui.push(node);\n                }\n\n                node.zDepth = 0;\n\n                // Only calculate z-depth if renderOrder unset and depthTest is true\n                if (node.renderOrder !== 0 || !node.program.depthTest || !camera) return;\n\n                // update z-depth\n                node.worldMatrix.getTranslation(tempVec3);\n                tempVec3.applyMatrix4(camera.projectionViewMatrix);\n                node.zDepth = tempVec3.z;\n            });\n\n            opaque.sort(this.sortOpaque);\n            transparent.sort(this.sortTransparent);\n            ui.sort(this.sortUI);\n\n            renderList = opaque.concat(transparent, ui);\n        }\n\n        return renderList;\n    }\n\n    render({ scene, camera, target = null, update = true, sort = true, frustumCull = true, clear }) {\n        if (target === null) {\n            // make sure no render target bound so draws to canvas\n            this.bindFramebuffer();\n            this.setViewport(this.width * this.dpr, this.height * this.dpr);\n        } else {\n            // bind supplied render target and update viewport\n            this.bindFramebuffer(target);\n            this.setViewport(target.width, target.height);\n        }\n\n        if (clear || (this.autoClear && clear !== false)) {\n            // Ensure depth buffer writing is enabled so it can be cleared\n            if (this.depth && (!target || target.depth)) {\n                this.enable(this.gl.DEPTH_TEST);\n                this.setDepthMask(true);\n            }\n\n            // Same for stencil\n            if(this.stencil || (!target || target.stencil)) {\n                this.enable(this.gl.STENCIL_TEST);\n                this.setStencilMask(0xff)\n            }\n\n            this.gl.clear(\n                (this.color ? this.gl.COLOR_BUFFER_BIT : 0) |\n                    (this.depth ? this.gl.DEPTH_BUFFER_BIT : 0) |\n                    (this.stencil ? this.gl.STENCIL_BUFFER_BIT : 0)\n            );\n        }\n\n        // updates all scene graph matrices\n        if (update) scene.updateMatrixWorld();\n\n        // Update camera separately, in case not in scene graph\n        if (camera) camera.updateMatrixWorld();\n\n        // Get render list - entails culling and sorting\n        const renderList = this.getRenderList({ scene, camera, frustumCull, sort });\n\n        renderList.forEach((node) => {\n            node.draw({ camera });\n        });\n    }\n}\n","const EPSILON = 0.000001;\n\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the source vector\n * @returns {vec4} out\n */\nexport function copy(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n}\n\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\nexport function set(out, x, y, z, w) {\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    out[3] = w;\n    return out;\n}\n\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nexport function add(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    out[3] = a[3] + b[3];\n    return out;\n}\n\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\nexport function scale(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    out[3] = a[3] * b;\n    return out;\n}\n\n/**\n * Calculates the length of a vec4\n *\n * @param {vec4} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport function length(a) {\n    let x = a[0];\n    let y = a[1];\n    let z = a[2];\n    let w = a[3];\n    return Math.sqrt(x * x + y * y + z * z + w * w);\n}\n\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a vector to normalize\n * @returns {vec4} out\n */\nexport function normalize(out, a) {\n    let x = a[0];\n    let y = a[1];\n    let z = a[2];\n    let w = a[3];\n    let len = x * x + y * y + z * z + w * w;\n    if (len > 0) {\n        len = 1 / Math.sqrt(len);\n    }\n    out[0] = x * len;\n    out[1] = y * len;\n    out[2] = z * len;\n    out[3] = w * len;\n    return out;\n}\n\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {Number} dot product of a and b\n */\nexport function dot(a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec4} out\n */\nexport function lerp(out, a, b, t) {\n    let ax = a[0];\n    let ay = a[1];\n    let az = a[2];\n    let aw = a[3];\n    out[0] = ax + t * (b[0] - ax);\n    out[1] = ay + t * (b[1] - ay);\n    out[2] = az + t * (b[2] - az);\n    out[3] = aw + t * (b[3] - aw);\n    return out;\n}\n","import * as vec4 from './Vec4Func.js';\n\n/**\n * Set a quat to the identity quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\nexport function identity(out) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    return out;\n}\n\n/**\n * Sets a quat from the given angle and rotation axis,\n * then returns it.\n *\n * @param {quat} out the receiving quaternion\n * @param {vec3} axis the axis around which to rotate\n * @param {Number} rad the angle in radians\n * @returns {quat} out\n **/\nexport function setAxisAngle(out, axis, rad) {\n    rad = rad * 0.5;\n    let s = Math.sin(rad);\n    out[0] = s * axis[0];\n    out[1] = s * axis[1];\n    out[2] = s * axis[2];\n    out[3] = Math.cos(rad);\n    return out;\n}\n\n/**\n * Multiplies two quats\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @returns {quat} out\n */\nexport function multiply(out, a, b) {\n    let ax = a[0],\n        ay = a[1],\n        az = a[2],\n        aw = a[3];\n    let bx = b[0],\n        by = b[1],\n        bz = b[2],\n        bw = b[3];\n\n    out[0] = ax * bw + aw * bx + ay * bz - az * by;\n    out[1] = ay * bw + aw * by + az * bx - ax * bz;\n    out[2] = az * bw + aw * bz + ax * by - ay * bx;\n    out[3] = aw * bw - ax * bx - ay * by - az * bz;\n    return out;\n}\n\n/**\n * Rotates a quaternion by the given angle about the X axis\n *\n * @param {quat} out quat receiving operation result\n * @param {quat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nexport function rotateX(out, a, rad) {\n    rad *= 0.5;\n\n    let ax = a[0],\n        ay = a[1],\n        az = a[2],\n        aw = a[3];\n    let bx = Math.sin(rad),\n        bw = Math.cos(rad);\n\n    out[0] = ax * bw + aw * bx;\n    out[1] = ay * bw + az * bx;\n    out[2] = az * bw - ay * bx;\n    out[3] = aw * bw - ax * bx;\n    return out;\n}\n\n/**\n * Rotates a quaternion by the given angle about the Y axis\n *\n * @param {quat} out quat receiving operation result\n * @param {quat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nexport function rotateY(out, a, rad) {\n    rad *= 0.5;\n\n    let ax = a[0],\n        ay = a[1],\n        az = a[2],\n        aw = a[3];\n    let by = Math.sin(rad),\n        bw = Math.cos(rad);\n\n    out[0] = ax * bw - az * by;\n    out[1] = ay * bw + aw * by;\n    out[2] = az * bw + ax * by;\n    out[3] = aw * bw - ay * by;\n    return out;\n}\n\n/**\n * Rotates a quaternion by the given angle about the Z axis\n *\n * @param {quat} out quat receiving operation result\n * @param {quat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nexport function rotateZ(out, a, rad) {\n    rad *= 0.5;\n\n    let ax = a[0],\n        ay = a[1],\n        az = a[2],\n        aw = a[3];\n    let bz = Math.sin(rad),\n        bw = Math.cos(rad);\n\n    out[0] = ax * bw + ay * bz;\n    out[1] = ay * bw - ax * bz;\n    out[2] = az * bw + aw * bz;\n    out[3] = aw * bw - az * bz;\n    return out;\n}\n\n/**\n * Performs a spherical linear interpolation between two quat\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {quat} out\n */\nexport function slerp(out, a, b, t) {\n    // benchmarks:\n    //    http://jsperf.com/quaternion-slerp-implementations\n    let ax = a[0],\n        ay = a[1],\n        az = a[2],\n        aw = a[3];\n    let bx = b[0],\n        by = b[1],\n        bz = b[2],\n        bw = b[3];\n\n    let omega, cosom, sinom, scale0, scale1;\n\n    // calc cosine\n    cosom = ax * bx + ay * by + az * bz + aw * bw;\n    // adjust signs (if necessary)\n    if (cosom < 0.0) {\n        cosom = -cosom;\n        bx = -bx;\n        by = -by;\n        bz = -bz;\n        bw = -bw;\n    }\n    // calculate coefficients\n    if (1.0 - cosom > 0.000001) {\n        // standard case (slerp)\n        omega = Math.acos(cosom);\n        sinom = Math.sin(omega);\n        scale0 = Math.sin((1.0 - t) * omega) / sinom;\n        scale1 = Math.sin(t * omega) / sinom;\n    } else {\n        // \"from\" and \"to\" quaternions are very close\n        //  ... so we can do a linear interpolation\n        scale0 = 1.0 - t;\n        scale1 = t;\n    }\n    // calculate final values\n    out[0] = scale0 * ax + scale1 * bx;\n    out[1] = scale0 * ay + scale1 * by;\n    out[2] = scale0 * az + scale1 * bz;\n    out[3] = scale0 * aw + scale1 * bw;\n\n    return out;\n}\n\n/**\n * Calculates the inverse of a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a quat to calculate inverse of\n * @returns {quat} out\n */\nexport function invert(out, a) {\n    let a0 = a[0],\n        a1 = a[1],\n        a2 = a[2],\n        a3 = a[3];\n    let dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n    let invDot = dot ? 1.0 / dot : 0;\n\n    // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n    out[0] = -a0 * invDot;\n    out[1] = -a1 * invDot;\n    out[2] = -a2 * invDot;\n    out[3] = a3 * invDot;\n    return out;\n}\n\n/**\n * Calculates the conjugate of a quat\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a quat to calculate conjugate of\n * @returns {quat} out\n */\nexport function conjugate(out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    out[2] = -a[2];\n    out[3] = a[3];\n    return out;\n}\n\n/**\n * Creates a quaternion from the given 3x3 rotation matrix.\n *\n * NOTE: The resultant quaternion is not normalized, so you should be sure\n * to renormalize the quaternion yourself where necessary.\n *\n * @param {quat} out the receiving quaternion\n * @param {mat3} m rotation matrix\n * @returns {quat} out\n * @function\n */\nexport function fromMat3(out, m) {\n    // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n    // article \"Quaternion Calculus and Fast Animation\".\n    let fTrace = m[0] + m[4] + m[8];\n    let fRoot;\n\n    if (fTrace > 0.0) {\n        // |w| > 1/2, may as well choose w > 1/2\n        fRoot = Math.sqrt(fTrace + 1.0); // 2w\n        out[3] = 0.5 * fRoot;\n        fRoot = 0.5 / fRoot; // 1/(4w)\n        out[0] = (m[5] - m[7]) * fRoot;\n        out[1] = (m[6] - m[2]) * fRoot;\n        out[2] = (m[1] - m[3]) * fRoot;\n    } else {\n        // |w| <= 1/2\n        let i = 0;\n        if (m[4] > m[0]) i = 1;\n        if (m[8] > m[i * 3 + i]) i = 2;\n        let j = (i + 1) % 3;\n        let k = (i + 2) % 3;\n\n        fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n        out[i] = 0.5 * fRoot;\n        fRoot = 0.5 / fRoot;\n        out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n        out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n        out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n    }\n\n    return out;\n}\n\n/**\n * Creates a quaternion from the given euler angle x, y, z.\n *\n * @param {quat} out the receiving quaternion\n * @param {vec3} euler Angles to rotate around each axis in degrees.\n * @param {String} order detailing order of operations. Default 'XYZ'.\n * @returns {quat} out\n * @function\n */\nexport function fromEuler(out, euler, order = 'YXZ') {\n    let sx = Math.sin(euler[0] * 0.5);\n    let cx = Math.cos(euler[0] * 0.5);\n    let sy = Math.sin(euler[1] * 0.5);\n    let cy = Math.cos(euler[1] * 0.5);\n    let sz = Math.sin(euler[2] * 0.5);\n    let cz = Math.cos(euler[2] * 0.5);\n\n    if (order === 'XYZ') {\n        out[0] = sx * cy * cz + cx * sy * sz;\n        out[1] = cx * sy * cz - sx * cy * sz;\n        out[2] = cx * cy * sz + sx * sy * cz;\n        out[3] = cx * cy * cz - sx * sy * sz;\n    } else if (order === 'YXZ') {\n        out[0] = sx * cy * cz + cx * sy * sz;\n        out[1] = cx * sy * cz - sx * cy * sz;\n        out[2] = cx * cy * sz - sx * sy * cz;\n        out[3] = cx * cy * cz + sx * sy * sz;\n    } else if (order === 'ZXY') {\n        out[0] = sx * cy * cz - cx * sy * sz;\n        out[1] = cx * sy * cz + sx * cy * sz;\n        out[2] = cx * cy * sz + sx * sy * cz;\n        out[3] = cx * cy * cz - sx * sy * sz;\n    } else if (order === 'ZYX') {\n        out[0] = sx * cy * cz - cx * sy * sz;\n        out[1] = cx * sy * cz + sx * cy * sz;\n        out[2] = cx * cy * sz - sx * sy * cz;\n        out[3] = cx * cy * cz + sx * sy * sz;\n    } else if (order === 'YZX') {\n        out[0] = sx * cy * cz + cx * sy * sz;\n        out[1] = cx * sy * cz + sx * cy * sz;\n        out[2] = cx * cy * sz - sx * sy * cz;\n        out[3] = cx * cy * cz - sx * sy * sz;\n    } else if (order === 'XZY') {\n        out[0] = sx * cy * cz - cx * sy * sz;\n        out[1] = cx * sy * cz - sx * cy * sz;\n        out[2] = cx * cy * sz + sx * sy * cz;\n        out[3] = cx * cy * cz + sx * sy * sz;\n    }\n\n    return out;\n}\n\n/**\n * Copy the values from one quat to another\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the source quaternion\n * @returns {quat} out\n * @function\n */\nexport const copy = vec4.copy;\n\n/**\n * Set the components of a quat to the given values\n *\n * @param {quat} out the receiving quaternion\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} out\n * @function\n */\nexport const set = vec4.set;\n\n/**\n * Adds two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @returns {quat} out\n * @function\n */\nexport const add = vec4.add;\n\n/**\n * Scales a quat by a scalar number\n *\n * @param {quat} out the receiving vector\n * @param {quat} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {quat} out\n * @function\n */\nexport const scale = vec4.scale;\n\n/**\n * Calculates the dot product of two quat's\n *\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\nexport const dot = vec4.dot;\n\n/**\n * Performs a linear interpolation between two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {quat} out\n * @function\n */\nexport const lerp = vec4.lerp;\n\n/**\n * Calculates the length of a quat\n *\n * @param {quat} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport const length = vec4.length;\n\n/**\n * Normalize a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a quaternion to normalize\n * @returns {quat} out\n * @function\n */\nexport const normalize = vec4.normalize;\n","import * as QuatFunc from './functions/QuatFunc.js';\n\nexport class Quat extends Array {\n    constructor(x = 0, y = 0, z = 0, w = 1) {\n        super(x, y, z, w);\n        this.onChange = () => {};\n\n        // Keep reference to proxy target to avoid triggering onChange internally\n        this._target = this;\n\n        // Return a proxy to trigger onChange when array elements are edited directly\n        const triggerProps = ['0', '1', '2', '3'];\n        return new Proxy(this, {\n            set(target, property) {\n                const success = Reflect.set(...arguments);\n                if (success && triggerProps.includes(property)) target.onChange();\n                return success;\n            },\n        });\n    }\n\n    get x() {\n        return this[0];\n    }\n\n    get y() {\n        return this[1];\n    }\n\n    get z() {\n        return this[2];\n    }\n\n    get w() {\n        return this[3];\n    }\n\n    set x(v) {\n        this._target[0] = v;\n        this.onChange();\n    }\n\n    set y(v) {\n        this._target[1] = v;\n        this.onChange();\n    }\n\n    set z(v) {\n        this._target[2] = v;\n        this.onChange();\n    }\n\n    set w(v) {\n        this._target[3] = v;\n        this.onChange();\n    }\n\n    identity() {\n        QuatFunc.identity(this._target);\n        this.onChange();\n        return this;\n    }\n\n    set(x, y, z, w) {\n        if (x.length) return this.copy(x);\n        QuatFunc.set(this._target, x, y, z, w);\n        this.onChange();\n        return this;\n    }\n\n    rotateX(a) {\n        QuatFunc.rotateX(this._target, this._target, a);\n        this.onChange();\n        return this;\n    }\n\n    rotateY(a) {\n        QuatFunc.rotateY(this._target, this._target, a);\n        this.onChange();\n        return this;\n    }\n\n    rotateZ(a) {\n        QuatFunc.rotateZ(this._target, this._target, a);\n        this.onChange();\n        return this;\n    }\n\n    inverse(q = this._target) {\n        QuatFunc.invert(this._target, q);\n        this.onChange();\n        return this;\n    }\n\n    conjugate(q = this._target) {\n        QuatFunc.conjugate(this._target, q);\n        this.onChange();\n        return this;\n    }\n\n    copy(q) {\n        QuatFunc.copy(this._target, q);\n        this.onChange();\n        return this;\n    }\n\n    normalize(q = this._target) {\n        QuatFunc.normalize(this._target, q);\n        this.onChange();\n        return this;\n    }\n\n    multiply(qA, qB) {\n        if (qB) {\n            QuatFunc.multiply(this._target, qA, qB);\n        } else {\n            QuatFunc.multiply(this._target, this._target, qA);\n        }\n        this.onChange();\n        return this;\n    }\n\n    dot(v) {\n        return QuatFunc.dot(this._target, v);\n    }\n\n    fromMatrix3(matrix3) {\n        QuatFunc.fromMat3(this._target, matrix3);\n        this.onChange();\n        return this;\n    }\n\n    fromEuler(euler, isInternal) {\n        QuatFunc.fromEuler(this._target, euler, euler.order);\n        // Avoid infinite recursion\n        if (!isInternal) this.onChange();\n        return this;\n    }\n\n    fromAxisAngle(axis, a) {\n        QuatFunc.setAxisAngle(this._target, axis, a);\n        this.onChange();\n        return this;\n    }\n\n    slerp(q, t) {\n        QuatFunc.slerp(this._target, this._target, q, t);\n        this.onChange();\n        return this;\n    }\n\n    fromArray(a, o = 0) {\n        this._target[0] = a[o];\n        this._target[1] = a[o + 1];\n        this._target[2] = a[o + 2];\n        this._target[3] = a[o + 3];\n        this.onChange();\n        return this;\n    }\n\n    toArray(a = [], o = 0) {\n        a[o] = this[0];\n        a[o + 1] = this[1];\n        a[o + 2] = this[2];\n        a[o + 3] = this[3];\n        return a;\n    }\n}\n","import * as vec3 from './Vec3Func.js';\n\nconst EPSILON = 0.000001;\n\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nexport function copy(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n}\n\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n    out[0] = m00;\n    out[1] = m01;\n    out[2] = m02;\n    out[3] = m03;\n    out[4] = m10;\n    out[5] = m11;\n    out[6] = m12;\n    out[7] = m13;\n    out[8] = m20;\n    out[9] = m21;\n    out[10] = m22;\n    out[11] = m23;\n    out[12] = m30;\n    out[13] = m31;\n    out[14] = m32;\n    out[15] = m33;\n    return out;\n}\n\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\nexport function identity(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nexport function transpose(out, a) {\n    // If we are transposing ourselves we can skip a few steps but have to cache some values\n    if (out === a) {\n        let a01 = a[1],\n            a02 = a[2],\n            a03 = a[3];\n        let a12 = a[6],\n            a13 = a[7];\n        let a23 = a[11];\n\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a01;\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a02;\n        out[9] = a12;\n        out[11] = a[14];\n        out[12] = a03;\n        out[13] = a13;\n        out[14] = a23;\n    } else {\n        out[0] = a[0];\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a[1];\n        out[5] = a[5];\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a[2];\n        out[9] = a[6];\n        out[10] = a[10];\n        out[11] = a[14];\n        out[12] = a[3];\n        out[13] = a[7];\n        out[14] = a[11];\n        out[15] = a[15];\n    }\n\n    return out;\n}\n\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nexport function invert(out, a) {\n    let a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    let a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7];\n    let a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11];\n    let a30 = a[12],\n        a31 = a[13],\n        a32 = a[14],\n        a33 = a[15];\n\n    let b00 = a00 * a11 - a01 * a10;\n    let b01 = a00 * a12 - a02 * a10;\n    let b02 = a00 * a13 - a03 * a10;\n    let b03 = a01 * a12 - a02 * a11;\n    let b04 = a01 * a13 - a03 * a11;\n    let b05 = a02 * a13 - a03 * a12;\n    let b06 = a20 * a31 - a21 * a30;\n    let b07 = a20 * a32 - a22 * a30;\n    let b08 = a20 * a33 - a23 * a30;\n    let b09 = a21 * a32 - a22 * a31;\n    let b10 = a21 * a33 - a23 * a31;\n    let b11 = a22 * a33 - a23 * a32;\n\n    // Calculate the determinant\n    let det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n\n    return out;\n}\n\n/**\n * Calculates the determinant of a mat4\n *\n * @param {mat4} a the source matrix\n * @returns {Number} determinant of a\n */\nexport function determinant(a) {\n    let a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    let a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7];\n    let a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11];\n    let a30 = a[12],\n        a31 = a[13],\n        a32 = a[14],\n        a33 = a[15];\n\n    let b00 = a00 * a11 - a01 * a10;\n    let b01 = a00 * a12 - a02 * a10;\n    let b02 = a00 * a13 - a03 * a10;\n    let b03 = a01 * a12 - a02 * a11;\n    let b04 = a01 * a13 - a03 * a11;\n    let b05 = a02 * a13 - a03 * a12;\n    let b06 = a20 * a31 - a21 * a30;\n    let b07 = a20 * a32 - a22 * a30;\n    let b08 = a20 * a33 - a23 * a30;\n    let b09 = a21 * a32 - a22 * a31;\n    let b10 = a21 * a33 - a23 * a31;\n    let b11 = a22 * a33 - a23 * a32;\n\n    // Calculate the determinant\n    return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nexport function multiply(out, a, b) {\n    let a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    let a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7];\n    let a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11];\n    let a30 = a[12],\n        a31 = a[13],\n        a32 = a[14],\n        a33 = a[15];\n\n    // Cache only the current line of the second matrix\n    let b0 = b[0],\n        b1 = b[1],\n        b2 = b[2],\n        b3 = b[3];\n    out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n\n    b0 = b[4];\n    b1 = b[5];\n    b2 = b[6];\n    b3 = b[7];\n    out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n\n    b0 = b[8];\n    b1 = b[9];\n    b2 = b[10];\n    b3 = b[11];\n    out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n\n    b0 = b[12];\n    b1 = b[13];\n    b2 = b[14];\n    b3 = b[15];\n    out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n    return out;\n}\n\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to translate\n * @param {vec3} v vector to translate by\n * @returns {mat4} out\n */\nexport function translate(out, a, v) {\n    let x = v[0],\n        y = v[1],\n        z = v[2];\n    let a00, a01, a02, a03;\n    let a10, a11, a12, a13;\n    let a20, a21, a22, a23;\n\n    if (a === out) {\n        out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n        out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n        out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n        out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n    } else {\n        a00 = a[0];\n        a01 = a[1];\n        a02 = a[2];\n        a03 = a[3];\n        a10 = a[4];\n        a11 = a[5];\n        a12 = a[6];\n        a13 = a[7];\n        a20 = a[8];\n        a21 = a[9];\n        a22 = a[10];\n        a23 = a[11];\n\n        out[0] = a00;\n        out[1] = a01;\n        out[2] = a02;\n        out[3] = a03;\n        out[4] = a10;\n        out[5] = a11;\n        out[6] = a12;\n        out[7] = a13;\n        out[8] = a20;\n        out[9] = a21;\n        out[10] = a22;\n        out[11] = a23;\n\n        out[12] = a00 * x + a10 * y + a20 * z + a[12];\n        out[13] = a01 * x + a11 * y + a21 * z + a[13];\n        out[14] = a02 * x + a12 * y + a22 * z + a[14];\n        out[15] = a03 * x + a13 * y + a23 * z + a[15];\n    }\n\n    return out;\n}\n\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to scale\n * @param {vec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\nexport function scale(out, a, v) {\n    let x = v[0],\n        y = v[1],\n        z = v[2];\n\n    out[0] = a[0] * x;\n    out[1] = a[1] * x;\n    out[2] = a[2] * x;\n    out[3] = a[3] * x;\n    out[4] = a[4] * y;\n    out[5] = a[5] * y;\n    out[6] = a[6] * y;\n    out[7] = a[7] * y;\n    out[8] = a[8] * z;\n    out[9] = a[9] * z;\n    out[10] = a[10] * z;\n    out[11] = a[11] * z;\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n}\n\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {vec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nexport function rotate(out, a, rad, axis) {\n    let x = axis[0],\n        y = axis[1],\n        z = axis[2];\n    let len = Math.hypot(x, y, z);\n    let s, c, t;\n    let a00, a01, a02, a03;\n    let a10, a11, a12, a13;\n    let a20, a21, a22, a23;\n    let b00, b01, b02;\n    let b10, b11, b12;\n    let b20, b21, b22;\n\n    if (Math.abs(len) < EPSILON) {\n        return null;\n    }\n\n    len = 1 / len;\n    x *= len;\n    y *= len;\n    z *= len;\n\n    s = Math.sin(rad);\n    c = Math.cos(rad);\n    t = 1 - c;\n\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n\n    // Construct the elements of the rotation matrix\n    b00 = x * x * t + c;\n    b01 = y * x * t + z * s;\n    b02 = z * x * t - y * s;\n    b10 = x * y * t - z * s;\n    b11 = y * y * t + c;\n    b12 = z * y * t + x * s;\n    b20 = x * z * t + y * s;\n    b21 = y * z * t - x * s;\n    b22 = z * z * t + c;\n\n    // Perform rotation-specific matrix multiplication\n    out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n    out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n    out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n    out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n    out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n    out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n    out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n    out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n    out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n    out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n    out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n    out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n    if (a !== out) {\n        // If the source and destination differ, copy the unchanged last row\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n    return out;\n}\n\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {mat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\nexport function getTranslation(out, mat) {\n    out[0] = mat[12];\n    out[1] = mat[13];\n    out[2] = mat[14];\n\n    return out;\n}\n\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {mat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\nexport function getScaling(out, mat) {\n    let m11 = mat[0];\n    let m12 = mat[1];\n    let m13 = mat[2];\n    let m21 = mat[4];\n    let m22 = mat[5];\n    let m23 = mat[6];\n    let m31 = mat[8];\n    let m32 = mat[9];\n    let m33 = mat[10];\n\n    out[0] = Math.hypot(m11, m12, m13);\n    out[1] = Math.hypot(m21, m22, m23);\n    out[2] = Math.hypot(m31, m32, m33);\n\n    return out;\n}\n\nexport function getMaxScaleOnAxis(mat) {\n    let m11 = mat[0];\n    let m12 = mat[1];\n    let m13 = mat[2];\n    let m21 = mat[4];\n    let m22 = mat[5];\n    let m23 = mat[6];\n    let m31 = mat[8];\n    let m32 = mat[9];\n    let m33 = mat[10];\n\n    const x = m11 * m11 + m12 * m12 + m13 * m13;\n    const y = m21 * m21 + m22 * m22 + m23 * m23;\n    const z = m31 * m31 + m32 * m32 + m33 * m33;\n\n    return Math.sqrt(Math.max(x, y, z));\n}\n\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {mat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\nexport const getRotation = (function () {\n    const temp = [1, 1, 1];\n\n    return function (out, mat) {\n        let scaling = temp;\n        getScaling(scaling, mat);\n\n        let is1 = 1 / scaling[0];\n        let is2 = 1 / scaling[1];\n        let is3 = 1 / scaling[2];\n\n        let sm11 = mat[0] * is1;\n        let sm12 = mat[1] * is2;\n        let sm13 = mat[2] * is3;\n        let sm21 = mat[4] * is1;\n        let sm22 = mat[5] * is2;\n        let sm23 = mat[6] * is3;\n        let sm31 = mat[8] * is1;\n        let sm32 = mat[9] * is2;\n        let sm33 = mat[10] * is3;\n\n        let trace = sm11 + sm22 + sm33;\n        let S = 0;\n\n        if (trace > 0) {\n            S = Math.sqrt(trace + 1.0) * 2;\n            out[3] = 0.25 * S;\n            out[0] = (sm23 - sm32) / S;\n            out[1] = (sm31 - sm13) / S;\n            out[2] = (sm12 - sm21) / S;\n        } else if (sm11 > sm22 && sm11 > sm33) {\n            S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n            out[3] = (sm23 - sm32) / S;\n            out[0] = 0.25 * S;\n            out[1] = (sm12 + sm21) / S;\n            out[2] = (sm31 + sm13) / S;\n        } else if (sm22 > sm33) {\n            S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n            out[3] = (sm31 - sm13) / S;\n            out[0] = (sm12 + sm21) / S;\n            out[1] = 0.25 * S;\n            out[2] = (sm23 + sm32) / S;\n        } else {\n            S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n            out[3] = (sm12 - sm21) / S;\n            out[0] = (sm31 + sm13) / S;\n            out[1] = (sm23 + sm32) / S;\n            out[2] = 0.25 * S;\n        }\n\n        return out;\n    };\n})();\n\n/**\n * From glTF-Transform\n * https://github.com/donmccurdy/glTF-Transform/blob/main/packages/core/src/utils/math-utils.ts\n *\n * Decompose a mat4 to TRS properties.\n *\n * Equivalent to the Matrix4 decompose() method in three.js, and intentionally not using the\n * gl-matrix version. See: https://github.com/toji/gl-matrix/issues/408\n *\n * @param {mat4} srcMat Matrix element, to be decomposed to TRS properties.\n * @param {quat4} dstRotation Rotation element, to be overwritten.\n * @param {vec3} dstTranslation Translation element, to be overwritten.\n * @param {vec3} dstScale Scale element, to be overwritten\n */\nexport function decompose(srcMat, dstRotation, dstTranslation, dstScale) {\n    let sx = vec3.length([srcMat[0], srcMat[1], srcMat[2]]);\n    const sy = vec3.length([srcMat[4], srcMat[5], srcMat[6]]);\n    const sz = vec3.length([srcMat[8], srcMat[9], srcMat[10]]);\n\n    // if determine is negative, we need to invert one scale\n    const det = determinant(srcMat);\n    if (det < 0) sx = -sx;\n\n    dstTranslation[0] = srcMat[12];\n    dstTranslation[1] = srcMat[13];\n    dstTranslation[2] = srcMat[14];\n\n    // scale the rotation part\n    const _m1 = srcMat.slice();\n\n    const invSX = 1 / sx;\n    const invSY = 1 / sy;\n    const invSZ = 1 / sz;\n\n    _m1[0] *= invSX;\n    _m1[1] *= invSX;\n    _m1[2] *= invSX;\n\n    _m1[4] *= invSY;\n    _m1[5] *= invSY;\n    _m1[6] *= invSY;\n\n    _m1[8] *= invSZ;\n    _m1[9] *= invSZ;\n    _m1[10] *= invSZ;\n\n    getRotation(dstRotation, _m1);\n\n    dstScale[0] = sx;\n    dstScale[1] = sy;\n    dstScale[2] = sz;\n}\n\n/**\n * From glTF-Transform\n * https://github.com/donmccurdy/glTF-Transform/blob/main/packages/core/src/utils/math-utils.ts\n *\n * Compose TRS properties to a mat4.\n *\n * Equivalent to the Matrix4 compose() method in three.js, and intentionally not using the\n * gl-matrix version. See: https://github.com/toji/gl-matrix/issues/408\n *\n * @param {mat4} dstMat Matrix element, to be modified and returned.\n * @param {quat4} srcRotation Rotation element of matrix.\n * @param {vec3} srcTranslation Translation element of matrix.\n * @param {vec3} srcScale Scale element of matrix.\n * @returns {mat4} dstMat, overwritten to mat4 equivalent of given TRS properties.\n */\nexport function compose(dstMat, srcRotation, srcTranslation, srcScale) {\n    const te = dstMat;\n\n    const x = srcRotation[0],\n        y = srcRotation[1],\n        z = srcRotation[2],\n        w = srcRotation[3];\n    const x2 = x + x,\n        y2 = y + y,\n        z2 = z + z;\n    const xx = x * x2,\n        xy = x * y2,\n        xz = x * z2;\n    const yy = y * y2,\n        yz = y * z2,\n        zz = z * z2;\n    const wx = w * x2,\n        wy = w * y2,\n        wz = w * z2;\n\n    const sx = srcScale[0],\n        sy = srcScale[1],\n        sz = srcScale[2];\n\n    te[0] = (1 - (yy + zz)) * sx;\n    te[1] = (xy + wz) * sx;\n    te[2] = (xz - wy) * sx;\n    te[3] = 0;\n\n    te[4] = (xy - wz) * sy;\n    te[5] = (1 - (xx + zz)) * sy;\n    te[6] = (yz + wx) * sy;\n    te[7] = 0;\n\n    te[8] = (xz + wy) * sz;\n    te[9] = (yz - wx) * sz;\n    te[10] = (1 - (xx + yy)) * sz;\n    te[11] = 0;\n\n    te[12] = srcTranslation[0];\n    te[13] = srcTranslation[1];\n    te[14] = srcTranslation[2];\n    te[15] = 1;\n\n    return te;\n}\n\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {vec3} v Translation vector\n * @param {vec3} s Scaling vector\n * @returns {mat4} out\n */\nexport function fromRotationTranslationScale(out, q, v, s) {\n    // Quaternion math\n    let x = q[0],\n        y = q[1],\n        z = q[2],\n        w = q[3];\n    let x2 = x + x;\n    let y2 = y + y;\n    let z2 = z + z;\n\n    let xx = x * x2;\n    let xy = x * y2;\n    let xz = x * z2;\n    let yy = y * y2;\n    let yz = y * z2;\n    let zz = z * z2;\n    let wx = w * x2;\n    let wy = w * y2;\n    let wz = w * z2;\n    let sx = s[0];\n    let sy = s[1];\n    let sz = s[2];\n\n    out[0] = (1 - (yy + zz)) * sx;\n    out[1] = (xy + wz) * sx;\n    out[2] = (xz - wy) * sx;\n    out[3] = 0;\n    out[4] = (xy - wz) * sy;\n    out[5] = (1 - (xx + zz)) * sy;\n    out[6] = (yz + wx) * sy;\n    out[7] = 0;\n    out[8] = (xz + wy) * sz;\n    out[9] = (yz - wx) * sz;\n    out[10] = (1 - (xx + yy)) * sz;\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n\n    return out;\n}\n\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\nexport function fromQuat(out, q) {\n    let x = q[0],\n        y = q[1],\n        z = q[2],\n        w = q[3];\n    let x2 = x + x;\n    let y2 = y + y;\n    let z2 = z + z;\n\n    let xx = x * x2;\n    let yx = y * x2;\n    let yy = y * y2;\n    let zx = z * x2;\n    let zy = z * y2;\n    let zz = z * z2;\n    let wx = w * x2;\n    let wy = w * y2;\n    let wz = w * z2;\n\n    out[0] = 1 - yy - zz;\n    out[1] = yx + wz;\n    out[2] = zx - wy;\n    out[3] = 0;\n\n    out[4] = yx - wz;\n    out[5] = 1 - xx - zz;\n    out[6] = zy + wx;\n    out[7] = 0;\n\n    out[8] = zx + wy;\n    out[9] = zy - wx;\n    out[10] = 1 - xx - yy;\n    out[11] = 0;\n\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n\n    return out;\n}\n\n/**\n * Generates a perspective projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function perspective(out, fovy, aspect, near, far) {\n    let f = 1.0 / Math.tan(fovy / 2);\n    let nf = 1 / (near - far);\n    out[0] = f / aspect;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = f;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 2 * far * near * nf;\n    out[15] = 0;\n    return out;\n}\n\n/**\n * Generates a orthogonal projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function ortho(out, left, right, bottom, top, near, far) {\n    let lr = 1 / (left - right);\n    let bt = 1 / (bottom - top);\n    let nf = 1 / (near - far);\n    out[0] = -2 * lr;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = -2 * bt;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 2 * nf;\n    out[11] = 0;\n    out[12] = (left + right) * lr;\n    out[13] = (top + bottom) * bt;\n    out[14] = (far + near) * nf;\n    out[15] = 1;\n    return out;\n}\n\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {vec3} eye Position of the viewer\n * @param {vec3} target Point the viewer is looking at\n * @param {vec3} up vec3 pointing up\n * @returns {mat4} out\n */\nexport function targetTo(out, eye, target, up) {\n    let eyex = eye[0],\n        eyey = eye[1],\n        eyez = eye[2],\n        upx = up[0],\n        upy = up[1],\n        upz = up[2];\n\n    let z0 = eyex - target[0],\n        z1 = eyey - target[1],\n        z2 = eyez - target[2];\n\n    let len = z0 * z0 + z1 * z1 + z2 * z2;\n    if (len === 0) {\n        // eye and target are in the same position\n        z2 = 1;\n    } else {\n        len = 1 / Math.sqrt(len);\n        z0 *= len;\n        z1 *= len;\n        z2 *= len;\n    }\n\n    let x0 = upy * z2 - upz * z1,\n        x1 = upz * z0 - upx * z2,\n        x2 = upx * z1 - upy * z0;\n\n    len = x0 * x0 + x1 * x1 + x2 * x2;\n    if (len === 0) {\n        // up and z are parallel\n        if (upz) {\n            upx += 1e-6;\n        } else if (upy) {\n            upz += 1e-6;\n        } else {\n            upy += 1e-6;\n        }\n        (x0 = upy * z2 - upz * z1), (x1 = upz * z0 - upx * z2), (x2 = upx * z1 - upy * z0);\n\n        len = x0 * x0 + x1 * x1 + x2 * x2;\n    }\n\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n\n    out[0] = x0;\n    out[1] = x1;\n    out[2] = x2;\n    out[3] = 0;\n    out[4] = z1 * x2 - z2 * x1;\n    out[5] = z2 * x0 - z0 * x2;\n    out[6] = z0 * x1 - z1 * x0;\n    out[7] = 0;\n    out[8] = z0;\n    out[9] = z1;\n    out[10] = z2;\n    out[11] = 0;\n    out[12] = eyex;\n    out[13] = eyey;\n    out[14] = eyez;\n    out[15] = 1;\n    return out;\n}\n\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nexport function add(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    out[3] = a[3] + b[3];\n    out[4] = a[4] + b[4];\n    out[5] = a[5] + b[5];\n    out[6] = a[6] + b[6];\n    out[7] = a[7] + b[7];\n    out[8] = a[8] + b[8];\n    out[9] = a[9] + b[9];\n    out[10] = a[10] + b[10];\n    out[11] = a[11] + b[11];\n    out[12] = a[12] + b[12];\n    out[13] = a[13] + b[13];\n    out[14] = a[14] + b[14];\n    out[15] = a[15] + b[15];\n    return out;\n}\n\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nexport function subtract(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    out[2] = a[2] - b[2];\n    out[3] = a[3] - b[3];\n    out[4] = a[4] - b[4];\n    out[5] = a[5] - b[5];\n    out[6] = a[6] - b[6];\n    out[7] = a[7] - b[7];\n    out[8] = a[8] - b[8];\n    out[9] = a[9] - b[9];\n    out[10] = a[10] - b[10];\n    out[11] = a[11] - b[11];\n    out[12] = a[12] - b[12];\n    out[13] = a[13] - b[13];\n    out[14] = a[14] - b[14];\n    out[15] = a[15] - b[15];\n    return out;\n}\n\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\nexport function multiplyScalar(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    out[3] = a[3] * b;\n    out[4] = a[4] * b;\n    out[5] = a[5] * b;\n    out[6] = a[6] * b;\n    out[7] = a[7] * b;\n    out[8] = a[8] * b;\n    out[9] = a[9] * b;\n    out[10] = a[10] * b;\n    out[11] = a[11] * b;\n    out[12] = a[12] * b;\n    out[13] = a[13] * b;\n    out[14] = a[14] * b;\n    out[15] = a[15] * b;\n    return out;\n}\n","import * as Mat4Func from './functions/Mat4Func.js';\n\nexport class Mat4 extends Array {\n    constructor(\n        m00 = 1,\n        m01 = 0,\n        m02 = 0,\n        m03 = 0,\n        m10 = 0,\n        m11 = 1,\n        m12 = 0,\n        m13 = 0,\n        m20 = 0,\n        m21 = 0,\n        m22 = 1,\n        m23 = 0,\n        m30 = 0,\n        m31 = 0,\n        m32 = 0,\n        m33 = 1\n    ) {\n        super(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);\n        return this;\n    }\n\n    get x() {\n        return this[12];\n    }\n\n    get y() {\n        return this[13];\n    }\n\n    get z() {\n        return this[14];\n    }\n\n    get w() {\n        return this[15];\n    }\n\n    set x(v) {\n        this[12] = v;\n    }\n\n    set y(v) {\n        this[13] = v;\n    }\n\n    set z(v) {\n        this[14] = v;\n    }\n\n    set w(v) {\n        this[15] = v;\n    }\n\n    set(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n        if (m00.length) return this.copy(m00);\n        Mat4Func.set(this, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);\n        return this;\n    }\n\n    translate(v, m = this) {\n        Mat4Func.translate(this, m, v);\n        return this;\n    }\n\n    rotate(v, axis, m = this) {\n        Mat4Func.rotate(this, m, v, axis);\n        return this;\n    }\n\n    scale(v, m = this) {\n        Mat4Func.scale(this, m, typeof v === 'number' ? [v, v, v] : v);\n        return this;\n    }\n\n    add(ma, mb) {\n        if (mb) Mat4Func.add(this, ma, mb);\n        else Mat4Func.add(this, this, ma);\n        return this;\n    }\n\n    sub(ma, mb) {\n        if (mb) Mat4Func.subtract(this, ma, mb);\n        else Mat4Func.subtract(this, this, ma);\n        return this;\n    }\n\n    multiply(ma, mb) {\n        if (!ma.length) {\n            Mat4Func.multiplyScalar(this, this, ma);\n        } else if (mb) {\n            Mat4Func.multiply(this, ma, mb);\n        } else {\n            Mat4Func.multiply(this, this, ma);\n        }\n        return this;\n    }\n\n    identity() {\n        Mat4Func.identity(this);\n        return this;\n    }\n\n    copy(m) {\n        Mat4Func.copy(this, m);\n        return this;\n    }\n\n    fromPerspective({ fov, aspect, near, far } = {}) {\n        Mat4Func.perspective(this, fov, aspect, near, far);\n        return this;\n    }\n\n    fromOrthogonal({ left, right, bottom, top, near, far }) {\n        Mat4Func.ortho(this, left, right, bottom, top, near, far);\n        return this;\n    }\n\n    fromQuaternion(q) {\n        Mat4Func.fromQuat(this, q);\n        return this;\n    }\n\n    setPosition(v) {\n        this.x = v[0];\n        this.y = v[1];\n        this.z = v[2];\n        return this;\n    }\n\n    inverse(m = this) {\n        Mat4Func.invert(this, m);\n        return this;\n    }\n\n    compose(q, pos, scale) {\n        Mat4Func.compose(this, q, pos, scale);\n        return this;\n    }\n\n    decompose(q, pos, scale) {\n        Mat4Func.decompose(this, q, pos, scale);\n        return this;\n    }\n\n    getRotation(q) {\n        Mat4Func.getRotation(q, this);\n        return this;\n    }\n\n    getTranslation(pos) {\n        Mat4Func.getTranslation(pos, this);\n        return this;\n    }\n\n    getScaling(scale) {\n        Mat4Func.getScaling(scale, this);\n        return this;\n    }\n\n    getMaxScaleOnAxis() {\n        return Mat4Func.getMaxScaleOnAxis(this);\n    }\n\n    lookAt(eye, target, up) {\n        Mat4Func.targetTo(this, eye, target, up);\n        return this;\n    }\n\n    determinant() {\n        return Mat4Func.determinant(this);\n    }\n\n    fromArray(a, o = 0) {\n        this[0] = a[o];\n        this[1] = a[o + 1];\n        this[2] = a[o + 2];\n        this[3] = a[o + 3];\n        this[4] = a[o + 4];\n        this[5] = a[o + 5];\n        this[6] = a[o + 6];\n        this[7] = a[o + 7];\n        this[8] = a[o + 8];\n        this[9] = a[o + 9];\n        this[10] = a[o + 10];\n        this[11] = a[o + 11];\n        this[12] = a[o + 12];\n        this[13] = a[o + 13];\n        this[14] = a[o + 14];\n        this[15] = a[o + 15];\n        return this;\n    }\n\n    toArray(a = [], o = 0) {\n        a[o] = this[0];\n        a[o + 1] = this[1];\n        a[o + 2] = this[2];\n        a[o + 3] = this[3];\n        a[o + 4] = this[4];\n        a[o + 5] = this[5];\n        a[o + 6] = this[6];\n        a[o + 7] = this[7];\n        a[o + 8] = this[8];\n        a[o + 9] = this[9];\n        a[o + 10] = this[10];\n        a[o + 11] = this[11];\n        a[o + 12] = this[12];\n        a[o + 13] = this[13];\n        a[o + 14] = this[14];\n        a[o + 15] = this[15];\n        return a;\n    }\n}\n","// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\nexport function fromRotationMatrix(out, m, order = 'YXZ') {\n    if (order === 'XYZ') {\n        out[1] = Math.asin(Math.min(Math.max(m[8], -1), 1));\n        if (Math.abs(m[8]) < 0.99999) {\n            out[0] = Math.atan2(-m[9], m[10]);\n            out[2] = Math.atan2(-m[4], m[0]);\n        } else {\n            out[0] = Math.atan2(m[6], m[5]);\n            out[2] = 0;\n        }\n    } else if (order === 'YXZ') {\n        out[0] = Math.asin(-Math.min(Math.max(m[9], -1), 1));\n        if (Math.abs(m[9]) < 0.99999) {\n            out[1] = Math.atan2(m[8], m[10]);\n            out[2] = Math.atan2(m[1], m[5]);\n        } else {\n            out[1] = Math.atan2(-m[2], m[0]);\n            out[2] = 0;\n        }\n    } else if (order === 'ZXY') {\n        out[0] = Math.asin(Math.min(Math.max(m[6], -1), 1));\n        if (Math.abs(m[6]) < 0.99999) {\n            out[1] = Math.atan2(-m[2], m[10]);\n            out[2] = Math.atan2(-m[4], m[5]);\n        } else {\n            out[1] = 0;\n            out[2] = Math.atan2(m[1], m[0]);\n        }\n    } else if (order === 'ZYX') {\n        out[1] = Math.asin(-Math.min(Math.max(m[2], -1), 1));\n        if (Math.abs(m[2]) < 0.99999) {\n            out[0] = Math.atan2(m[6], m[10]);\n            out[2] = Math.atan2(m[1], m[0]);\n        } else {\n            out[0] = 0;\n            out[2] = Math.atan2(-m[4], m[5]);\n        }\n    } else if (order === 'YZX') {\n        out[2] = Math.asin(Math.min(Math.max(m[1], -1), 1));\n        if (Math.abs(m[1]) < 0.99999) {\n            out[0] = Math.atan2(-m[9], m[5]);\n            out[1] = Math.atan2(-m[2], m[0]);\n        } else {\n            out[0] = 0;\n            out[1] = Math.atan2(m[8], m[10]);\n        }\n    } else if (order === 'XZY') {\n        out[2] = Math.asin(-Math.min(Math.max(m[4], -1), 1));\n        if (Math.abs(m[4]) < 0.99999) {\n            out[0] = Math.atan2(m[6], m[5]);\n            out[1] = Math.atan2(m[8], m[0]);\n        } else {\n            out[0] = Math.atan2(-m[9], m[10]);\n            out[1] = 0;\n        }\n    }\n\n    return out;\n}\n","import * as EulerFunc from './functions/EulerFunc.js';\nimport { Mat4 } from './Mat4.js';\n\nconst tmpMat4 = /* @__PURE__ */ new Mat4();\n\nexport class Euler extends Array {\n    constructor(x = 0, y = x, z = x, order = 'YXZ') {\n        super(x, y, z);\n        this.order = order;\n        this.onChange = () => {};\n\n        // Keep reference to proxy target to avoid triggering onChange internally\n        this._target = this;\n\n        // Return a proxy to trigger onChange when array elements are edited directly\n        const triggerProps = ['0', '1', '2'];\n        return new Proxy(this, {\n            set(target, property) {\n                const success = Reflect.set(...arguments);\n                if (success && triggerProps.includes(property)) target.onChange();\n                return success;\n            },\n        });\n    }\n\n    get x() {\n        return this[0];\n    }\n\n    get y() {\n        return this[1];\n    }\n\n    get z() {\n        return this[2];\n    }\n\n    set x(v) {\n        this._target[0] = v;\n        this.onChange();\n    }\n\n    set y(v) {\n        this._target[1] = v;\n        this.onChange();\n    }\n\n    set z(v) {\n        this._target[2] = v;\n        this.onChange();\n    }\n\n    set(x, y = x, z = x) {\n        if (x.length) return this.copy(x);\n        this._target[0] = x;\n        this._target[1] = y;\n        this._target[2] = z;\n        this.onChange();\n        return this;\n    }\n\n    copy(v) {\n        this._target[0] = v[0];\n        this._target[1] = v[1];\n        this._target[2] = v[2];\n        this.onChange();\n        return this;\n    }\n\n    reorder(order) {\n        this._target.order = order;\n        this.onChange();\n        return this;\n    }\n\n    fromRotationMatrix(m, order = this.order) {\n        EulerFunc.fromRotationMatrix(this._target, m, order);\n        this.onChange();\n        return this;\n    }\n\n    fromQuaternion(q, order = this.order, isInternal) {\n        tmpMat4.fromQuaternion(q);\n        this._target.fromRotationMatrix(tmpMat4, order);\n        // Avoid infinite recursion\n        if (!isInternal) this.onChange();\n        return this;\n    }\n\n    fromArray(a, o = 0) {\n        this._target[0] = a[o];\n        this._target[1] = a[o + 1];\n        this._target[2] = a[o + 2];\n        return this;\n    }\n\n    toArray(a = [], o = 0) {\n        a[o] = this[0];\n        a[o + 1] = this[1];\n        a[o + 2] = this[2];\n        return a;\n    }\n}\n","import { Vec3 } from '../math/Vec3.js';\nimport { Quat } from '../math/Quat.js';\nimport { Mat4 } from '../math/Mat4.js';\nimport { Euler } from '../math/Euler.js';\n\nexport class Transform {\n    constructor() {\n        this.parent = null;\n        this.children = [];\n        this.visible = true;\n\n        this.matrix = new Mat4();\n        this.worldMatrix = new Mat4();\n        this.matrixAutoUpdate = true;\n        this.worldMatrixNeedsUpdate = false;\n\n        this.position = new Vec3();\n        this.quaternion = new Quat();\n        this.scale = new Vec3(1);\n        this.rotation = new Euler();\n        this.up = new Vec3(0, 1, 0);\n\n        this.rotation._target.onChange = () => this.quaternion.fromEuler(this.rotation, true);\n        this.quaternion._target.onChange = () => this.rotation.fromQuaternion(this.quaternion, undefined, true);\n    }\n\n    setParent(parent, notifyParent = true) {\n        if (this.parent && parent !== this.parent) this.parent.removeChild(this, false);\n        this.parent = parent;\n        if (notifyParent && parent) parent.addChild(this, false);\n    }\n\n    addChild(child, notifyChild = true) {\n        if (!~this.children.indexOf(child)) this.children.push(child);\n        if (notifyChild) child.setParent(this, false);\n    }\n\n    removeChild(child, notifyChild = true) {\n        if (!!~this.children.indexOf(child)) this.children.splice(this.children.indexOf(child), 1);\n        if (notifyChild) child.setParent(null, false);\n    }\n\n    updateMatrixWorld(force) {\n        if (this.matrixAutoUpdate) this.updateMatrix();\n        if (this.worldMatrixNeedsUpdate || force) {\n            if (this.parent === null) this.worldMatrix.copy(this.matrix);\n            else this.worldMatrix.multiply(this.parent.worldMatrix, this.matrix);\n            this.worldMatrixNeedsUpdate = false;\n            force = true;\n        }\n\n        for (let i = 0, l = this.children.length; i < l; i++) {\n            this.children[i].updateMatrixWorld(force);\n        }\n    }\n\n    updateMatrix() {\n        this.matrix.compose(this.quaternion, this.position, this.scale);\n        this.worldMatrixNeedsUpdate = true;\n    }\n\n    traverse(callback) {\n        // Return true in callback to stop traversing children\n        if (callback(this)) return;\n        for (let i = 0, l = this.children.length; i < l; i++) {\n            this.children[i].traverse(callback);\n        }\n    }\n\n    decompose() {\n        this.matrix.decompose(this.quaternion._target, this.position, this.scale);\n        this.rotation.fromQuaternion(this.quaternion);\n    }\n\n    lookAt(target, invert = false) {\n        if (invert) this.matrix.lookAt(this.position, target, this.up);\n        else this.matrix.lookAt(target, this.position, this.up);\n        this.matrix.getRotation(this.quaternion._target);\n        this.rotation.fromQuaternion(this.quaternion);\n    }\n}\n","const EPSILON = 0.000001;\n\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {mat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\nexport function fromMat4(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[4];\n    out[4] = a[5];\n    out[5] = a[6];\n    out[6] = a[8];\n    out[7] = a[9];\n    out[8] = a[10];\n    return out;\n}\n\n/**\n * Calculates a 3x3 matrix from the given quaternion\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {quat} q Quaternion to create matrix from\n *\n * @returns {mat3} out\n */\nexport function fromQuat(out, q) {\n    let x = q[0],\n        y = q[1],\n        z = q[2],\n        w = q[3];\n    let x2 = x + x;\n    let y2 = y + y;\n    let z2 = z + z;\n\n    let xx = x * x2;\n    let yx = y * x2;\n    let yy = y * y2;\n    let zx = z * x2;\n    let zy = z * y2;\n    let zz = z * z2;\n    let wx = w * x2;\n    let wy = w * y2;\n    let wz = w * z2;\n\n    out[0] = 1 - yy - zz;\n    out[3] = yx - wz;\n    out[6] = zx + wy;\n\n    out[1] = yx + wz;\n    out[4] = 1 - xx - zz;\n    out[7] = zy - wx;\n\n    out[2] = zx - wy;\n    out[5] = zy + wx;\n    out[8] = 1 - xx - yy;\n\n    return out;\n}\n\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nexport function copy(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    return out;\n}\n\n/**\n * Set the components of a mat3 to the given values\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n    out[0] = m00;\n    out[1] = m01;\n    out[2] = m02;\n    out[3] = m10;\n    out[4] = m11;\n    out[5] = m12;\n    out[6] = m20;\n    out[7] = m21;\n    out[8] = m22;\n    return out;\n}\n\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\nexport function identity(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 1;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 1;\n    return out;\n}\n\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nexport function transpose(out, a) {\n    // If we are transposing ourselves we can skip a few steps but have to cache some values\n    if (out === a) {\n        let a01 = a[1],\n            a02 = a[2],\n            a12 = a[5];\n        out[1] = a[3];\n        out[2] = a[6];\n        out[3] = a01;\n        out[5] = a[7];\n        out[6] = a02;\n        out[7] = a12;\n    } else {\n        out[0] = a[0];\n        out[1] = a[3];\n        out[2] = a[6];\n        out[3] = a[1];\n        out[4] = a[4];\n        out[5] = a[7];\n        out[6] = a[2];\n        out[7] = a[5];\n        out[8] = a[8];\n    }\n\n    return out;\n}\n\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nexport function invert(out, a) {\n    let a00 = a[0],\n        a01 = a[1],\n        a02 = a[2];\n    let a10 = a[3],\n        a11 = a[4],\n        a12 = a[5];\n    let a20 = a[6],\n        a21 = a[7],\n        a22 = a[8];\n\n    let b01 = a22 * a11 - a12 * a21;\n    let b11 = -a22 * a10 + a12 * a20;\n    let b21 = a21 * a10 - a11 * a20;\n\n    // Calculate the determinant\n    let det = a00 * b01 + a01 * b11 + a02 * b21;\n\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n\n    out[0] = b01 * det;\n    out[1] = (-a22 * a01 + a02 * a21) * det;\n    out[2] = (a12 * a01 - a02 * a11) * det;\n    out[3] = b11 * det;\n    out[4] = (a22 * a00 - a02 * a20) * det;\n    out[5] = (-a12 * a00 + a02 * a10) * det;\n    out[6] = b21 * det;\n    out[7] = (-a21 * a00 + a01 * a20) * det;\n    out[8] = (a11 * a00 - a01 * a10) * det;\n    return out;\n}\n\n/**\n * Calculates the determinant of a mat3\n *\n * @param {mat3} a the source matrix\n * @returns {Number} determinant of a\n */\nexport function determinant(a) {\n    let a00 = a[0],\n        a01 = a[1],\n        a02 = a[2];\n    let a10 = a[3],\n        a11 = a[4],\n        a12 = a[5];\n    let a20 = a[6],\n        a21 = a[7],\n        a22 = a[8];\n\n    return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the first operand\n * @param {mat3} b the second operand\n * @returns {mat3} out\n */\nexport function multiply(out, a, b) {\n    let a00 = a[0],\n        a01 = a[1],\n        a02 = a[2];\n    let a10 = a[3],\n        a11 = a[4],\n        a12 = a[5];\n    let a20 = a[6],\n        a21 = a[7],\n        a22 = a[8];\n\n    let b00 = b[0],\n        b01 = b[1],\n        b02 = b[2];\n    let b10 = b[3],\n        b11 = b[4],\n        b12 = b[5];\n    let b20 = b[6],\n        b21 = b[7],\n        b22 = b[8];\n\n    out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n    out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n    out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n\n    out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n    out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n    out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n\n    out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n    out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n    out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n    return out;\n}\n\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to translate\n * @param {vec2} v vector to translate by\n * @returns {mat3} out\n */\nexport function translate(out, a, v) {\n    let a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a10 = a[3],\n        a11 = a[4],\n        a12 = a[5],\n        a20 = a[6],\n        a21 = a[7],\n        a22 = a[8],\n        x = v[0],\n        y = v[1];\n\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n\n    out[3] = a10;\n    out[4] = a11;\n    out[5] = a12;\n\n    out[6] = x * a00 + y * a10 + a20;\n    out[7] = x * a01 + y * a11 + a21;\n    out[8] = x * a02 + y * a12 + a22;\n    return out;\n}\n\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\nexport function rotate(out, a, rad) {\n    let a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a10 = a[3],\n        a11 = a[4],\n        a12 = a[5],\n        a20 = a[6],\n        a21 = a[7],\n        a22 = a[8],\n        s = Math.sin(rad),\n        c = Math.cos(rad);\n\n    out[0] = c * a00 + s * a10;\n    out[1] = c * a01 + s * a11;\n    out[2] = c * a02 + s * a12;\n\n    out[3] = c * a10 - s * a00;\n    out[4] = c * a11 - s * a01;\n    out[5] = c * a12 - s * a02;\n\n    out[6] = a20;\n    out[7] = a21;\n    out[8] = a22;\n    return out;\n}\n\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to rotate\n * @param {vec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\nexport function scale(out, a, v) {\n    let x = v[0],\n        y = v[1];\n\n    out[0] = x * a[0];\n    out[1] = x * a[1];\n    out[2] = x * a[2];\n\n    out[3] = y * a[3];\n    out[4] = y * a[4];\n    out[5] = y * a[5];\n\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    return out;\n}\n\n/**\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {mat4} a Mat4 to derive the normal matrix from\n *\n * @returns {mat3} out\n */\nexport function normalFromMat4(out, a) {\n    let a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    let a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7];\n    let a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11];\n    let a30 = a[12],\n        a31 = a[13],\n        a32 = a[14],\n        a33 = a[15];\n\n    let b00 = a00 * a11 - a01 * a10;\n    let b01 = a00 * a12 - a02 * a10;\n    let b02 = a00 * a13 - a03 * a10;\n    let b03 = a01 * a12 - a02 * a11;\n    let b04 = a01 * a13 - a03 * a11;\n    let b05 = a02 * a13 - a03 * a12;\n    let b06 = a20 * a31 - a21 * a30;\n    let b07 = a20 * a32 - a22 * a30;\n    let b08 = a20 * a33 - a23 * a30;\n    let b09 = a21 * a32 - a22 * a31;\n    let b10 = a21 * a33 - a23 * a31;\n    let b11 = a22 * a33 - a23 * a32;\n\n    // Calculate the determinant\n    let det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n\n    out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n\n    out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n\n    return out;\n}\n\n/**\n * Generates a 2D projection matrix with the given bounds\n *\n * @param {mat3} out mat3 frustum matrix will be written into\n * @param {number} width Width of your gl context\n * @param {number} height Height of gl context\n * @returns {mat3} out\n */\nexport function projection(out, width, height) {\n    out[0] = 2 / width;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = -2 / height;\n    out[5] = 0;\n    out[6] = -1;\n    out[7] = 1;\n    out[8] = 1;\n    return out;\n}\n\n/**\n * Adds two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the first operand\n * @param {mat3} b the second operand\n * @returns {mat3} out\n */\nexport function add(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    out[3] = a[3] + b[3];\n    out[4] = a[4] + b[4];\n    out[5] = a[5] + b[5];\n    out[6] = a[6] + b[6];\n    out[7] = a[7] + b[7];\n    out[8] = a[8] + b[8];\n    return out;\n}\n\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the first operand\n * @param {mat3} b the second operand\n * @returns {mat3} out\n */\nexport function subtract(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    out[2] = a[2] - b[2];\n    out[3] = a[3] - b[3];\n    out[4] = a[4] - b[4];\n    out[5] = a[5] - b[5];\n    out[6] = a[6] - b[6];\n    out[7] = a[7] - b[7];\n    out[8] = a[8] - b[8];\n    return out;\n}\n\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat3} out\n */\nexport function multiplyScalar(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    out[3] = a[3] * b;\n    out[4] = a[4] * b;\n    out[5] = a[5] * b;\n    out[6] = a[6] * b;\n    out[7] = a[7] * b;\n    out[8] = a[8] * b;\n    return out;\n}\n","import * as Mat3Func from './functions/Mat3Func.js';\n\nexport class Mat3 extends Array {\n    constructor(m00 = 1, m01 = 0, m02 = 0, m10 = 0, m11 = 1, m12 = 0, m20 = 0, m21 = 0, m22 = 1) {\n        super(m00, m01, m02, m10, m11, m12, m20, m21, m22);\n        return this;\n    }\n\n    set(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n        if (m00.length) return this.copy(m00);\n        Mat3Func.set(this, m00, m01, m02, m10, m11, m12, m20, m21, m22);\n        return this;\n    }\n\n    translate(v, m = this) {\n        Mat3Func.translate(this, m, v);\n        return this;\n    }\n\n    rotate(v, m = this) {\n        Mat3Func.rotate(this, m, v);\n        return this;\n    }\n\n    scale(v, m = this) {\n        Mat3Func.scale(this, m, v);\n        return this;\n    }\n\n    multiply(ma, mb) {\n        if (mb) {\n            Mat3Func.multiply(this, ma, mb);\n        } else {\n            Mat3Func.multiply(this, this, ma);\n        }\n        return this;\n    }\n\n    identity() {\n        Mat3Func.identity(this);\n        return this;\n    }\n\n    copy(m) {\n        Mat3Func.copy(this, m);\n        return this;\n    }\n\n    fromMatrix4(m) {\n        Mat3Func.fromMat4(this, m);\n        return this;\n    }\n\n    fromQuaternion(q) {\n        Mat3Func.fromQuat(this, q);\n        return this;\n    }\n\n    fromBasis(vec3a, vec3b, vec3c) {\n        this.set(vec3a[0], vec3a[1], vec3a[2], vec3b[0], vec3b[1], vec3b[2], vec3c[0], vec3c[1], vec3c[2]);\n        return this;\n    }\n\n    inverse(m = this) {\n        Mat3Func.invert(this, m);\n        return this;\n    }\n\n    getNormalMatrix(m) {\n        Mat3Func.normalFromMat4(this, m);\n        return this;\n    }\n}\n","import { Transform } from './Transform.js';\nimport { Mat3 } from '../math/Mat3.js';\nimport { Mat4 } from '../math/Mat4.js';\n\nlet ID = 0;\n\nexport class Mesh extends Transform {\n    constructor(gl, { geometry, program, mode = gl.TRIANGLES, frustumCulled = true, renderOrder = 0 } = {}) {\n        super();\n        if (!gl.canvas) console.error('gl not passed as first argument to Mesh');\n        this.gl = gl;\n        this.id = ID++;\n        this.geometry = geometry;\n        this.program = program;\n        this.mode = mode;\n\n        // Used to skip frustum culling\n        this.frustumCulled = frustumCulled;\n\n        // Override sorting to force an order\n        this.renderOrder = renderOrder;\n        this.modelViewMatrix = new Mat4();\n        this.normalMatrix = new Mat3();\n        this.beforeRenderCallbacks = [];\n        this.afterRenderCallbacks = [];\n    }\n\n    onBeforeRender(f) {\n        this.beforeRenderCallbacks.push(f);\n        return this;\n    }\n\n    onAfterRender(f) {\n        this.afterRenderCallbacks.push(f);\n        return this;\n    }\n\n    draw({ camera } = {}) {\n        if (camera) {\n            // Add empty matrix uniforms to program if unset\n            if (!this.program.uniforms.modelMatrix) {\n                Object.assign(this.program.uniforms, {\n                    modelMatrix: { value: null },\n                    viewMatrix: { value: null },\n                    modelViewMatrix: { value: null },\n                    normalMatrix: { value: null },\n                    projectionMatrix: { value: null },\n                    cameraPosition: { value: null },\n                });\n            }\n\n            // Set the matrix uniforms\n            this.program.uniforms.projectionMatrix.value = camera.projectionMatrix;\n            this.program.uniforms.cameraPosition.value = camera.worldPosition;\n            this.program.uniforms.viewMatrix.value = camera.viewMatrix;\n            this.modelViewMatrix.multiply(camera.viewMatrix, this.worldMatrix);\n            this.normalMatrix.getNormalMatrix(this.modelViewMatrix);\n            this.program.uniforms.modelMatrix.value = this.worldMatrix;\n            this.program.uniforms.modelViewMatrix.value = this.modelViewMatrix;\n            this.program.uniforms.normalMatrix.value = this.normalMatrix;\n        }\n        this.beforeRenderCallbacks.forEach((f) => f && f({ mesh: this, camera }));\n\n        // determine if faces need to be flipped - when mesh scaled negatively\n        let flipFaces = this.program.cullFace && this.worldMatrix.determinant() < 0;\n        this.program.use({ flipFaces });\n        this.geometry.draw({ mode: this.mode, program: this.program });\n        this.afterRenderCallbacks.forEach((f) => f && f({ mesh: this, camera }));\n    }\n}\n","import { Geometry } from '../core/Geometry.js';\n\nexport class Triangle extends Geometry {\n    constructor(gl, { attributes = {} } = {}) {\n        Object.assign(attributes, {\n            position: { size: 2, data: new Float32Array([-1, -1, 3, -1, -1, 3]) },\n            uv: { size: 2, data: new Float32Array([0, 0, 2, 0, 0, 2]) },\n        });\n\n        super(gl, attributes);\n    }\n}\n","import { useEffect, useRef } from 'react';\nimport { Renderer, Program, Mesh, Triangle } from 'ogl';\nimport { useSettingsStore } from '@/stores';\n\nconst plasmaColors: Record<string, string> = {\n  violet: '#8b5cf6',\n  blue: '#3b82f6',\n  green: '#10b981',\n  rose: '#f43f5e',\n  orange: '#f97316',\n};\n\nconst hexToRgb = (hex: string): [number, number, number] => {\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  if (!result) return [1, 0.5, 0.2];\n  return [\n    parseInt(result[1], 16) / 255,\n    parseInt(result[2], 16) / 255,\n    parseInt(result[3], 16) / 255,\n  ];\n};\n\nconst vertex = `#version 300 es\nprecision highp float;\nin vec2 position;\nin vec2 uv;\nout vec2 vUv;\nvoid main() {\n  vUv = uv;\n  gl_Position = vec4(position, 0.0, 1.0);\n}\n`;\n\n// Use mediump for better mobile performance (no visible difference with blur)\nconst fragment = `#version 300 es\nprecision mediump float;\nuniform vec2 iResolution;\nuniform float iTime;\nuniform vec3 uCustomColor;\nuniform float uUseCustomColor;\nuniform float uSpeed;\nuniform float uDirection;\nuniform float uScale;\nuniform float uOpacity;\nuniform vec2 uMouse;\nuniform float uMouseInteractive;\nout vec4 fragColor;\n\nvoid mainImage(out vec4 o, vec2 C) {\n  vec2 center = iResolution.xy * 0.5;\n  C = (C - center) / uScale + center;\n\n  vec2 mouseOffset = (uMouse - center) * 0.0002;\n  C += mouseOffset * length(C - center) * step(0.5, uMouseInteractive);\n\n  float i, d, z, T = iTime * uSpeed * uDirection;\n  vec3 O, p, S;\n\n  // 30 iterations for better performance during UI transitions\n  for (vec2 r = iResolution.xy, Q; ++i < 30.; O += o.w/d*o.xyz) {\n    p = z*normalize(vec3(C-.5*r,r.y));\n    p.z -= 4.;\n    S = p;\n    d = p.y-T;\n\n    p.x += .4*(1.+p.y)*sin(d + p.x*0.1)*cos(.34*d + p.x*0.05);\n    Q = p.xz *= mat2(cos(p.y+vec4(0,11,33,0)-T));\n    z+= d = abs(sqrt(length(Q*Q)) - .25*(5.+S.y))/3.+8e-4;\n    o = 1.+sin(S.y+p.z*.5+S.z-length(S-p)+vec4(2,1,0,8));\n  }\n\n  o.xyz = tanh(O/1e4);\n}\n\nbool finite1(float x){ return !(isnan(x) || isinf(x)); }\nvec3 sanitize(vec3 c){\n  return vec3(\n    finite1(c.r) ? c.r : 0.0,\n    finite1(c.g) ? c.g : 0.0,\n    finite1(c.b) ? c.b : 0.0\n  );\n}\n\nvoid main() {\n  vec4 o = vec4(0.0);\n  mainImage(o, gl_FragCoord.xy);\n  vec3 rgb = sanitize(o.rgb);\n\n  float intensity = (rgb.r + rgb.g + rgb.b) / 3.0;\n  vec3 customColor = intensity * uCustomColor;\n  vec3 finalColor = mix(rgb, customColor, step(0.5, uUseCustomColor));\n\n  float alpha = length(rgb) * uOpacity;\n  fragColor = vec4(finalColor, alpha);\n}`;\n\n// Check if WebGL is supported\nfunction isWebGLSupported(): boolean {\n  try {\n    const canvas = document.createElement('canvas');\n    return !!(\n      window.WebGLRenderingContext &&\n      (canvas.getContext('webgl') || canvas.getContext('webgl2'))\n    );\n  } catch {\n    return false;\n  }\n}\n\n/**\n * Persistent plasma background that NEVER remounts.\n * Color changes are handled via Zustand subscribe, not component remounts.\n */\nexport function PlasmaBackground() {\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  // Initialize WebGL once and subscribe to color changes\n  useEffect(() => {\n    if (!containerRef.current) return;\n    const containerEl = containerRef.current;\n\n    // Skip if WebGL is not supported\n    if (!isWebGLSupported()) {\n      console.warn('WebGL not supported, skipping plasma background');\n      return;\n    }\n\n    const initialColor = plasmaColors[useSettingsStore.getState().settings.colorScheme] || '#8b5cf6';\n    const customColorRgb = hexToRgb(initialColor);\n\n    // Very low DPR for smooth performance - plasma is decorative, quality not critical\n    const isMobile = window.innerWidth < 768;\n    let renderer: Renderer;\n    try {\n      renderer = new Renderer({\n        webgl: 2,\n        alpha: true,\n        antialias: false,\n        dpr: isMobile ? 0.35 : 0.5,\n      });\n    } catch (e) {\n      console.warn('Failed to create WebGL renderer:', e);\n      return;\n    }\n    const gl = renderer.gl;\n    const canvas = gl.canvas as HTMLCanvasElement;\n    canvas.style.display = 'block';\n    canvas.style.width = '100%';\n    canvas.style.height = '100%';\n    containerEl.appendChild(canvas);\n\n    const geometry = new Triangle(gl);\n\n    const program = new Program(gl, {\n      vertex: vertex,\n      fragment: fragment,\n      uniforms: {\n        iTime: { value: 0 },\n        iResolution: { value: new Float32Array([1, 1]) },\n        uCustomColor: { value: new Float32Array(customColorRgb) },\n        uUseCustomColor: { value: 1.0 },\n        uSpeed: { value: 0.5 * 0.4 },\n        uDirection: { value: 1.0 },\n        uScale: { value: 1.1 },\n        uOpacity: { value: 0.6 },\n        uMouse: { value: new Float32Array([0, 0]) },\n        uMouseInteractive: { value: 1.0 },\n      },\n    });\n\n    const mesh = new Mesh(gl, { geometry, program });\n\n    // Subscribe to color scheme changes using Zustand's subscribe\n    // This ensures color updates work immediately when the user changes the theme\n    let previousColorScheme = useSettingsStore.getState().settings.colorScheme;\n    useSettingsStore.subscribe((state) => {\n      const newColorScheme = state.settings.colorScheme;\n      if (newColorScheme !== previousColorScheme) {\n        previousColorScheme = newColorScheme;\n        const color = plasmaColors[newColorScheme] || '#8b5cf6';\n        const rgb = hexToRgb(color);\n        const colorUniform = program.uniforms.uCustomColor.value as Float32Array;\n        colorUniform[0] = rgb[0];\n        colorUniform[1] = rgb[1];\n        colorUniform[2] = rgb[2];\n      }\n    });\n    // Note: No unsubscribe needed since this component never unmounts\n\n    const mousePos = { x: 0, y: 0 };\n    const handleMouseMove = (e: MouseEvent) => {\n      if (!containerRef.current) return;\n      const rect = containerRef.current.getBoundingClientRect();\n      mousePos.x = e.clientX - rect.left;\n      mousePos.y = e.clientY - rect.top;\n      const mouseUniform = program.uniforms.uMouse.value as Float32Array;\n      mouseUniform[0] = mousePos.x;\n      mouseUniform[1] = mousePos.y;\n    };\n\n    containerEl.addEventListener('mousemove', handleMouseMove);\n\n    const setSize = () => {\n      if (!containerRef.current) return;\n      const rect = containerRef.current.getBoundingClientRect();\n      const width = Math.max(1, Math.floor(rect.width));\n      const height = Math.max(1, Math.floor(rect.height));\n      renderer.setSize(width, height);\n      const res = program.uniforms.iResolution.value as Float32Array;\n      res[0] = gl.drawingBufferWidth;\n      res[1] = gl.drawingBufferHeight;\n    };\n\n    const ro = new ResizeObserver(setSize);\n    ro.observe(containerEl);\n    setSize();\n\n    // FPS limiting for better battery life and smoother tab transitions\n    const targetFps = isMobile ? 20 : 24;\n    const frameInterval = 1000 / targetFps;\n    let lastFrameTime = 0;\n    const t0 = performance.now();\n    let isRendering = true;\n\n    // Pause rendering briefly when document is not focused or during heavy operations\n    const handleVisibilityChange = () => {\n      isRendering = !document.hidden;\n    };\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n\n    const loop = (t: number) => {\n      requestAnimationFrame(loop);\n\n      // Skip if not rendering\n      if (!isRendering) return;\n\n      // Skip frames to maintain target FPS\n      const elapsed = t - lastFrameTime;\n      if (elapsed < frameInterval) return;\n      lastFrameTime = t - (elapsed % frameInterval);\n\n      const timeValue = (t - t0) * 0.001;\n      program.uniforms.iTime.value = timeValue;\n      renderer.render({ scene: mesh });\n    };\n    requestAnimationFrame(loop);\n\n    // This effect should NEVER cleanup - we want the plasma to persist forever\n  }, []);\n\n  return (\n    <div\n      ref={containerRef}\n      className=\"fixed inset-0 pointer-events-none no-print\"\n      style={{\n        zIndex: -1,\n        overflow: 'hidden',\n      }}\n    />\n  );\n}\n\nexport default PlasmaBackground;\n","import { useState, memo, type FormEvent } from 'react';\nimport { useAuthStore } from '@/stores';\nimport { Icons } from '@/components/ui';\n\ninterface LoginFormProps {\n  onLoginSuccess?: () => void;\n}\n\n/**\n * Login form component\n */\nexport const LoginForm = memo(function LoginForm({ onLoginSuccess }: LoginFormProps) {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [isExiting, setIsExiting] = useState(false);\n\n  const login = useAuthStore((state) => state.login);\n\n  const handleSubmit = async (e: FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setLoading(true);\n\n    const success = await login(username, password);\n\n    if (success) {\n      // Trigger exit animation\n      setIsExiting(true);\n      // Wait for animation then notify parent\n      setTimeout(() => {\n        onLoginSuccess?.();\n      }, 500);\n    } else {\n      setError('Identifiants invalides');\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className={`min-h-screen flex items-center justify-center p-4 transition-opacity duration-500 ${isExiting ? 'opacity-0' : 'opacity-100'}`}>\n      <div\n        className={`rounded-2xl shadow-2xl p-8 w-full max-w-md border border-[var(--glass-border)] backdrop-blur-xl transition-all duration-500 ${isExiting ? 'scale-95 opacity-0' : 'scale-100 opacity-100'}`}\n        style={{ background: 'var(--glass-bg)' }}\n      >\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-3xl font-bold text-[var(--text-main)] mb-2\">Moodix</h1>\n          <p className=\"text-[var(--text-secondary)] text-sm\">\n            Connectez-vous pour accder  votre journal\n          </p>\n        </div>\n\n        <form onSubmit={(e) => void handleSubmit(e)} className=\"space-y-6\">\n          <div>\n            <label\n              htmlFor=\"username\"\n              className=\"block text-sm font-bold text-[var(--text-main)] mb-2\"\n            >\n              Nom d&apos;utilisateur\n            </label>\n            <input\n              id=\"username\"\n              type=\"text\"\n              value={username}\n              onChange={(e) => setUsername(e.target.value)}\n              className=\"w-full px-4 py-3 bg-input rounded-xl text-[var(--text-main)] border border-[var(--border)] focus:outline-none focus:ring-2 focus:ring-[var(--primary)]/50 focus:border-transparent transition\"\n              placeholder=\"admin\"\n              required\n              autoFocus\n              autoComplete=\"username\"\n              aria-describedby={error ? 'login-error' : undefined}\n            />\n          </div>\n\n          <div>\n            <label\n              htmlFor=\"password\"\n              className=\"block text-sm font-bold text-[var(--text-main)] mb-2\"\n            >\n              Mot de passe\n            </label>\n            <input\n              id=\"password\"\n              type=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              className=\"w-full px-4 py-3 bg-input rounded-xl text-[var(--text-main)] border border-[var(--border)] focus:outline-none focus:ring-2 focus:ring-[var(--primary)]/50 focus:border-transparent transition\"\n              placeholder=\"\"\n              required\n              autoComplete=\"current-password\"\n            />\n          </div>\n\n          {error && (\n            <div\n              id=\"login-error\"\n              className=\"bg-red-500/10 text-red-400 px-4 py-3 rounded-xl text-sm shadow-lg shadow-red-500/10\"\n              role=\"alert\"\n            >\n              {error}\n            </div>\n          )}\n\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"w-full bg-gradient-to-r from-[var(--primary)] to-[var(--primary-dark)] hover:from-[var(--primary-dark)] hover:to-[var(--primary)] disabled:from-[var(--bg-card)] disabled:to-[var(--bg-card)] disabled:opacity-50 text-white font-bold py-3 px-4 rounded-xl transition duration-200 flex items-center justify-center gap-2 shadow-lg shadow-[var(--primary)]/30\"\n            aria-busy={loading}\n          >\n            {loading ? (\n              <>\n                <Icons.Loading className=\"animate-spin h-5 w-5\" />\n                Connexion...\n              </>\n            ) : (\n              'Se connecter'\n            )}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n});\n\nexport default LoginForm;\n","import { useJournalStore, useSettingsStore, useUIStore } from '@/stores';\nimport { getTranslation } from '@/utils/translations';\nimport { DISPLAY_HOURS } from '@/utils/constants';\nimport { isTimeInColumn } from '@/utils/helpers';\n\n/**\n * Print-only view that renders the exact format required by the therapist\n * This component is hidden on screen but visible when printing\n */\nexport function PrintView() {\n  const { entries } = useJournalStore();\n  const { settings } = useSettingsStore();\n  const { printConfig, printSelectedDates } = useUIStore();\n\n  const t = (key: Parameters<typeof getTranslation>[1]) => getTranslation(settings.lang, key);\n\n  return (\n    <div className=\"print-only p-4 print-reset-bg\">\n      {/* Sleep Agenda Table */}\n      {printConfig.sleep && (\n        <>\n          <h1 className=\"text-2xl font-bold text-center mb-1 print-reset-text\">\n            {t('print_title_sleep')}\n          </h1>\n          <div className=\"flex justify-center gap-5 mb-3 text-[10px] uppercase font-bold text-[var(--text-muted)] print-reset-text border-b pb-2 mx-auto w-3/4\">\n            <span>A = {settings.consumables.find((c) => c.key === 'cannabis')?.label}</span>\n            <span>C = {settings.consumables.find((c) => c.key === 'caffeine')?.label}</span>\n            <span>M = {settings.consumables.find((c) => c.key === 'medication')?.label}</span>\n            <span>E = {settings.consumables.find((c) => c.key === 'exercise')?.label}</span>\n          </div>\n          <table className=\"w-full border-collapse print-grid mb-8\">\n            <thead>\n              <tr>\n                <th style={{ width: '8%' }}>Date</th>\n                {DISPLAY_HOURS.map((h, i) => (\n                  <th key={i}>{h}</th>\n                ))}\n              </tr>\n            </thead>\n            <tbody>\n              {Object.keys(entries)\n                .sort()\n                .map((date) => {\n                  const entry = entries[date];\n                  const dayName = new Date(date).toLocaleDateString(\n                    settings.lang === 'fr' ? 'fr-FR' : 'en-US',\n                    { weekday: 'long' }\n                  );\n                  return (\n                    <tr key={date}>\n                      <td className=\"text-left pl-1 relative\">\n                        <div className=\"font-bold\">\n                          {new Date(date).getDate()}/{new Date(date).getMonth() + 1}\n                        </div>\n                        <div className=\"text-[9px] uppercase\">{dayName.slice(0, 3)}</div>\n                      </td>\n                      {(entry.sleepHours || []).map((isAsleep, idx) => {\n                        const bedtimes = Array.isArray(entry.bedtime)\n                          ? entry.bedtime\n                          : entry.bedtime\n                            ? [entry.bedtime]\n                            : [];\n                        const wakeups = Array.isArray(entry.wakeup)\n                          ? entry.wakeup\n                          : entry.wakeup\n                            ? [entry.wakeup]\n                            : [];\n\n                        const isBedtime = bedtimes.some((t) => isTimeInColumn(t, idx));\n                        const isWakeup = wakeups.some((t) => isTimeInColumn(t, idx));\n\n                        const caffeineCount = (entry.caffeine || []).filter((c) => {\n                          const time = typeof c === 'string' ? null : c.time;\n                          return time && isTimeInColumn(time, idx);\n                        }).length;\n                        const exCount = (entry.exercise || []).filter((e) => {\n                          const time = typeof e === 'string' ? null : e.time;\n                          return time && isTimeInColumn(time, idx);\n                        }).length;\n                        const medCount = (entry.medication || []).filter((m) => {\n                          const time = typeof m === 'string' ? null : m.time;\n                          return time && isTimeInColumn(time, idx);\n                        }).length;\n                        const cannabisCount = (entry.cannabis || []).filter((a) => {\n                          const time = typeof a === 'string' ? null : a.time;\n                          return time && isTimeInColumn(time, idx);\n                        }).length;\n\n                        return (\n                          <td key={idx} className={isAsleep ? 'cell-sleep' : ''}>\n                            <div className=\"cell-content\">\n                              {isBedtime && <span className=\"arrow-symbol\"></span>}{' '}\n                              {isWakeup && <span className=\"arrow-symbol\"></span>}\n                              {caffeineCount > 0 && <span className=\"letter-symbol\">C</span>}{' '}\n                              {medCount > 0 && <span className=\"letter-symbol\">M</span>}\n                              {exCount > 0 && <span className=\"letter-symbol\">E</span>}{' '}\n                              {cannabisCount > 0 && (\n                                <span className=\"letter-symbol\">\n                                  {cannabisCount > 1 ? `A${cannabisCount}` : 'A'}\n                                </span>\n                              )}\n                            </div>\n                          </td>\n                        );\n                      })}\n                    </tr>\n                  );\n                })}\n            </tbody>\n          </table>\n        </>\n      )}\n\n      {/* Activities and Cycles for selected dates */}\n      {[...printSelectedDates].sort().map((date) => {\n        const entry = entries[date];\n        if (!entry) return null;\n\n        const logData = entry.activityLog || [];\n        const hasActivities =\n          printConfig.activities && logData.some((l) => l.activities && l.activities.length > 0);\n        const hasCycles =\n          printConfig.cycles && entry.viciousCycles && entry.viciousCycles.length > 0;\n\n        if (!hasActivities && !hasCycles) return null;\n\n        return (\n          <div key={date} className=\"page-break print-reset-text\">\n            <h1 className=\"text-xl font-bold text-center mt-4 mb-2\">\n              {t('print_title_act')} -{' '}\n              {new Date(date).toLocaleDateString(settings.lang === 'fr' ? 'fr-FR' : 'en-US', {\n                weekday: 'long',\n                day: 'numeric',\n                month: 'long',\n                year: 'numeric',\n              })}\n            </h1>\n\n            {hasActivities && (\n              <>\n                <table className=\"activity-print-table\">\n                  <thead>\n                    <tr>\n                      <th className=\"w-16\">Heure</th>\n                      <th>{t('print_act')}</th>\n                      <th className=\"w-12\">P</th>\n                      <th className=\"w-12\">M</th>\n                      <th className=\"w-12\">S</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {logData.map((log) => (\n                      <tr key={log.slot}>\n                        <td className=\"text-center font-bold\">{log.slot}</td>\n                        <td>\n                          <strong>\n                            {log.activities.map((act) => act.name).join(' - ')}\n                          </strong>\n                        </td>\n                        <td className=\"text-center\">\n                          {log.activities.map((act) => act.plaisir).join(' - ')}\n                        </td>\n                        <td className=\"text-center\">\n                          {log.activities.map((act) => act.maitrise).join(' - ')}\n                        </td>\n                        <td className=\"text-center\">\n                          {log.activities.map((act) => act.satisfaction).join(' - ')}\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n                <div className=\"mt-4 flex gap-4\">\n                  <div className=\"border p-2 text-center font-bold flex-1\">\n                    {t('mood_title')} : {entry.generalMood}/10\n                  </div>\n                  {entry.thoughts && (\n                    <div className=\"border p-2 text-sm italic flex-[3]\">&quot;{entry.thoughts}&quot;</div>\n                  )}\n                </div>\n              </>\n            )}\n\n            {hasCycles && (\n              <div className={hasActivities ? 'page-break' : 'mt-6'}>\n                <h2 className=\"text-sm font-bold uppercase mb-2 border-b\">{t('cycles_header')}</h2>\n                <table className=\"cycle-print-table\">\n                  <thead>\n                    <tr>\n                      <th style={{ width: '20%' }}>{t('situation_label')}</th>\n                      <th style={{ width: '15%' }}>{t('emotions_label')}</th>\n                      <th style={{ width: '20%' }}>{t('thoughts_label')}</th>\n                      <th style={{ width: '20%' }}>{t('behaviors_label')}</th>\n                      <th style={{ width: '25%' }}>{t('consequences_label')}</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {entry.viciousCycles.map((cycle) => (\n                      <tr key={cycle.id}>\n                        <td>{cycle.situation}</td>\n                        <td>\n                          {cycle.emotions.map((e, i) => (\n                            <div key={i} className=\"cycle-list-item\">\n                               {e.name} <strong>({e.score})</strong>\n                            </div>\n                          ))}\n                        </td>\n                        <td>\n                          {cycle.thoughts.map((th, i) => (\n                            <div key={i} className=\"cycle-list-item\">\n                               {th.text}\n                            </div>\n                          ))}\n                        </td>\n                        <td>\n                          {cycle.behaviors.map((b, i) => (\n                            <div key={i} className=\"cycle-list-item\">\n                               {b.text}\n                            </div>\n                          ))}\n                        </td>\n                        <td>\n                          {cycle.consequences.map((c, i) => (\n                            <div key={i} className=\"cycle-list-item\">\n                               {c.text}\n                            </div>\n                          ))}\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            )}\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import { useEffect, useRef, useState, lazy, Suspense } from 'react';\nimport { useAuthStore, useSettingsStore, useJournalStore, useUIStore } from '@/stores';\nimport { LoginForm } from '@/components/auth';\nimport { Toast, Icons, NavBtn, PrintModal } from '@/components/ui';\nimport { PrintView } from '@/components/print';\nimport { getTranslation } from '@/utils/translations';\nimport { useTabTransition } from '@/hooks';\n\n// Lazy load tab content for better performance\nconst SleepTab = lazy(() => import('@/components/sleep/SleepTab'));\nconst ActivitiesTab = lazy(() => import('@/components/activities/ActivitiesTab'));\nconst CyclesTab = lazy(() => import('@/components/cycles/CyclesTab'));\nconst StatsTab = lazy(() => import('@/components/stats/StatsTab'));\nconst SettingsTab = lazy(() => import('@/components/settings/SettingsTab'));\n\n// Loading fallback\nconst TabLoading = () => (\n  <div className=\"flex items-center justify-center py-12\">\n    <Icons.Loading className=\"w-8 h-8\" />\n  </div>\n);\n\nfunction App() {\n  // Auth state\n  const { isAuthenticated, checkAuth } = useAuthStore();\n\n  // Transition state for smooth login animation\n  const [showLoginForm, setShowLoginForm] = useState(true);\n  const [appVisible, setAppVisible] = useState(false);\n\n  // Settings state\n  const { settings, loadSettings } = useSettingsStore();\n\n  // Journal state\n  const { selectedDate, currentEntry, entries, loadEntries, changeDate, setSelectedDate, saveCurrentEntry, saveStatus } = useJournalStore();\n\n  // UI state\n  const { activeTab, setActiveTab, toast, openPrintModal, isPrintModalOpen, togglePrintDate, printSelectedDates } = useUIStore();\n\n  // Auto-save ref for debouncing\n  const saveTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n\n  const tabTransitionClass = useTabTransition(activeTab);\n  const t = (key: Parameters<typeof getTranslation>[1]) => getTranslation(settings.lang, key);\n\n  // Check auth on mount\n  useEffect(() => {\n    void checkAuth();\n  }, [checkAuth]);\n\n  // Load settings and entries when authenticated\n  useEffect(() => {\n    if (isAuthenticated) {\n      void loadSettings();\n      void loadEntries();\n    }\n  }, [isAuthenticated, loadSettings, loadEntries]);\n\n  // Apply theme to document\n  useEffect(() => {\n    const root = document.documentElement;\n    root.setAttribute('data-theme', settings.theme);\n    root.setAttribute('data-color', settings.colorScheme);\n  }, [settings.theme, settings.colorScheme]);\n\n  // Auto-save logic\n  useEffect(() => {\n    if (!currentEntry) return;\n\n    const savedEntry = entries[currentEntry.date];\n\n    // Compare currentEntry with the last saved version\n    const isDifferent = JSON.stringify(currentEntry) !== JSON.stringify(savedEntry);\n\n    if (!isDifferent) {\n      return;\n    }\n\n    // Clear any existing timeout\n    if (saveTimeoutRef.current) {\n      clearTimeout(saveTimeoutRef.current);\n    }\n\n    // Debounce the save operation for 1500ms\n    saveTimeoutRef.current = setTimeout(() => {\n      void saveCurrentEntry();\n    }, 1500);\n\n    return () => {\n      if (saveTimeoutRef.current) {\n        clearTimeout(saveTimeoutRef.current);\n      }\n    };\n  }, [currentEntry, entries, saveCurrentEntry]);\n\n  // Auto-select current date for print\n  useEffect(() => {\n    if (selectedDate && !printSelectedDates.includes(selectedDate)) {\n      togglePrintDate(selectedDate);\n    }\n  }, [selectedDate, printSelectedDates, togglePrintDate]);\n\n  // Handle login success - trigger app fade in\n  const handleLoginSuccess = () => {\n    setShowLoginForm(false);\n    // Small delay before showing app for smooth transition\n    setTimeout(() => {\n      setAppVisible(true);\n    }, 100);\n  };\n\n  // When already authenticated on mount, skip login form\n  useEffect(() => {\n    if (isAuthenticated === true && showLoginForm) {\n      setShowLoginForm(false);\n      setAppVisible(true);\n    }\n  }, [isAuthenticated, showLoginForm]);\n\n  // Loading state\n  if (isAuthenticated === null) {\n    return (\n      <div className=\"h-screen flex items-center justify-center text-[var(--primary)]\">\n        <Icons.Loading className=\"w-8 h-8 mr-2\" />\n        Vrification...\n      </div>\n    );\n  }\n\n  // Not authenticated - show login form\n  if (isAuthenticated === false || showLoginForm) {\n    return <LoginForm onLoginSuccess={handleLoginSuccess} />;\n  }\n\n  return (\n    <div className={`min-h-screen pb-32 font-outfit text-[var(--text-main)] relative transition-opacity duration-500 ${appVisible ? 'opacity-100' : 'opacity-0'}`}>\n      {/* Header */}\n      <header className=\"sticky top-0 z-30 bg-[var(--bg-main)]/95 backdrop-blur-xl no-print shadow-lg shadow-black/10\">\n        <div className=\"max-w-md mx-auto px-4 py-3 flex items-center justify-between\">\n          <button\n            onClick={() => changeDate(-1)}\n            className=\"nav-arrow-btn p-2.5 rounded-xl bg-[var(--bg-card)]/80 hover:bg-[var(--bg-card-hover)] text-[var(--text-secondary)] flex-shrink-0 transition-all hover:text-[var(--primary)]\"\n            aria-label=\"Jour prcdent\"\n          >\n            <Icons.ChevronLeft />\n          </button>\n\n          <div className=\"flex-1 text-center relative group cursor-pointer mx-4\">\n            <input\n              type=\"date\"\n              value={selectedDate}\n              onChange={(e) => setSelectedDate(e.target.value)}\n              className=\"absolute inset-0 opacity-0 w-full cursor-pointer\"\n              aria-label=\"Slectionner une date\"\n            />\n            <div className=\"flex items-center justify-center gap-1.5 mb-0.5\">\n              <h1 className=\"text-xs font-bold text-[var(--primary)] uppercase tracking-widest\">\n                {t('title')}\n              </h1>\n              {/* Save status indicator */}\n              {saveStatus === 'saving' && (\n                <div className=\"w-1.5 h-1.5 rounded-full bg-amber-400 animate-pulse\" title={t('status_saving')} />\n              )}\n              {saveStatus === 'saved' && (\n                <div className=\"w-1.5 h-1.5 rounded-full bg-emerald-400 animate-fade-out\" title=\"Sauvegard\" />\n              )}\n              {saveStatus === 'error' && (\n                <div className=\"w-1.5 h-1.5 rounded-full bg-rose-400\" title=\"Erreur\" />\n              )}\n              {saveStatus === 'offline' && (\n                <div className=\"w-1.5 h-1.5 rounded-full bg-slate-400\" title=\"Hors ligne\" />\n              )}\n            </div>\n            <div className=\"font-bold text-lg text-[var(--text-main)]\">\n              {new Date(selectedDate).toLocaleDateString(\n                settings.lang === 'fr' ? 'fr-FR' : 'en-US',\n                { weekday: 'long', day: 'numeric', month: 'short' }\n              )}\n            </div>\n          </div>\n\n          <button\n            onClick={() => changeDate(1)}\n            className=\"nav-arrow-btn p-2.5 rounded-xl bg-[var(--bg-card)]/80 hover:bg-[var(--bg-card-hover)] text-[var(--text-secondary)] flex-shrink-0 transition-all hover:text-[var(--primary)]\"\n            aria-label=\"Jour suivant\"\n          >\n            <Icons.ChevronRight />\n          </button>\n        </div>\n      </header>\n\n      {/* Main content */}\n      <main className={`max-w-md mx-auto p-4 no-print ${tabTransitionClass}`}>\n        <Suspense fallback={<TabLoading />}>\n          {activeTab === 'sleep' && <SleepTab />}\n          {activeTab === 'activities' && <ActivitiesTab />}\n          {activeTab === 'cycles' && <CyclesTab />}\n          {activeTab === 'stats' && <StatsTab />}\n          {activeTab === 'settings' && <SettingsTab />}\n        </Suspense>\n      </main>\n\n      {/* Footer navigation */}\n      <nav\n        className=\"fixed bottom-0 left-0 right-0 nav-bar backdrop-blur-xl pb-safe px-4 py-3 z-50 no-print flex justify-between items-center border-t border-[var(--glass-border)]\"\n        style={{ background: 'var(--glass-bg)' }}\n        aria-label=\"Navigation principale\"\n      >\n        <div className=\"flex gap-1 bg-[var(--bg-card)]/60 backdrop-blur p-1.5 rounded-2xl overflow-x-auto w-full mr-3 shadow-lg shadow-black/10 border border-[var(--border)]\">\n          <NavBtn\n            label={t('tab_sleep')}\n            icon={Icons.Moon}\n            active={activeTab === 'sleep'}\n            onClick={() => setActiveTab('sleep')}\n          />\n          <NavBtn\n            label={t('tab_activities')}\n            icon={Icons.List}\n            active={activeTab === 'activities'}\n            onClick={() => setActiveTab('activities')}\n          />\n          <NavBtn\n            label={t('tab_cycles')}\n            icon={Icons.Refresh}\n            active={activeTab === 'cycles'}\n            onClick={() => setActiveTab('cycles')}\n          />\n          <NavBtn\n            label={t('tab_stats')}\n            icon={Icons.Chart}\n            active={activeTab === 'stats'}\n            onClick={() => setActiveTab('stats')}\n          />\n          <NavBtn\n            label={t('tab_settings')}\n            icon={Icons.Cog}\n            active={activeTab === 'settings'}\n            onClick={() => setActiveTab('settings')}\n          />\n        </div>\n        <div className=\"flex gap-3 flex-shrink-0\">\n          <button\n            onClick={openPrintModal}\n            className=\"fab btn-interactive glow-primary ripple-container w-12 h-12 rounded-2xl bg-gradient-to-br from-[var(--primary)] to-[var(--primary-dark)] text-white shadow-lg shadow-[var(--primary)]/40 transition-all flex items-center justify-center\"\n            aria-label=\"Imprimer\"\n          >\n            <Icons.Printer />\n          </button>\n        </div>\n      </nav>\n\n      {/* Print modal */}\n      {isPrintModalOpen && <PrintModal />}\n\n      {/* Toast notifications */}\n      {toast && <Toast toast={toast} />}\n\n      {/* Print view - hidden on screen, visible when printing */}\n      <PrintView />\n    </div>\n  );\n}\n\nexport default App;\n","import { createRoot } from 'react-dom/client';\nimport App from './App';\nimport { PlasmaBackground } from './components/ui';\nimport './styles/index.css';\n\nconst container = document.getElementById('root');\n\nif (!container) {\n  throw new Error('Root element not found');\n}\n\ncreateRoot(container).render(\n  <>\n    {/* Plasma is mounted separately so it persists across tab changes */}\n    <PlasmaBackground />\n    <App />\n  </>\n);\n"],"file":"assets/index-nMGFLr7G.js"}